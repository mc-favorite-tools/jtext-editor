var wa=Object.defineProperty;var Oa=(t,e,n)=>e in t?wa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var go=(t,e,n)=>(Oa(t,typeof e!="symbol"?e+"":e,n),n);const $a=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}};$a();var li={};const Es=ReactDOM;var po=Es;li.createRoot=po.createRoot,li.hydrateRoot=po.hydrateRoot;var _r={exports:{}},X={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ve=typeof Symbol=="function"&&Symbol.for,Mi=ve?Symbol.for("react.element"):60103,Di=ve?Symbol.for("react.portal"):60106,yr=ve?Symbol.for("react.fragment"):60107,vr=ve?Symbol.for("react.strict_mode"):60108,xr=ve?Symbol.for("react.profiler"):60114,Cr=ve?Symbol.for("react.provider"):60109,Nr=ve?Symbol.for("react.context"):60110,Ii=ve?Symbol.for("react.async_mode"):60111,Sr=ve?Symbol.for("react.concurrent_mode"):60111,Tr=ve?Symbol.for("react.forward_ref"):60112,Er=ve?Symbol.for("react.suspense"):60113,Ra=ve?Symbol.for("react.suspense_list"):60120,kr=ve?Symbol.for("react.memo"):60115,wr=ve?Symbol.for("react.lazy"):60116,Aa=ve?Symbol.for("react.block"):60121,Ma=ve?Symbol.for("react.fundamental"):60117,Da=ve?Symbol.for("react.responder"):60118,Ia=ve?Symbol.for("react.scope"):60119;function We(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Mi:switch(t=t.type,t){case Ii:case Sr:case yr:case xr:case vr:case Er:return t;default:switch(t=t&&t.$$typeof,t){case Nr:case Tr:case wr:case kr:case Cr:return t;default:return e}}case Di:return e}}}function ks(t){return We(t)===Sr}X.AsyncMode=Ii;X.ConcurrentMode=Sr;X.ContextConsumer=Nr;X.ContextProvider=Cr;X.Element=Mi;X.ForwardRef=Tr;X.Fragment=yr;X.Lazy=wr;X.Memo=kr;X.Portal=Di;X.Profiler=xr;X.StrictMode=vr;X.Suspense=Er;X.isAsyncMode=function(t){return ks(t)||We(t)===Ii};X.isConcurrentMode=ks;X.isContextConsumer=function(t){return We(t)===Nr};X.isContextProvider=function(t){return We(t)===Cr};X.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mi};X.isForwardRef=function(t){return We(t)===Tr};X.isFragment=function(t){return We(t)===yr};X.isLazy=function(t){return We(t)===wr};X.isMemo=function(t){return We(t)===kr};X.isPortal=function(t){return We(t)===Di};X.isProfiler=function(t){return We(t)===xr};X.isStrictMode=function(t){return We(t)===vr};X.isSuspense=function(t){return We(t)===Er};X.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===yr||t===Sr||t===xr||t===vr||t===Er||t===Ra||typeof t=="object"&&t!==null&&(t.$$typeof===wr||t.$$typeof===kr||t.$$typeof===Cr||t.$$typeof===Nr||t.$$typeof===Tr||t.$$typeof===Ma||t.$$typeof===Da||t.$$typeof===Ia||t.$$typeof===Aa)};X.typeOf=We;_r.exports=X;function Pa(t){function e(v,C,S,$,p){for(var b=0,N=0,V=0,H=0,K,A,F=0,G=0,U,me=U=K=0,q=0,Ee=0,tn=0,ke=0,Kn=S.length,nn=Kn-1,qe,B="",ue="",Hr="",Ur="",lt;q<Kn;){if(A=S.charCodeAt(q),q===nn&&N+H+V+b!==0&&(N!==0&&(A=N===47?10:47),H=V=b=0,Kn++,nn++),N+H+V+b===0){if(q===nn&&(0<Ee&&(B=B.replace(h,"")),0<B.trim().length)){switch(A){case 32:case 9:case 59:case 13:case 10:break;default:B+=S.charAt(q)}A=59}switch(A){case 123:for(B=B.trim(),K=B.charCodeAt(0),U=1,ke=++q;q<Kn;){switch(A=S.charCodeAt(q)){case 123:U++;break;case 125:U--;break;case 47:switch(A=S.charCodeAt(q+1)){case 42:case 47:e:{for(me=q+1;me<nn;++me)switch(S.charCodeAt(me)){case 47:if(A===42&&S.charCodeAt(me-1)===42&&q+2!==me){q=me+1;break e}break;case 10:if(A===47){q=me+1;break e}}q=me}}break;case 91:A++;case 40:A++;case 34:case 39:for(;q++<nn&&S.charCodeAt(q)!==A;);}if(U===0)break;q++}switch(U=S.substring(ke,q),K===0&&(K=(B=B.replace(d,"").trim()).charCodeAt(0)),K){case 64:switch(0<Ee&&(B=B.replace(h,"")),A=B.charCodeAt(1),A){case 100:case 109:case 115:case 45:Ee=C;break;default:Ee=pe}if(U=e(C,Ee,U,A,p+1),ke=U.length,0<Se&&(Ee=n(pe,B,tn),lt=l(3,U,Ee,C,Ne,ce,ke,A,p,$),B=Ee.join(""),lt!==void 0&&(ke=(U=lt.trim()).length)===0&&(A=0,U="")),0<ke)switch(A){case 115:B=B.replace(ee,s);case 100:case 109:case 45:U=B+"{"+U+"}";break;case 107:B=B.replace(T,"$1 $2"),U=B+"{"+U+"}",U=ge===1||ge===2&&o("@"+U,3)?"@-webkit-"+U+"@"+U:"@"+U;break;default:U=B+U,$===112&&(U=(ue+=U,""))}else U="";break;default:U=e(C,n(C,B,tn),U,$,p+1)}Hr+=U,U=tn=Ee=me=K=0,B="",A=S.charCodeAt(++q);break;case 125:case 59:if(B=(0<Ee?B.replace(h,""):B).trim(),1<(ke=B.length))switch(me===0&&(K=B.charCodeAt(0),K===45||96<K&&123>K)&&(ke=(B=B.replace(" ",":")).length),0<Se&&(lt=l(1,B,C,v,Ne,ce,ue.length,$,p,$))!==void 0&&(ke=(B=lt.trim()).length)===0&&(B="\0\0"),K=B.charCodeAt(0),A=B.charCodeAt(1),K){case 0:break;case 64:if(A===105||A===99){Ur+=B+S.charAt(q);break}default:B.charCodeAt(ke-1)!==58&&(ue+=i(B,K,A,B.charCodeAt(2)))}tn=Ee=me=K=0,B="",A=S.charCodeAt(++q)}}switch(A){case 13:case 10:N===47?N=0:1+K===0&&$!==107&&0<B.length&&(Ee=1,B+="\0"),0<Se*Te&&l(0,B,C,v,Ne,ce,ue.length,$,p,$),ce=1,Ne++;break;case 59:case 125:if(N+H+V+b===0){ce++;break}default:switch(ce++,qe=S.charAt(q),A){case 9:case 32:if(H+b+N===0)switch(F){case 44:case 58:case 9:case 32:qe="";break;default:A!==32&&(qe=" ")}break;case 0:qe="\\0";break;case 12:qe="\\f";break;case 11:qe="\\v";break;case 38:H+N+b===0&&(Ee=tn=1,qe="\f"+qe);break;case 108:if(H+N+b+fe===0&&0<me)switch(q-me){case 2:F===112&&S.charCodeAt(q-3)===58&&(fe=F);case 8:G===111&&(fe=G)}break;case 58:H+N+b===0&&(me=q);break;case 44:N+V+H+b===0&&(Ee=1,qe+="\r");break;case 34:case 39:N===0&&(H=H===A?0:H===0?A:H);break;case 91:H+N+V===0&&b++;break;case 93:H+N+V===0&&b--;break;case 41:H+N+b===0&&V--;break;case 40:if(H+N+b===0){if(K===0)switch(2*F+3*G){case 533:break;default:K=1}V++}break;case 64:N+V+H+b+me+U===0&&(U=1);break;case 42:case 47:if(!(0<H+b+V))switch(N){case 0:switch(2*A+3*S.charCodeAt(q+1)){case 235:N=47;break;case 220:ke=q,N=42}break;case 42:A===47&&F===42&&ke+2!==q&&(S.charCodeAt(ke+2)===33&&(ue+=S.substring(ke,q+1)),qe="",N=0)}}N===0&&(B+=qe)}G=F,F=A,q++}if(ke=ue.length,0<ke){if(Ee=C,0<Se&&(lt=l(2,ue,Ee,v,Ne,ce,ke,$,p,$),lt!==void 0&&(ue=lt).length===0))return Ur+ue+Hr;if(ue=Ee.join(",")+"{"+ue+"}",ge*fe!==0){switch(ge!==2||o(ue,2)||(fe=0),fe){case 111:ue=ue.replace(L,":-moz-$1")+ue;break;case 112:ue=ue.replace(I,"::-webkit-input-$1")+ue.replace(I,"::-moz-$1")+ue.replace(I,":-ms-input-$1")+ue}fe=0}}return Ur+ue+Hr}function n(v,C,S){var $=C.trim().split(x);C=$;var p=$.length,b=v.length;switch(b){case 0:case 1:var N=0;for(v=b===0?"":v[0]+" ";N<p;++N)C[N]=r(v,C[N],S).trim();break;default:var V=N=0;for(C=[];N<p;++N)for(var H=0;H<b;++H)C[V++]=r(v[H]+" ",$[N],S).trim()}return C}function r(v,C,S){var $=C.charCodeAt(0);switch(33>$&&($=(C=C.trim()).charCodeAt(0)),$){case 38:return C.replace(k,"$1"+v.trim());case 58:return v.trim()+C.replace(k,"$1"+v.trim());default:if(0<1*S&&0<C.indexOf("\f"))return C.replace(k,(v.charCodeAt(0)===58?"":"$1")+v.trim())}return v+C}function i(v,C,S,$){var p=v+";",b=2*C+3*S+4*$;if(b===944){v=p.indexOf(":",9)+1;var N=p.substring(v,p.length-1).trim();return N=p.substring(0,v).trim()+N+";",ge===1||ge===2&&o(N,1)?"-webkit-"+N+N:N}if(ge===0||ge===2&&!o(p,1))return p;switch(b){case 1015:return p.charCodeAt(10)===97?"-webkit-"+p+p:p;case 951:return p.charCodeAt(3)===116?"-webkit-"+p+p:p;case 963:return p.charCodeAt(5)===110?"-webkit-"+p+p:p;case 1009:if(p.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+p+p;case 978:return"-webkit-"+p+"-moz-"+p+p;case 1019:case 983:return"-webkit-"+p+"-moz-"+p+"-ms-"+p+p;case 883:if(p.charCodeAt(8)===45)return"-webkit-"+p+p;if(0<p.indexOf("image-set(",11))return p.replace(Ge,"$1-webkit-$2")+p;break;case 932:if(p.charCodeAt(4)===45)switch(p.charCodeAt(5)){case 103:return"-webkit-box-"+p.replace("-grow","")+"-webkit-"+p+"-ms-"+p.replace("grow","positive")+p;case 115:return"-webkit-"+p+"-ms-"+p.replace("shrink","negative")+p;case 98:return"-webkit-"+p+"-ms-"+p.replace("basis","preferred-size")+p}return"-webkit-"+p+"-ms-"+p+p;case 964:return"-webkit-"+p+"-ms-flex-"+p+p;case 1023:if(p.charCodeAt(8)!==99)break;return N=p.substring(p.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+N+"-webkit-"+p+"-ms-flex-pack"+N+p;case 1005:return f.test(p)?p.replace(g,":-webkit-")+p.replace(g,":-moz-")+p:p;case 1e3:switch(N=p.substring(13).trim(),C=N.indexOf("-")+1,N.charCodeAt(0)+N.charCodeAt(C)){case 226:N=p.replace(J,"tb");break;case 232:N=p.replace(J,"tb-rl");break;case 220:N=p.replace(J,"lr");break;default:return p}return"-webkit-"+p+"-ms-"+N+p;case 1017:if(p.indexOf("sticky",9)===-1)break;case 975:switch(C=(p=v).length-10,N=(p.charCodeAt(C)===33?p.substring(0,C):p).substring(v.indexOf(":",7)+1).trim(),b=N.charCodeAt(0)+(N.charCodeAt(7)|0)){case 203:if(111>N.charCodeAt(8))break;case 115:p=p.replace(N,"-webkit-"+N)+";"+p;break;case 207:case 102:p=p.replace(N,"-webkit-"+(102<b?"inline-":"")+"box")+";"+p.replace(N,"-webkit-"+N)+";"+p.replace(N,"-ms-"+N+"box")+";"+p}return p+";";case 938:if(p.charCodeAt(5)===45)switch(p.charCodeAt(6)){case 105:return N=p.replace("-items",""),"-webkit-"+p+"-webkit-box-"+N+"-ms-flex-"+N+p;case 115:return"-webkit-"+p+"-ms-flex-item-"+p.replace(ae,"")+p;default:return"-webkit-"+p+"-ms-flex-line-pack"+p.replace("align-content","").replace(ae,"")+p}break;case 973:case 989:if(p.charCodeAt(3)!==45||p.charCodeAt(4)===122)break;case 931:case 953:if(Pe.test(v)===!0)return(N=v.substring(v.indexOf(":")+1)).charCodeAt(0)===115?i(v.replace("stretch","fill-available"),C,S,$).replace(":fill-available",":stretch"):p.replace(N,"-webkit-"+N)+p.replace(N,"-moz-"+N.replace("fill-",""))+p;break;case 962:if(p="-webkit-"+p+(p.charCodeAt(5)===102?"-ms-"+p:"")+p,S+$===211&&p.charCodeAt(13)===105&&0<p.indexOf("transform",10))return p.substring(0,p.indexOf(";",27)+1).replace(y,"$1-webkit-$2")+p}return p}function o(v,C){var S=v.indexOf(C===1?":":"{"),$=v.substring(0,C!==3?S:10);return S=v.substring(S+1,v.length-1),Ve(C!==2?$:$.replace(Ie,"$1"),S,C)}function s(v,C){var S=i(C,C.charCodeAt(0),C.charCodeAt(1),C.charCodeAt(2));return S!==C+";"?S.replace(Ce," or ($1)").substring(4):"("+C+")"}function l(v,C,S,$,p,b,N,V,H,K){for(var A=0,F=C,G;A<Se;++A)switch(G=de[A].call(c,v,F,S,$,p,b,N,V,H,K)){case void 0:case!1:case!0:case null:break;default:F=G}if(F!==C)return F}function a(v){switch(v){case void 0:case null:Se=de.length=0;break;default:if(typeof v=="function")de[Se++]=v;else if(typeof v=="object")for(var C=0,S=v.length;C<S;++C)a(v[C]);else Te=!!v|0}return a}function u(v){return v=v.prefix,v!==void 0&&(Ve=null,v?typeof v!="function"?ge=1:(ge=2,Ve=v):ge=0),u}function c(v,C){var S=v;if(33>S.charCodeAt(0)&&(S=S.trim()),ze=S,S=[ze],0<Se){var $=l(-1,C,S,S,Ne,ce,0,0,0,0);$!==void 0&&typeof $=="string"&&(C=$)}var p=e(pe,S,C,0,0);return 0<Se&&($=l(-2,p,S,S,Ne,ce,p.length,0,0,0),$!==void 0&&(p=$)),ze="",fe=0,ce=Ne=1,p}var d=/^\0+/g,h=/[\0\r\f]/g,g=/: */g,f=/zoo|gra/,y=/([,: ])(transform)/g,x=/,\r+?/g,k=/([\t\r\n ])*\f?&/g,T=/@(k\w+)\s*(\S*)\s*/,I=/::(place)/g,L=/:(read-only)/g,J=/[svh]\w+-[tblr]{2}/,ee=/\(\s*(.*)\s*\)/g,Ce=/([\s\S]*?);/g,ae=/-self|flex-/g,Ie=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Pe=/stretch|:\s*\w+\-(?:conte|avail)/,Ge=/([^-])(image-set\()/,ce=1,Ne=1,fe=0,ge=1,pe=[],de=[],Se=0,Ve=null,Te=0,ze="";return c.use=a,c.set=u,t!==void 0&&u(t),c}var ba={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function La(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var Fa=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,mo=La(function(t){return Fa.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),Pi=_r.exports,Ba={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},za={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ja={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ws={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},bi={};bi[Pi.ForwardRef]=ja;bi[Pi.Memo]=ws;function _o(t){return Pi.isMemo(t)?ws:bi[t.$$typeof]||Ba}var Ka=Object.defineProperty,Wa=Object.getOwnPropertyNames,yo=Object.getOwnPropertySymbols,Ha=Object.getOwnPropertyDescriptor,Ua=Object.getPrototypeOf,vo=Object.prototype;function Os(t,e,n){if(typeof e!="string"){if(vo){var r=Ua(e);r&&r!==vo&&Os(t,r,n)}var i=Wa(e);yo&&(i=i.concat(yo(e)));for(var o=_o(t),s=_o(e),l=0;l<i.length;++l){var a=i[l];if(!za[a]&&!(n&&n[a])&&!(s&&s[a])&&!(o&&o[a])){var u=Ha(e,a);try{Ka(t,a,u)}catch{}}}}return t}var Ya=Os;function st(){return(st=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}var xo=function(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n},ai=function(t){return t!==null&&typeof t=="object"&&(t.toString?t.toString():Object.prototype.toString.call(t))==="[object Object]"&&!_r.exports.typeOf(t)},sr=Object.freeze([]),dt=Object.freeze({});function vn(t){return typeof t=="function"}function Co(t){return t.displayName||t.name||"Component"}function Li(t){return t&&typeof t.styledComponentId=="string"}var zt=typeof process!="undefined"&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",Fi=typeof window!="undefined"&&"HTMLElement"in window,Ja=Boolean(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process!="undefined"&&{}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:typeof process!="undefined"&&{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""?{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY:!1);function Mn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+t+" for more information."+(n.length>0?" Args: "+n.join(", "):""))}var Ga=function(){function t(n){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=n}var e=t.prototype;return e.indexOfGroup=function(n){for(var r=0,i=0;i<n;i++)r+=this.groupSizes[i];return r},e.insertRules=function(n,r){if(n>=this.groupSizes.length){for(var i=this.groupSizes,o=i.length,s=o;n>=s;)(s<<=1)<0&&Mn(16,""+n);this.groupSizes=new Uint32Array(s),this.groupSizes.set(i),this.length=s;for(var l=o;l<s;l++)this.groupSizes[l]=0}for(var a=this.indexOfGroup(n+1),u=0,c=r.length;u<c;u++)this.tag.insertRule(a,r[u])&&(this.groupSizes[n]++,a++)},e.clearGroup=function(n){if(n<this.length){var r=this.groupSizes[n],i=this.indexOfGroup(n),o=i+r;this.groupSizes[n]=0;for(var s=i;s<o;s++)this.tag.deleteRule(i)}},e.getGroup=function(n){var r="";if(n>=this.length||this.groupSizes[n]===0)return r;for(var i=this.groupSizes[n],o=this.indexOfGroup(n),s=o+i,l=o;l<s;l++)r+=this.tag.getRule(l)+`/*!sc*/
`;return r},t}(),Qn=new Map,lr=new Map,fn=1,Wn=function(t){if(Qn.has(t))return Qn.get(t);for(;lr.has(fn);)fn++;var e=fn++;return Qn.set(t,e),lr.set(e,t),e},Va=function(t){return lr.get(t)},qa=function(t,e){e>=fn&&(fn=e+1),Qn.set(t,e),lr.set(e,t)},Xa="style["+zt+'][data-styled-version="5.3.5"]',Za=new RegExp("^"+zt+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),Qa=function(t,e,n){for(var r,i=n.split(","),o=0,s=i.length;o<s;o++)(r=i[o])&&t.registerName(e,r)},eu=function(t,e){for(var n=(e.textContent||"").split(`/*!sc*/
`),r=[],i=0,o=n.length;i<o;i++){var s=n[i].trim();if(s){var l=s.match(Za);if(l){var a=0|parseInt(l[1],10),u=l[2];a!==0&&(qa(u,a),Qa(t,u,l[3]),t.getTag().insertRules(a,r)),r.length=0}else r.push(s)}}},tu=function(){return typeof window!="undefined"&&window.__webpack_nonce__!==void 0?window.__webpack_nonce__:null},$s=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=function(l){for(var a=l.childNodes,u=a.length;u>=0;u--){var c=a[u];if(c&&c.nodeType===1&&c.hasAttribute(zt))return c}}(n),o=i!==void 0?i.nextSibling:null;r.setAttribute(zt,"active"),r.setAttribute("data-styled-version","5.3.5");var s=tu();return s&&r.setAttribute("nonce",s),n.insertBefore(r,o),r},nu=function(){function t(n){var r=this.element=$s(n);r.appendChild(document.createTextNode("")),this.sheet=function(i){if(i.sheet)return i.sheet;for(var o=document.styleSheets,s=0,l=o.length;s<l;s++){var a=o[s];if(a.ownerNode===i)return a}Mn(17)}(r),this.length=0}var e=t.prototype;return e.insertRule=function(n,r){try{return this.sheet.insertRule(r,n),this.length++,!0}catch{return!1}},e.deleteRule=function(n){this.sheet.deleteRule(n),this.length--},e.getRule=function(n){var r=this.sheet.cssRules[n];return r!==void 0&&typeof r.cssText=="string"?r.cssText:""},t}(),ru=function(){function t(n){var r=this.element=$s(n);this.nodes=r.childNodes,this.length=0}var e=t.prototype;return e.insertRule=function(n,r){if(n<=this.length&&n>=0){var i=document.createTextNode(r),o=this.nodes[n];return this.element.insertBefore(i,o||null),this.length++,!0}return!1},e.deleteRule=function(n){this.element.removeChild(this.nodes[n]),this.length--},e.getRule=function(n){return n<this.length?this.nodes[n].textContent:""},t}(),iu=function(){function t(n){this.rules=[],this.length=0}var e=t.prototype;return e.insertRule=function(n,r){return n<=this.length&&(this.rules.splice(n,0,r),this.length++,!0)},e.deleteRule=function(n){this.rules.splice(n,1),this.length--},e.getRule=function(n){return n<this.length?this.rules[n]:""},t}(),No=Fi,ou={isServer:!Fi,useCSSOMInjection:!Ja},Rs=function(){function t(n,r,i){n===void 0&&(n=dt),r===void 0&&(r={}),this.options=st({},ou,{},n),this.gs=r,this.names=new Map(i),this.server=!!n.isServer,!this.server&&Fi&&No&&(No=!1,function(o){for(var s=document.querySelectorAll(Xa),l=0,a=s.length;l<a;l++){var u=s[l];u&&u.getAttribute(zt)!=="active"&&(eu(o,u),u.parentNode&&u.parentNode.removeChild(u))}}(this))}t.registerId=function(n){return Wn(n)};var e=t.prototype;return e.reconstructWithOptions=function(n,r){return r===void 0&&(r=!0),new t(st({},this.options,{},n),this.gs,r&&this.names||void 0)},e.allocateGSInstance=function(n){return this.gs[n]=(this.gs[n]||0)+1},e.getTag=function(){return this.tag||(this.tag=(i=(r=this.options).isServer,o=r.useCSSOMInjection,s=r.target,n=i?new iu(s):o?new nu(s):new ru(s),new Ga(n)));var n,r,i,o,s},e.hasNameForId=function(n,r){return this.names.has(n)&&this.names.get(n).has(r)},e.registerName=function(n,r){if(Wn(n),this.names.has(n))this.names.get(n).add(r);else{var i=new Set;i.add(r),this.names.set(n,i)}},e.insertRules=function(n,r,i){this.registerName(n,r),this.getTag().insertRules(Wn(n),i)},e.clearNames=function(n){this.names.has(n)&&this.names.get(n).clear()},e.clearRules=function(n){this.getTag().clearGroup(Wn(n)),this.clearNames(n)},e.clearTag=function(){this.tag=void 0},e.toString=function(){return function(n){for(var r=n.getTag(),i=r.length,o="",s=0;s<i;s++){var l=Va(s);if(l!==void 0){var a=n.names.get(l),u=r.getGroup(s);if(a&&u&&a.size){var c=zt+".g"+s+'[id="'+l+'"]',d="";a!==void 0&&a.forEach(function(h){h.length>0&&(d+=h+",")}),o+=""+u+c+'{content:"'+d+`"}/*!sc*/
`}}}return o}(this)},t}(),su=/(a)(d)/gi,So=function(t){return String.fromCharCode(t+(t>25?39:97))};function ui(t){var e,n="";for(e=Math.abs(t);e>52;e=e/52|0)n=So(e%52)+n;return(So(e%52)+n).replace(su,"$1-$2")}var At=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},As=function(t){return At(5381,t)};function lu(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(vn(n)&&!Li(n))return!1}return!0}var au=As("5.3.5"),uu=function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&lu(e),this.componentId=n,this.baseHash=At(au,n),this.baseStyle=r,Rs.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.componentId,o=[];if(this.baseStyle&&o.push(this.baseStyle.generateAndInjectStyles(e,n,r)),this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(i,this.staticRulesId))o.push(this.staticRulesId);else{var s=jt(this.rules,e,n,r).join(""),l=ui(At(this.baseHash,s)>>>0);if(!n.hasNameForId(i,l)){var a=r(s,"."+l,void 0,i);n.insertRules(i,l,a)}o.push(l),this.staticRulesId=l}else{for(var u=this.rules.length,c=At(this.baseHash,r.hash),d="",h=0;h<u;h++){var g=this.rules[h];if(typeof g=="string")d+=g;else if(g){var f=jt(g,e,n,r),y=Array.isArray(f)?f.join(""):f;c=At(c,y+h),d+=y}}if(d){var x=ui(c>>>0);if(!n.hasNameForId(i,x)){var k=r(d,"."+x,void 0,i);n.insertRules(i,x,k)}o.push(x)}}return o.join(" ")},t}(),cu=/^\s*\/\/.*$/gm,du=[":","[",".","#"];function fu(t){var e,n,r,i,o=t===void 0?dt:t,s=o.options,l=s===void 0?dt:s,a=o.plugins,u=a===void 0?sr:a,c=new Pa(l),d=[],h=function(y){function x(k){if(k)try{y(k+"}")}catch{}}return function(k,T,I,L,J,ee,Ce,ae,Ie,Pe){switch(k){case 1:if(Ie===0&&T.charCodeAt(0)===64)return y(T+";"),"";break;case 2:if(ae===0)return T+"/*|*/";break;case 3:switch(ae){case 102:case 112:return y(I[0]+T),"";default:return T+(Pe===0?"/*|*/":"")}case-2:T.split("/*|*/}").forEach(x)}}}(function(y){d.push(y)}),g=function(y,x,k){return x===0&&du.indexOf(k[n.length])!==-1||k.match(i)?y:"."+e};function f(y,x,k,T){T===void 0&&(T="&");var I=y.replace(cu,""),L=x&&k?k+" "+x+" { "+I+" }":I;return e=T,n=x,r=new RegExp("\\"+n+"\\b","g"),i=new RegExp("(\\"+n+"\\b){2,}"),c(k||!x?"":x,L)}return c.use([].concat(u,[function(y,x,k){y===2&&k.length&&k[0].lastIndexOf(n)>0&&(k[0]=k[0].replace(r,g))},h,function(y){if(y===-2){var x=d;return d=[],x}}])),f.hash=u.length?u.reduce(function(y,x){return x.name||Mn(15),At(y,x.name)},5381).toString():"",f}var Ms=React.createContext();Ms.Consumer;var Ds=React.createContext(),hu=(Ds.Consumer,new Rs),ci=fu();function gu(){return React.useContext(Ms)||hu}function pu(){return React.useContext(Ds)||ci}var mu=function(){function t(e,n){var r=this;this.inject=function(i,o){o===void 0&&(o=ci);var s=r.name+o.hash;i.hasNameForId(r.id,s)||i.insertRules(r.id,s,o(r.rules,s,"@keyframes"))},this.toString=function(){return Mn(12,String(r.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=n}return t.prototype.getName=function(e){return e===void 0&&(e=ci),this.name+e.hash},t}(),_u=/([A-Z])/,yu=/([A-Z])/g,vu=/^ms-/,xu=function(t){return"-"+t.toLowerCase()};function To(t){return _u.test(t)?t.replace(yu,xu).replace(vu,"-ms-"):t}var Eo=function(t){return t==null||t===!1||t===""};function jt(t,e,n,r){if(Array.isArray(t)){for(var i,o=[],s=0,l=t.length;s<l;s+=1)(i=jt(t[s],e,n,r))!==""&&(Array.isArray(i)?o.push.apply(o,i):o.push(i));return o}if(Eo(t))return"";if(Li(t))return"."+t.styledComponentId;if(vn(t)){if(typeof(u=t)!="function"||u.prototype&&u.prototype.isReactComponent||!e)return t;var a=t(e);return jt(a,e,n,r)}var u;return t instanceof mu?n?(t.inject(n,r),t.getName(r)):t:ai(t)?function c(d,h){var g,f,y=[];for(var x in d)d.hasOwnProperty(x)&&!Eo(d[x])&&(Array.isArray(d[x])&&d[x].isCss||vn(d[x])?y.push(To(x)+":",d[x],";"):ai(d[x])?y.push.apply(y,c(d[x],x)):y.push(To(x)+": "+(g=x,(f=d[x])==null||typeof f=="boolean"||f===""?"":typeof f!="number"||f===0||g in ba?String(f).trim():f+"px")+";"));return h?[h+" {"].concat(y,["}"]):y}(t):t.toString()}var ko=function(t){return Array.isArray(t)&&(t.isCss=!0),t};function Cu(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return vn(t)||ai(t)?ko(jt(xo(sr,[t].concat(n)))):n.length===0&&t.length===1&&typeof t[0]=="string"?t:ko(jt(xo(t,n)))}var Nu=function(t,e,n){return n===void 0&&(n=dt),t.theme!==n.theme&&t.theme||e||n.theme},Su=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Tu=/(^-|-$)/g;function Yr(t){return t.replace(Su,"-").replace(Tu,"")}var Eu=function(t){return ui(As(t)>>>0)};function Hn(t){return typeof t=="string"&&!0}var di=function(t){return typeof t=="function"||typeof t=="object"&&t!==null&&!Array.isArray(t)},ku=function(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"};function wu(t,e,n){var r=t[n];di(e)&&di(r)?Is(r,e):t[n]=e}function Is(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var s=o[i];if(di(s))for(var l in s)ku(l)&&wu(t,s[l],l)}return t}var Ps=React.createContext();Ps.Consumer;var Jr={};function bs(t,e,n){var r=Li(t),i=!Hn(t),o=e.attrs,s=o===void 0?sr:o,l=e.componentId,a=l===void 0?function(T,I){var L=typeof T!="string"?"sc":Yr(T);Jr[L]=(Jr[L]||0)+1;var J=L+"-"+Eu("5.3.5"+L+Jr[L]);return I?I+"-"+J:J}(e.displayName,e.parentComponentId):l,u=e.displayName,c=u===void 0?function(T){return Hn(T)?"styled."+T:"Styled("+Co(T)+")"}(t):u,d=e.displayName&&e.componentId?Yr(e.displayName)+"-"+e.componentId:e.componentId||a,h=r&&t.attrs?Array.prototype.concat(t.attrs,s).filter(Boolean):s,g=e.shouldForwardProp;r&&t.shouldForwardProp&&(g=e.shouldForwardProp?function(T,I,L){return t.shouldForwardProp(T,I,L)&&e.shouldForwardProp(T,I,L)}:t.shouldForwardProp);var f,y=new uu(n,d,r?t.componentStyle:void 0),x=y.isStatic&&s.length===0,k=function(T,I){return function(L,J,ee,Ce){var ae=L.attrs,Ie=L.componentStyle,Pe=L.defaultProps,Ge=L.foldedComponentIds,ce=L.shouldForwardProp,Ne=L.styledComponentId,fe=L.target,ge=function($,p,b){$===void 0&&($=dt);var N=st({},p,{theme:$}),V={};return b.forEach(function(H){var K,A,F,G=H;for(K in vn(G)&&(G=G(N)),G)N[K]=V[K]=K==="className"?(A=V[K],F=G[K],A&&F?A+" "+F:A||F):G[K]}),[N,V]}(Nu(J,React.useContext(Ps),Pe)||dt,J,ae),pe=ge[0],de=ge[1],Se=function($,p,b,N){var V=gu(),H=pu(),K=p?$.generateAndInjectStyles(dt,V,H):$.generateAndInjectStyles(b,V,H);return K}(Ie,Ce,pe),Ve=ee,Te=de.$as||J.$as||de.as||J.as||fe,ze=Hn(Te),v=de!==J?st({},J,{},de):J,C={};for(var S in v)S[0]!=="$"&&S!=="as"&&(S==="forwardedAs"?C.as=v[S]:(ce?ce(S,mo,Te):!ze||mo(S))&&(C[S]=v[S]));return J.style&&de.style!==J.style&&(C.style=st({},J.style,{},de.style)),C.className=Array.prototype.concat(Ge,Ne,Se!==Ne?Se:null,J.className,de.className).filter(Boolean).join(" "),C.ref=Ve,React.createElement(Te,C)}(f,T,I,x)};return k.displayName=c,(f=React.forwardRef(k)).attrs=h,f.componentStyle=y,f.displayName=c,f.shouldForwardProp=g,f.foldedComponentIds=r?Array.prototype.concat(t.foldedComponentIds,t.styledComponentId):sr,f.styledComponentId=d,f.target=r?t.target:t,f.withComponent=function(T){var I=e.componentId,L=function(ee,Ce){if(ee==null)return{};var ae,Ie,Pe={},Ge=Object.keys(ee);for(Ie=0;Ie<Ge.length;Ie++)ae=Ge[Ie],Ce.indexOf(ae)>=0||(Pe[ae]=ee[ae]);return Pe}(e,["componentId"]),J=I&&I+"-"+(Hn(T)?T:Yr(Co(T)));return bs(T,st({},L,{attrs:h,componentId:J}),n)},Object.defineProperty(f,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(T){this._foldedDefaultProps=r?Is({},t.defaultProps,T):T}}),f.toString=function(){return"."+f.styledComponentId},i&&Ya(f,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),f}var fi=function(t){return function e(n,r,i){if(i===void 0&&(i=dt),!_r.exports.isValidElementType(r))return Mn(1,String(r));var o=function(){return n(r,i,Cu.apply(void 0,arguments))};return o.withConfig=function(s){return e(n,r,st({},i,{},s))},o.attrs=function(s){return e(n,r,st({},i,{attrs:Array.prototype.concat(i.attrs,s).filter(Boolean)}))},o}(bs,t)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(t){fi[t]=fi(t)});var St=fi,Ls={},Or={};const ht=React;var Fs=ht;let Bs=Fs.createContext(null);Or.LexicalComposerContext=Bs;Or.createLexicalComposerContext=function(t,e){let n=null;return t!=null&&(n=t[1]),{getTheme:function(){return e!=null?e:n!=null?n.getTheme():null}}};Or.useLexicalComposerContext=function(){let t=Fs.useContext(Bs);if(t==null)throw Error("Minified Lexical error #8; visit https://lexical.dev/docs/error?code=8 for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");return t};const Ou=Or;var nt=Ou,E={};let zs={},js={},xn={},hn={},hi={},It={},Bi={},gi={},Cn={},Nn={},ut={},zi={},ji={},Ks={},Ws={},Hs={},Us={},Ys={},Js={},ar={},Gs={},Vs={},qs={},Xs={},Zs={},Qs={},el={},tl={},nl={},Ki={},Wi={},rl={},il={},ol={};function D(t){throw Error(`Minified Lexical error #${t}; visit https://lexical.dev/docs/error?code=${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let Yt=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",$u=Yt&&"documentMode"in document?document.documentMode:null,Be=Yt&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),yt=Yt&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Ru=Yt&&"InputEvent"in window&&!$u?"getTargetRanges"in new window.InputEvent("input"):!1,$r=Yt&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Rr=Yt&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Ar=$r||Rr?"\xA0":"\u200B",Au=yt?"\xA0":Ar,Mu=/^[^A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]/,Du=/^[^\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]*[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]/,pt={bold:1,code:16,italic:2,strikethrough:4,subscript:32,superscript:64,underline:8},Iu={directionless:1,unmergeable:2},wo={center:2,justify:4,left:1,right:3},Pu={2:"center",4:"justify",1:"left",3:"right"},bu={inert:3,normal:0,segmented:2,token:1},Lu={3:"inert",0:"normal",2:"segmented",1:"token"},pi=!1,Hi=0;function Fu(t){Hi=t.timeStamp}function Gr(t,e,n){return e.__lexicalLineBreak===t||t[`__lexicalKey_${n._key}`]!==void 0}function Bu(t){return t.getEditorState().read(()=>{let e=oe();return e!==null?e.clone():null})}function sl(t,e,n){pi=!0;let r=100<performance.now()-Hi;try{Ze(t,()=>{let i=oe()||Bu(t);var o=new Map,s=t.getRootElement(),l=t._editorState;let a=!1,u="";for(var c=0;c<e.length;c++){var d=e[c],h=d.type,g=d.target,f=Dr(g,l);if(!we(f)){if(h==="characterData"){if(d=r&&M(f))e:{d=i,h=g;var y=f;if(W(d)){var x=d.anchor.getNode();if(x.is(y)&&d.format!==x.getFormat()){d=!1;break e}}d=h.nodeType===3&&y.isAttached()}d&&(y=window.getSelection(),h=d=null,y!==null&&y.anchorNode===g&&(d=y.anchorOffset,h=y.focusOffset),g=g.nodeValue,g!==null&&Yi(f,g,d,h,!1))}else if(h==="childList"){for(a=!0,h=d.addedNodes,y=0;y<h.length;y++){x=h[y];var k=fl(x),T=x.parentNode;T==null||k!==null||x.nodeName==="BR"&&Gr(x,T,t)||(yt&&(k=x.innerText||x.nodeValue)&&(u+=k),T.removeChild(x))}if(d=d.removedNodes,h=d.length,0<h){for(y=0,x=0;x<h;x++)T=d[x],T.nodeName==="BR"&&Gr(T,g,t)&&(g.appendChild(T),y++);h!==y&&(g===s&&(f=l._nodeMap.get("root")),o.set(g,f))}}}}if(0<o.size)for(let[I,L]of o)if(w(L))for(o=L.__children,s=I.firstChild,l=0;l<o.length;l++)c=t.getElementByKey(o[l]),c!==null&&(s==null?(I.appendChild(c),s=c):s!==c&&I.replaceChild(c,s),s=s.nextSibling);else M(L)&&L.markDirty();if(o=n.takeRecords(),0<o.length){for(s=0;s<o.length;s++)for(c=o[s],l=c.addedNodes,c=c.target,f=0;f<l.length;f++)g=l[f],d=g.parentNode,d==null||g.nodeName!=="BR"||Gr(g,c,t)||d.removeChild(g);n.takeRecords()}i!==null&&(a&&(i.dirty=!0,Dn(i)),yt&&yl()&&i.insertRawText(u))})}finally{pi=!1}}function ll(t){let e=t._observer;if(e!==null){let n=e.takeRecords();sl(t,n,e)}}function al(t){Hi===0&&window.addEventListener("textInput",Fu,!0),t._observer=new MutationObserver((e,n)=>{sl(t,e,n)})}let zu=1,ju=typeof queueMicrotask=="function"?queueMicrotask:t=>{Promise.resolve().then(t)};function Mr(t,e,n){let r=t.getRootElement();try{var i;if(i=r!==null&&r.contains(e)&&r.contains(n)&&e!==null){let o=document.activeElement,s=o!==null?o.nodeName:null;i=!we(Dr(e))||s!=="INPUT"&&s!=="TEXTAREA"}return i&&ul(e)===t}catch{return!1}}function ul(t){for(;t!=null;){let e=t.__lexicalEditor;if(e!=null&&!e.isReadOnly())return e;t=t.parentNode}return null}function mi(t){return ct(t)||t.isSegmented()}function ct(t){return t.isToken()||t.isInert()}function ur(t){for(;t!=null;){if(t.nodeType===3)return t;t=t.firstChild}return null}function cl(t,e,n){return e=pt[e],t&e&&(n===null||(n&e)===0)?t^e:n===null||n&e?t|e:t}function dl(t){return M(t)||$n(t)||we(t)}function er(t){var e=t.getParent();if(e!==null){e=e.getWritable().__children;let n=e.indexOf(t.__key);n===-1&&D(31),Pt(t),e.splice(n,1)}}function Kt(t){99<wn&&D(14);var e=t.getLatest(),n=e.__parent,r=tt();let i=te(),o=r._nodeMap;if(r=i._dirtyElements,n!==null)e:for(;n!==null;){if(r.has(n))break e;let s=o.get(n);if(s===void 0)break;r.set(n,!1),n=s.__parent}e=e.__key,i._dirtyType=1,w(t)?r.set(e,!0):i._dirtyLeaves.add(e)}function Pt(t){let e=t.getPreviousSibling();t=t.getNextSibling(),e!==null&&Kt(e),t!==null&&Kt(t)}function Ae(t){Z();var e=te();let n=e._compositionKey;t!==n&&(e._compositionKey=t,n!==null&&(e=ie(n),e!==null&&e.getWritable()),t!==null&&(t=ie(t),t!==null&&t.getWritable()))}function ie(t,e){return t=(e||tt())._nodeMap.get(t),t===void 0?null:t}function fl(t,e){let n=te();return t=t[`__lexicalKey_${n._key}`],t!==void 0?ie(t,e):null}function Dr(t,e){for(;t!=null;){let n=fl(t,e);if(n!==null)return n;t=t.parentNode}return null}function hl(t){let e=Object.assign({},t._decorators);return t._pendingDecorators=e}function Oo(t){return t.read(()=>Tt().getTextContent())}function Ku(t,e){Ze(t,()=>{var n=tt();if(!n.isEmpty())if(e==="root")Tt().markDirty();else{n=n._nodeMap;for(let[,r]of n)r.markDirty()}},t._pendingEditorState===null?{tag:"history-merge"}:void 0)}function Tt(){return tt()._nodeMap.get("root")}function Dn(t){let e=tt();t!==null&&(t.dirty=!0,t._cachedNodes=null),e._selection=t}function Mt(t){var e=te(),n;e:{for(n=t;n!=null;){let r=n[`__lexicalKey_${e._key}`];if(r!==void 0){n=r;break e}n=n.parentNode}n=null}return n===null?(e=e.getRootElement(),t===e?ie("root"):null):ie(n)}function Ui(t){let e=[];for(;t!==null;)e.push(t),t=t._parentEditor;return e}function gl(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function pl(t,e,n){if(t=window.getSelection(),t!==null){var r=t.anchorNode,{anchorOffset:i,focusOffset:o}=t;if(r!==null&&r.nodeType===3&&(t=Dr(r),M(t))){if(r=r.nodeValue,r===Ar&&n){let s=n.length;r=n,o=i=s}r!==null&&Yi(t,r,i,o,e)}}}function Yi(t,e,n,r,i){let o=t;if(o.isAttached()&&(i||!o.isDirty())){var s=o.isComposing();if(t=e,(s||i)&&e[e.length-1]===Ar&&(t=e.slice(0,-1)),e=o.getTextContent(),i||t!==e)if(t==="")if(Ae(null),$r||Rr)o.remove();else{let l=te();setTimeout(()=>{l.update(()=>{o.isAttached()&&o.remove()})},20)}else i=o.getParent(),e=Lr(),ct(o)||te()._compositionKey!==null&&!s||i!==null&&W(e)&&!i.canInsertTextBefore()&&e.anchor.offset===0?o.markDirty():(s=oe(),W(s)&&n!==null&&r!==null&&(s.setTextNodeRange(o,n,o,r),o.isSegmented()&&(n=o.getTextContent(),n=be(n),o.replace(n),o=n)),o.setTextContent(t))}}function ml(t,e){var n=t.anchor,r=t.focus,i=n.getNode(),o=window.getSelection();o=o!==null?o.anchorNode:null;let s=n.key,l=te().getElementByKey(s);return e=e.length,(n=s!==r.key||!M(i)||2>e&&n.offset!==r.offset&&!i.isComposing()||mi(i)||i.isDirty()&&1<e||l!==null&&!i.isComposing()&&o!==ur(l)||i.getFormat()!==t.format)||(i.isSegmented()?n=!0:t.isCollapsed()?(t=t.anchor.offset,n=i.getParentOrThrow(),r=i.isToken(),(e=t===0)&&!(e=!i.canInsertTextBefore()||!n.canInsertTextBefore()||r)&&(e=i.getPreviousSibling(),e=(M(e)||w(e)&&e.isInline())&&!e.canInsertTextAfter()),i=i.getTextContentSize()===t&&(!i.canInsertTextBefore()||!n.canInsertTextBefore()||r),n=e||i):n=!1),n}function tr(t,e){var n=t[e];return typeof n=="string"?(n=n.split(" "),t[e]=n):n}function Ji(t,e,n,r,i){n.size!==0&&(n=r.__key,e=e.get(r.__type),e===void 0&&D(33),e=e.klass,r=t.get(e),r===void 0&&(r=new Map,t.set(e,r)),r.has(n)||r.set(n,i))}function $o(t,e,n){let r=t.getParent(),i=n;return r!==null&&(e&&n===0?(i=t.getIndexWithinParent(),t=r):e||n!==t.getChildrenSize()||(i=t.getIndexWithinParent()+1,t=r)),t.getChildAtIndex(e?i-1:i)}function _l(t,e){var n=t.offset;return t.type==="element"?(t=t.getNode(),$o(t,e,n)):(t=t.getNode(),e&&n===0||!e&&n===t.getTextContentSize()?(n=e?t.getPreviousSibling():t.getNextSibling(),n===null?$o(t.getParentOrThrow(),e,t.getIndexWithinParent()+(e?0:1)):n):null)}function yl(){var t=window.event;return t=t&&t.inputType,t==="insertFromPaste"||t==="insertFromPasteAsQuotation"}function _i(t){return!De(t)&&!t.isLastChild()&&!t.isInline()}function cr(t,e){return t=t._keyToDOMMap.get(e),t===void 0&&D(34),t}function vl(t,e,n,r,i){t=t.__children;let o=t.length;for(let s=0;s<o;s++){let l=t[s],a=r.get(l);a!==void 0&&a.__parent===e&&(w(a)&&vl(a,l,n,r,i),n.has(l)||i.delete(l),r.delete(l))}}function Wu(t,e,n,r){t=t._nodeMap,e=e._nodeMap;for(let i of n){let o=e.get(i);o===void 0||o.isAttached()||(t.has(i)||n.delete(i),e.delete(i))}for(let[i]of r)n=e.get(i),n===void 0||n.isAttached()||(w(n)&&vl(n,i,t,e,r),t.has(i)||r.delete(i),e.delete(i))}function Ro(t,e){let n=t.__mode,r=t.__format;t=t.__style;let i=e.__mode,o=e.__format;return e=e.__style,(n===null||n===i)&&(r===null||r===o)&&(t===null||t===e)}function Ao(t,e){let n=t.mergeWithSibling(e),r=te()._normalizedNodes;return r.add(t.__key),r.add(e.__key),n}function xl(t){if(t.__text===""&&t.isSimpleText()&&!t.isUnmergeable())t.remove();else{for(var e;(e=t.getPreviousSibling())!==null&&M(e)&&e.isSimpleText()&&!e.isUnmergeable();)if(e.__text==="")e.remove();else{Ro(e,t)&&(t=Ao(e,t));break}for(var n;(n=t.getNextSibling())!==null&&M(n)&&n.isSimpleText()&&!n.isUnmergeable();)if(n.__text==="")n.remove();else{Ro(t,n)&&Ao(t,n);break}}}let he="",Le="",Qe="",vt,Fe,Sn,Cl=!1,Gi=!1,Ir,nr=null,yi,vi,Tn,Wt,xi,En;function rr(t,e){let n=Tn.get(t);if(e!==null){let r=Si(t);e.removeChild(r)}Wt.has(t)||Fe._keyToDOMMap.delete(t),w(n)&&(t=n.__children,Ci(t,0,t.length-1,null)),n!==void 0&&Ji(En,Sn,Ir,n,"destroyed")}function Ci(t,e,n,r){for(;e<=n;++e){let i=t[e];i!==void 0&&rr(i,r)}}function rn(t,e){t.setProperty("text-align",e)}function Nl(t,e){t.style.setProperty("padding-inline-start",e===0?"":20*e+"px")}function Sl(t,e){t=t.style,e===0?rn(t,""):e===1?rn(t,"left"):e===2?rn(t,"center"):e===3?rn(t,"right"):e===4&&rn(t,"justify")}function ir(t,e,n){let r=Wt.get(t);r===void 0&&D(60);let i=r.createDOM(vt,Fe);var o=Fe._keyToDOMMap;if(i["__lexicalKey_"+Fe._key]=t,o.set(t,i),M(r)?i.setAttribute("data-lexical-text","true"):we(r)&&i.setAttribute("data-lexical-decorator","true"),w(r)){t=r.__indent,t!==0&&Nl(i,t),t=r.__children;var s=t.length;if(s!==0){o=t,--s;let l=Le;Le="",Ni(o,0,s,i,null),El(r,i),Le=l}o=r.__format,o!==0&&Sl(i,o),Tl(null,t,i),_i(r)&&(he+=`

`,Qe+=`

`)}else o=r.getTextContent(),we(r)?(s=r.decorate(Fe,vt),s!==null&&kl(t,s),i.contentEditable="false"):M(r)&&(r.isDirectionless()||(Le+=o),r.isInert()&&(t=i.style,t.pointerEvents="none",t.userSelect="none",i.contentEditable="false",t.setProperty("-webkit-user-select","none"))),he+=o,Qe+=o;return e!==null&&(n!=null?e.insertBefore(i,n):(n=e.__lexicalLineBreak,n!=null?e.insertBefore(i,n):e.appendChild(i))),Ji(En,Sn,Ir,r,"created"),i}function Ni(t,e,n,r,i){let o=he;for(he="";e<=n;++e)ir(t[e],r,i);r.__lexicalTextContent=he,he=o+he}function Mo(t,e){return t=e.get(t[t.length-1]),$n(t)||we(t)}function Tl(t,e,n){t=t!==null&&(t.length===0||Mo(t,Tn)),e=e!==null&&(e.length===0||Mo(e,Wt)),t?e||(e=n.__lexicalLineBreak,e!=null&&n.removeChild(e),n.__lexicalLineBreak=null):e&&(e=document.createElement("br"),n.__lexicalLineBreak=e,n.appendChild(e))}function El(t,e){var n=e.__lexicalDir;if(e.__lexicalDirTextContent!==Le||n!==nr){let o=Le==="";if(o)var r=nr;else r=Le,r=Mu.test(r)?"rtl":Du.test(r)?"ltr":null;if(r!==n){let s=e.classList,l=vt.theme;var i=n!==null?l[n]:void 0;let a=r!==null?l[r]:void 0;i!==void 0&&(typeof i=="string"&&(i=i.split(" "),i=l[n]=i),s.remove(...i)),r===null||o&&r==="ltr"?e.removeAttribute("dir"):(a!==void 0&&(typeof a=="string"&&(n=a.split(" "),a=l[r]=n),a!==void 0&&s.add(...a)),e.dir=r),Gi||(t.getWritable().__dir=r)}nr=r,e.__lexicalDirTextContent=Le,e.__lexicalDir=r}}function cn(t,e){var n=Tn.get(t),r=Wt.get(t);n!==void 0&&r!==void 0||D(61);var i=Cl||vi.has(t)||yi.has(t);let o=cr(Fe,t);if(n===r&&!i)return w(n)?(r=o.__lexicalTextContent,r!==void 0&&(he+=r,Qe+=r),r=o.__lexicalDirTextContent,r!==void 0&&(Le+=r)):(r=n.getTextContent(),M(n)&&!n.isDirectionless()&&(Le+=r),Qe+=r,he+=r),o;if(n!==r&&i&&Ji(En,Sn,Ir,r,"updated"),r.updateDOM(n,o,vt))return r=ir(t,null,null),e===null&&D(62),e.replaceChild(r,o),rr(t,null),r;if(w(n)&&w(r)){if(t=r.__indent,t!==n.__indent&&Nl(o,t),t=r.__format,t!==n.__format&&Sl(o,t),t=n.__children,n=r.__children,t!==n||i){var s=t,l=n;i=r,e=Le,Le="";let g=he;he="";var a=s.length,u=l.length;if(a===1&&u===1){var c=s[0];if(l=l[0],c===l)cn(c,o);else{var d=Si(c);l=ir(l,null,null),o.replaceChild(l,d),rr(c,null)}}else if(a===0)u!==0&&Ni(l,0,u-1,o,null);else if(u===0)a!==0&&(c=o.__lexicalLineBreak==null,Ci(s,0,a-1,c?null:o),c&&(o.textContent=""));else{let f=a-1;a=u-1;let y=o.firstChild,x=0;for(u=0;x<=f&&u<=a;){var h=s[x];let k=l[u];if(h===k)y=cn(k,o).nextSibling,x++,u++;else{c===void 0&&(c=new Set(s)),d===void 0&&(d=new Set(l));let T=d.has(h),I=c.has(k);T?(I?(h=cr(Fe,k),h===y?y=cn(k,o).nextSibling:(y!=null?o.insertBefore(h,y):o.appendChild(h),cn(k,o)),x++):ir(k,o,y),u++):(y=Si(h).nextSibling,rr(h,o),x++)}}c=x>f,d=u>a,c&&!d?(c=l[a+1],c=c===void 0?null:Fe.getElementByKey(c),Ni(l,u,a,o,c)):d&&!c&&Ci(s,x,f,o)}_i(i)&&(he+=`

`),o.__lexicalTextContent=he,he=g+he,El(i,o),Le=e,De(r)||Tl(t,n,o)}_i(r)&&(he+=`

`,Qe+=`

`)}else n=r.getTextContent(),we(r)?(i=r.decorate(Fe,vt),i!==null&&kl(t,i),he+=n,Qe+=n):M(r)&&!r.isDirectionless()&&(Le+=n),he+=n,Qe+=n;return!Gi&&De(r)&&r.__cachedText!==Qe&&(r=r.getWritable(),r.__cachedText=Qe),o}function kl(t,e){let n=Fe._pendingDecorators,r=Fe._decorators;if(n===null){if(r[t]===e)return;n=hl(Fe)}n[t]=e}function Si(t){return t=xi.get(t),t===void 0&&D(34),t}let it=Object.freeze({}),Ti=[["keydown",Xu],["compositionstart",Vu],["compositionend",qu],["input",Gu],["click",Hu],["cut",it],["copy",it],["dragstart",it],["dragover",it],["dragend",it],["paste",it],["focus",it],["blur",it],["drop",it]];Ru&&Ti.push(["beforeinput",(t,e)=>Ju(t,e)]);let kn=0,wl=0,gn=0,Ei=!1,pn=!1,dn=!1,Ol=[0,0,"root",0];function Do(t,e){return t!==null&&t.nodeValue!==null&&t.nodeType===3&&e!==0&&e!==t.nodeValue.length}function Io(t,e,n){let{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}=t;Ei&&(Ei=!1,Do(r,i)&&Do(o,s))||Ze(e,()=>{if(!n)Dn(null);else if(Mr(e,r,o)){var l=oe();if(W(l)){var a=l.anchor,u=a.getNode();if(l.isCollapsed()){t.type==="Range"&&(l.dirty=!0);var c=window.event;c=c?c.timeStamp:performance.now();let[d,h,g,f]=Ol;c<f+200&&a.offset===h&&a.key===g?l.format=d:a.type==="text"?l.format=u.getFormat():a.type==="element"&&(l.format=0)}else{a=127,u=l.getNodes(),c=u.length;for(let d=0;d<c;d++){let h=u[d];if(M(h)&&(a&=h.getFormat(),a===0))break}l.format=a}}R(e,zs,void 0)}})}function Hu(t,e){Ze(e,()=>{var n=oe(),r=window.getSelection();let i=Lr();if(W(n)){var o=n.anchor;let s=o.getNode();r&&o.type==="element"&&o.offset===0&&n.isCollapsed()&&!De(s)&&Tt().getChildrenSize()===1&&s.getTopLevelElementOrThrow().isEmpty()&&i!==null&&n.is(i)&&(r.removeAllRanges(),n.dirty=!0)}else r&&Gt(n)&&r.isCollapsed&&(n=r.anchorNode,o=[1,3],n!==null&&o.includes(n.nodeType)&&(r=Il(i,r,e),Dn(r)));R(e,js,t)})}function Uu(t,e){e.getTargetRanges&&(e=e.getTargetRanges()[0])&&t.applyDOMRange(e)}function Yu(t,e){return t!==e||w(t)||w(e)||!ct(t)||!ct(e)}function Ju(t,e){let n=t.inputType;n==="deleteCompositionText"||yt&&yl()||n!=="insertCompositionText"&&Ze(e,()=>{let r=oe();if(n==="deleteContentBackward"){if(r===null){var i=Lr();if(!W(i))return;Dn(i.clone())}if(W(r)){wl===229&&t.timeStamp<kn+30&&r.anchor.key===r.focus.key?(Ae(null),kn=0,setTimeout(()=>{Ze(e,()=>{Ae(null)})},30),W(r)&&(i=r.anchor.getNode(),i.markDirty(),r.format=i.getFormat())):(t.preventDefault(),R(e,xn,!1));return}}if(W(r)){i=t.data,r.dirty||!r.isCollapsed()||De(r.anchor.getNode())||Uu(r,t);var o=r.focus,s=r.anchor.getNode();if(o=o.getNode(),n==="insertText")i===`
`?(t.preventDefault(),R(e,hn,!1)):i===`

`?(t.preventDefault(),R(e,hi,void 0)):i==null&&t.dataTransfer?(i=t.dataTransfer.getData("text/plain"),t.preventDefault(),r.insertRawText(i)):i!=null&&ml(r,i)&&(t.preventDefault(),R(e,It,i));else switch(t.preventDefault(),n){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":R(e,It,t);break;case"insertFromComposition":Ae(null),R(e,It,t);break;case"insertLineBreak":Ae(null),R(e,hn,!1);break;case"insertParagraph":Ae(null),pn?(pn=!1,R(e,hn,!1)):R(e,hi,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":R(e,Bi,t);break;case"deleteByComposition":Yu(s,o)&&R(e,gi,void 0);break;case"deleteByDrag":case"deleteByCut":R(e,gi,void 0);break;case"deleteContent":R(e,xn,!1);break;case"deleteWordBackward":R(e,Cn,!0);break;case"deleteWordForward":R(e,Cn,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":R(e,Nn,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":R(e,Nn,!1);break;case"formatStrikeThrough":R(e,ut,"strikethrough");break;case"formatBold":R(e,ut,"bold");break;case"formatItalic":R(e,ut,"italic");break;case"formatUnderline":R(e,ut,"underline");break;case"historyUndo":R(e,zi,void 0);break;case"historyRedo":R(e,ji,void 0)}}})}function Gu(t,e){t.stopPropagation(),Ze(e,()=>{var n=oe(),r=t.data;r!=null&&W(n)&&ml(n,r)?(dn&&(ki(e,r),dn=!1),R(e,It,r),r=r.length,yt&&1<r&&t.inputType==="insertCompositionText"&&!e.isComposing()&&(n.anchor.offset-=r),$r||Rr||!e.isComposing()||(kn=0,Ae(null))):(pl(e,!1),dn&&(ki(e,r||void 0),dn=!1)),Z(),n=te(),ll(n)})}function Vu(t,e){Ze(e,()=>{let n=oe();if(W(n)&&!e.isComposing()){let r=n.anchor;Ae(r.key),(t.timeStamp<kn+30||r.type==="element"||!n.isCollapsed()||n.anchor.getNode().getFormat()!==n.format)&&R(e,It,Au)}})}function ki(t,e){var n=t._compositionKey;if(Ae(null),n!==null&&e!=null){if(e===""){e=ie(n),t=ur(t.getElementByKey(n)),t!==null&&t.nodeValue!==null&&M(e)&&Yi(e,t.nodeValue,null,null,!0);return}if(e[e.length-1]===`
`&&(n=oe(),W(n))){e=n.focus,n.anchor.set(e.key,e.offset,e.type),R(t,ar,null);return}}pl(t,!0,e)}function qu(t,e){yt?dn=!0:Ze(e,()=>{ki(e,t.data)})}function Xu(t,e){if(kn=t.timeStamp,wl=t.keyCode,!e.isComposing()){var{keyCode:n,shiftKey:r,ctrlKey:i,metaKey:o,altKey:s}=t;if(n!==39||i||o||s)if(n!==39||s||r||!i&&!o)if(n!==37||i||o||s)if(n!==37||s||r||!i&&!o)if(n!==38||i||o)if(n!==40||i||o)if(n===13&&r)pn=!0,R(e,ar,t);else if(n===32)R(e,Gs,t);else if(Be&&i&&n===79)t.preventDefault(),pn=!0,R(e,hn,!0);else if(n!==13||r){var l=Be?s||o?!1:n===8||n===72&&i:i||s||o?!1:n===8;l?n===8?R(e,Vs,t):(t.preventDefault(),R(e,xn,!0)):n===27?R(e,qs,t):(l=Be?r||s||o?!1:n===46||n===68&&i:i||s||o?!1:n===46,l?n===46?R(e,Xs,t):(t.preventDefault(),R(e,xn,!1)):n===8&&(Be?s:i)?(t.preventDefault(),R(e,Cn,!0)):n===46&&(Be?s:i)?(t.preventDefault(),R(e,Cn,!1)):Be&&o&&n===8?(t.preventDefault(),R(e,Nn,!0)):Be&&o&&n===46?(t.preventDefault(),R(e,Nn,!1)):n===66&&!s&&(Be?o:i)?(t.preventDefault(),R(e,ut,"bold")):n===85&&!s&&(Be?o:i)?(t.preventDefault(),R(e,ut,"underline")):n===73&&!s&&(Be?o:i)?(t.preventDefault(),R(e,ut,"italic")):n!==9||s||i||o?n===90&&!r&&(Be?o:i)?(t.preventDefault(),R(e,zi,void 0)):(l=Be?n===90&&o&&r:n===89&&i||n===90&&i&&r,l?(t.preventDefault(),R(e,ji,void 0)):Gt(e._editorState._selection)&&(l=r?!1:n===67?Be?o:i:!1,l?(t.preventDefault(),R(e,Ki,t)):(l=r?!1:n===88?Be?o:i:!1,l&&(t.preventDefault(),R(e,Wi,t))))):R(e,Zs,t))}else pn=!1,R(e,ar,t);else R(e,Js,t);else R(e,Ys,t);else R(e,Us,t);else R(e,Hs,t);else R(e,Ws,t);else R(e,Ks,t);(i||r||s||o)&&R(e,ol,t)}}function $l(t){let e=t.__lexicalEventHandles;return e===void 0&&(e=[],t.__lexicalEventHandles=e),e}let bt=new Map;function Rl(){let t=window.getSelection();if(t){var e=ul(t.anchorNode);if(e!==null){var n=Ui(e);n=n[n.length-1];var r=n._key,i=bt.get(r),o=i||n;o!==e&&Io(t,o,!1),Io(t,e,!0),e!==n?bt.set(r,e):i&&bt.delete(r)}}}function Zu(t,e){gn===0&&t.ownerDocument.addEventListener("selectionchange",Rl),gn++,t.__lexicalEditor=e;let n=$l(t);for(let r=0;r<Ti.length;r++){let[i,o]=Ti[r],s=typeof o=="function"?l=>{e.isReadOnly()||o(l,e)}:l=>{if(!e.isReadOnly())switch(i){case"cut":return R(e,Wi,l);case"copy":return R(e,Ki,l);case"paste":return R(e,Bi,l);case"dragstart":return R(e,el,l);case"dragover":return R(e,tl,l);case"dragend":return R(e,nl,l);case"focus":return R(e,rl,l);case"blur":return R(e,il,l);case"drop":return R(e,Qs,l)}};t.addEventListener(i,s),n.push(()=>{t.removeEventListener(i,s)})}}class et{constructor(e,n,r){this._selection=null,this.key=e,this.offset=n,this.type=r}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){let n=this.getNode(),r=e.getNode(),i=this.offset;if(e=e.offset,w(n)){var o=n.getDescendantByIndex(i);n=o!=null?o:n}return w(r)&&(o=r.getDescendantByIndex(e),r=o!=null?o:r),n===r?i<e:n.isBefore(r)}getNode(){let e=ie(this.key);return e===null&&D(20),e}set(e,n,r){let i=this._selection,o=this.key;this.key=e,this.offset=n,this.type=r,ye||(te()._compositionKey===o&&Ae(e),i!==null&&(i._cachedNodes=null,i.dirty=!0))}}function Vr(t,e){let n=e.__key,r=t.offset,i="element";if(M(e))i="text",e=e.getTextContentSize(),r>e&&(r=e);else if(!w(e)){var o=e.getNextSibling();M(o)?(n=o.__key,r=0):(o=e.getParent())&&(n=o.__key,r=e.getIndexWithinParent()+1)}t.set(n,r,i)}function Po(t,e){if(w(e)){let n=e.getLastDescendant();w(n)||M(n)?Vr(t,n):Vr(t,e)}else Vr(t,e)}function bo(t,e,n){let r=t.getNode(),i=r.getChildAtIndex(t.offset),o=be(),s=De(r)?Ht().append(o):o;o.setFormat(n),i===null?r.append(s):i.insertBefore(s),t.is(e)&&e.set(o.__key,0,"text"),t.set(o.__key,0,"text")}function at(t,e,n,r){t.key=e,t.offset=n,t.type=r}class Pr{constructor(e){this.dirty=!1,this._nodes=e,this._cachedNodes=null}is(e){if(!Gt(e))return!1;let n=this._nodes,r=e._nodes;return n.size===r.size&&Array.from(n).every(i=>r.has(i))}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new Pr(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(){}insertText(){}getNodes(){var e=this._cachedNodes;if(e!==null)return e;var n=this._nodes;e=[];for(let r of n)n=ie(r),n!==null&&e.push(n);return ye||(this._cachedNodes=e),e}getTextContent(){let e=this.getNodes(),n="";for(let r=0;r<e.length;r++)n+=e[r].getTextContent();return n}}function W(t){return t instanceof Jt}class br{constructor(e,n,r){this.gridKey=e,this.anchor=n,this.focus=r,this.dirty=!1,this._cachedNodes=null,n._selection=this,r._selection=this}is(e){return Vi(e)?this.gridKey===e.gridKey&&this.anchor.is(this.focus):!1}set(e,n,r){this.dirty=!0,this.gridKey=e,this.anchor.key=n,this.focus.key=r,this._cachedNodes=null}clone(){return new br(this.gridKey,this.anchor,this.focus)}isCollapsed(){return!1}isBackward(){return this.focus.isBefore(this.anchor)}getCharacterOffsets(){return or(this)}extract(){return this.getNodes()}insertRawText(){}insertText(){}getShape(){var e=ie(this.anchor.key);e===null&&D(21);var n=e.getIndexWithinParent();e=e.getParentOrThrow().getIndexWithinParent();var r=ie(this.focus.key);r===null&&D(22);var i=r.getIndexWithinParent();let o=r.getParentOrThrow().getIndexWithinParent();return r=Math.min(n,i),n=Math.max(n,i),i=Math.min(e,o),e=Math.max(e,o),{fromX:Math.min(r,n),fromY:Math.min(i,e),toX:Math.max(r,n),toY:Math.max(i,e)}}getNodes(){var e=this._cachedNodes;if(e!==null)return e;e=new Set;let{fromX:n,fromY:r,toX:i,toY:o}=this.getShape();var s=ie(this.gridKey);Kl(s)||D(23),e.add(s),s=s.getChildren();for(let u=r;u<=o;u++){var l=s[u];e.add(l),Hl(l)||D(24),l=l.getChildren();for(let c=n;c<=i;c++){var a=l[c];for(zl(a)||D(25),e.add(a),a=a.getChildren();0<a.length;){let d=a.shift();e.add(d),w(d)&&a.unshift(...d.getChildren())}}}return e=Array.from(e),ye||(this._cachedNodes=e),e}getTextContent(){let e=this.getNodes(),n="";for(let r=0;r<e.length;r++)n+=e[r].getTextContent();return n}}function Vi(t){return t instanceof br}class Jt{constructor(e,n,r){this.anchor=e,this.focus=n,this.dirty=!1,this.format=r,this._cachedNodes=null,e._selection=this,n._selection=this}is(e){return W(e)?this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format:!1}isBackward(){return this.focus.isBefore(this.anchor)}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){var e=this._cachedNodes;if(e!==null)return e;var n=this.anchor,r=this.focus;e=n.getNode();let i=r.getNode();return w(e)&&(n=e.getDescendantByIndex(n.offset),e=n!=null?n:e),w(i)&&(r=i.getDescendantByIndex(r.offset),i=r!=null?r:i),e=e.is(i)?w(e)&&(0<e.getChildrenSize()||e.excludeFromCopy())?[]:[e]:e.getNodesBetween(i),ye||(this._cachedNodes=e),e}setTextNodeRange(e,n,r,i){at(this.anchor,e.__key,n,"text"),at(this.focus,r.__key,i,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){let e=this.getNodes();if(e.length===0)return"";let n=e[0],r=e[e.length-1],i=this.anchor.isBefore(this.focus),[o,s]=or(this),l="",a=!0;for(let u=0;u<e.length;u++){let c=e[u];if(w(c)&&!c.isInline())a||(l+=`
`),a=!c.isEmpty();else if(a=!1,M(c)){let d=c.getTextContent();c===n?d=c===r?o<s?d.slice(o,s):d.slice(s,o):i?d.slice(o):d.slice(s):c===r&&(d=i?d.slice(0,s):d.slice(0,o)),l+=d}else!we(c)&&!$n(c)||c===r&&this.isCollapsed()||(l+=c.getTextContent())}return l}applyDOMRange(e){let n=te(),r=n.getEditorState()._selection;if(e=Ml(e.startContainer,e.startOffset,e.endContainer,e.endOffset,n,r),e!==null){var[i,o]=e;at(this.anchor,i.key,i.offset,i.type),at(this.focus,o.key,o.offset,o.type),this._cachedNodes=null}}clone(){let e=this.anchor,n=this.focus;return new Jt(new et(e.key,e.offset,e.type),new et(n.key,n.offset,n.type),this.format)}toggleFormat(e){this.format=cl(this.format,e,null),this.dirty=!0}hasFormat(e){return(this.format&pt[e])!==0}insertRawText(e){let n=e.split(/\r?\n/);if(n.length===1)this.insertText(e);else{e=[];let r=n.length;for(let i=0;i<r;i++){let o=n[i];o!==""&&e.push(be(o)),i!==r-1&&e.push(On())}this.insertNodes(e)}}insertText(e){var n=this.anchor,r=this.focus,i=this.isCollapsed()||n.isBefore(r),o=this.format;i&&n.type==="element"?bo(n,r,o):i||r.type!=="element"||bo(r,n,o);var s=this.getNodes(),l=s.length,a=i?r:n;r=(i?n:r).offset;var u=a.offset;n=s[0],M(n)||D(26),i=n.getTextContent().length;var c=n.getParentOrThrow(),d=s[l-1];if(this.isCollapsed()&&r===i&&(n.isSegmented()||n.isToken()||!n.canInsertTextAfter()||!c.canInsertTextAfter()&&n.getNextSibling()===null)){var h=n.getNextSibling();if((!M(h)||mi(h))&&(h=be(),h.setFormat(o),c.canInsertTextAfter()?n.insertAfter(h):c.insertAfter(h)),h.select(0,0),n=h,e!==""){this.insertText(e);return}}else if(this.isCollapsed()&&r===0&&(n.isSegmented()||n.isToken()||!n.canInsertTextBefore()||!c.canInsertTextBefore()&&n.getPreviousSibling()===null)){if(h=n.getPreviousSibling(),(!M(h)||mi(h))&&(h=be(),h.setFormat(o),c.canInsertTextBefore()?n.insertBefore(h):c.insertBefore(h)),h.select(),n=h,e!==""){this.insertText(e);return}}else if(n.isSegmented()&&r!==i)c=be(n.getTextContent()),c.setFormat(o),n.replace(c),n=c;else if(!(this.isCollapsed()||e===""||(h=d.getParent(),c.canInsertTextBefore()&&c.canInsertTextAfter()&&(!w(h)||h.canInsertTextBefore()&&h.canInsertTextAfter())))){this.insertText(""),Al(this.anchor,this.focus,null),this.insertText(e);return}if(l===1)if(ct(n))e=be(e),e.select(),n.replace(e);else{if(s=n.getFormat(),r===u&&s!==o)if(n.getTextContent()==="")n.setFormat(o);else{s=be(e),s.setFormat(o),s.select(),r===0?n.insertBefore(s):([l]=n.splitText(r),l.insertAfter(s)),s.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length);return}n=n.spliceText(r,u-r,e,!0),n.getTextContent()===""?n.remove():this.anchor.type==="text"&&(n.isComposing()?this.anchor.offset-=e.length:this.format=s)}else{o=new Set([...n.getParentKeys(),...d.getParentKeys()]);var g=w(n)?n:n.getParentOrThrow();if(c=w(d)?d:d.getParentOrThrow(),h=d,!g.is(c)&&c.isInline())do h=c,c=c.getParentOrThrow();while(c.isInline());a.type==="text"&&(u!==0||d.getTextContent()==="")||a.type==="element"&&d.getIndexWithinParent()<u?M(d)&&!ct(d)&&u!==d.getTextContentSize()?(d.isSegmented()&&(a=be(d.getTextContent()),d.replace(a),d=a),d=d.spliceText(0,u,""),o.add(d.__key)):(a=d.getParentOrThrow(),a.canBeEmpty()||a.getChildrenSize()!==1?d.remove():a.remove()):o.add(d.__key),a=c.getChildren(),u=new Set(s),d=g.is(c),g=g.isInline()&&n.getNextSibling()===null?g:n;for(let f=a.length-1;0<=f;f--){let y=a[f];if(y.is(n)||w(y)&&y.isParentOf(n))break;y.isAttached()&&(!u.has(y)||y.is(h)?d||g.insertAfter(y):y.remove())}if(!d)for(a=c,u=null;a!==null;)d=a.getChildren(),c=d.length,(c===0||d[c-1].is(u))&&(o.delete(a.__key),u=a),a=a.getParent();for(ct(n)?r===i?n.select():(e=be(e),e.select(),n.replace(e)):(n=n.spliceText(r,i-r,e,!0),n.getTextContent()===""?n.remove():n.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=e.length)),e=1;e<l;e++)n=s[e],o.has(n.__key)||n.remove()}}removeText(){this.insertText("")}formatText(e){var n=this.getNodes();let r=[];for(var i of n)M(i)&&r.push(i);var o=0;n=r.length-1,i=r[0];let s=r[n];if(this.isCollapsed())this.toggleFormat(e),Ae(null);else{var l=this.anchor,a=this.focus,u=l.offset,c=a.offset,d=i.getFormatFlags(e,null),h=i.getTextContent().length,g=l.isBefore(a),f=g?c:u;if(u=g?u:c,u===i.getTextContentSize()&&1<r.length&&(d=r[1],u=0,o=1,i=d,h=d.getTextContentSize(),d=d.getFormatFlags(e,null)),i.is(s))M(i)&&(l.type==="element"&&a.type==="element"?(i.setFormat(d),i.select(u,f),this.format=d):u!==f&&(u===0&&f===h?(i.setFormat(d),i.select(u,f)):(e=i.splitText(u,f),e=u===0?e[0]:e[1],e.setFormat(d),e.select(0,f-u)),this.format=d));else for(M(i)&&u!==h&&(u!==0&&([,i]=i.splitText(u)),i.setFormat(d)),l=d,M(s)&&(l=s.getFormatFlags(e,d),a=s.getTextContent().length,f!==0&&(f!==a&&([s]=s.splitText(f)),s.setFormat(l))),this.format=d|l,f=o+1;f<n;f++)d=r[f],o=d.__key,M(d)&&o!==i.__key&&o!==s.__key&&!d.isToken()&&(o=d.getFormatFlags(e,l),d.setFormat(o))}}insertNodes(e,n){this.isCollapsed()||this.removeText();var r=this.anchor,i=r.offset,o=r.getNode(),s=o;r.type==="element"&&(s=r.getNode(),r=s.getChildAtIndex(i-1),s=r===null?s:r),r=[];var l=o.getNextSiblings(),a=De(o)?null:o.getTopLevelElementOrThrow();if(M(o))if(s=o.getTextContent().length,i===0&&s!==0)s=o.getPreviousSibling(),s=s!==null?s:o.getParentOrThrow(),r.push(o);else if(i===s)s=o;else{if(ct(o))return!1;[s,o]=o.splitText(i),r.push(o)}o=s,r.push(...l),l=e[0];var u=!1,c=null;for(let g=0;g<e.length;g++){let f=e[g];if(w(f)&&!f.isInline()){if(f.is(l)){if(w(s)&&s.isEmpty()&&s.canReplaceWith(f)){s.replace(f),s=f,u=!0;continue}var d=f.getFirstDescendant();if(dl(d)){for(d=d.getParentOrThrow();d.isInline();)d=d.getParentOrThrow();if(c=d.getChildren(),u=c.length,w(s))for(var h=0;h<u;h++)s.append(c[h]);else{for(h=u-1;0<=h;h--)s.insertAfter(c[h]);s=s.getParentOrThrow()}if(c=c[u-1],d.remove(),u=!0,d.is(f))continue}}M(s)&&(a===null&&D(27),s=a)}else u&&!we(f)&&De(s.getParent())&&D(28);u=!1,w(s)&&!s.isInline()?(c=f,we(f)&&f.isTopLevel()?s=s.insertAfter(f):w(f)?(f.canBeEmpty()||!f.isEmpty())&&(De(s)?(d=s.getChildAtIndex(i),d!==null?d.insertBefore(f):s.append(f),s=f):s=s.insertAfter(f)):(d=s.getFirstChild(),d!==null?d.insertBefore(f):s.append(f),s=f)):!w(f)||w(f)&&f.isInline()||we(s)&&s.isTopLevel()||$n(s)?(c=f,s=s.insertAfter(f)):(s=f.getParentOrThrow(),g--)}if(n&&(M(o)?o.select():(e=s.getPreviousSibling(),M(e)?e.select():(e=s.getIndexWithinParent(),s.getParentOrThrow().select(e,e)))),w(s)){if(e=M(c)?c:s.getLastDescendant(),n||(e===null?s.select():M(e)?e.select():e.selectNext()),r.length!==0)for(n=s,e=r.length-1;0<=e;e--)i=r[e],a=i.getParentOrThrow(),w(s)&&!jo(i)?(n===s?s.append(i):s.insertBefore(i),s=i):w(s)||jo(i)?w(i)&&!i.canInsertAfter(s)?(o=a.constructor.clone(a),w(o)||D(29),o.append(i),s.insertAfter(o)):s.insertAfter(i):(s.insertBefore(i),s=i),a.isEmpty()&&!a.canBeEmpty()&&a.remove()}else n||(M(s)?s.select():(r=s.getParentOrThrow(),s=s.getIndexWithinParent()+1,r.select(s,s)));return!0}insertParagraph(){this.isCollapsed()||this.removeText();var e=this.anchor,n=e.offset,r=[];if(e.type==="text"){var i=e.getNode(),o=i.getNextSiblings().reverse(),s=i.getParentOrThrow(),l=s.isInline(),a=l?s.getTextContentSize():i.getTextContentSize();n===0?o.push(i):(l&&(r=s.getNextSiblings()),n===a||l&&n===i.getTextContentSize()||([,i]=i.splitText(n),o.push(i)))}else{if(s=e.getNode(),De(s)){o=Ht(),r=s.getChildAtIndex(n),o.select(),r!==null?r.insertBefore(o):s.append(o);return}o=s.getChildren().slice(n).reverse()}if(i=o.length,n===0&&0<i&&s.isInline()){if(r=s.getParentOrThrow(),o=r.insertNewAfter(this),w(o))for(r=r.getChildren(),s=0;s<r.length;s++)o.append(r[s])}else if(l=s.insertNewAfter(this),l===null)this.insertLineBreak();else if(w(l))if(a=s.getFirstChild(),n===0&&(s.is(e.getNode())||a&&a.is(e.getNode()))&&0<i)s.insertBefore(l);else{if(s=null,n=r.length,e=l.getParentOrThrow(),0<n)for(a=0;a<n;a++)e.append(r[a]);if(i!==0)for(r=0;r<i;r++)n=o[r],s===null?l.append(n):s.insertBefore(n),s=n;l.canBeEmpty()||l.getChildrenSize()!==0?l.selectStart():(l.selectPrevious(),l.remove())}}insertLineBreak(e){let n=On();var r=this.anchor;r.type==="element"&&(r=r.getNode(),De(r)&&this.insertParagraph()),e?this.insertNodes([n],!0):this.insertNodes([n])&&n.selectNext(0,0)}getCharacterOffsets(){return or(this)}extract(){var e=this.getNodes(),n=e.length,r=n-1,i=this.anchor;let o=this.focus;var s=e[0];let l=e[r],[a,u]=or(this);return n===0?[]:n===1?M(s)&&!this.isCollapsed()?(e=a>u?u:a,r=s.splitText(e,a>u?a:u),e=e===0?r[0]:r[1],e!=null?[e]:[]):[s]:(n=i.isBefore(o),M(s)&&(i=n?a:u,i===s.getTextContentSize()?e.shift():i!==0&&([,s]=s.splitText(i),e[0]=s)),M(l)&&(s=l.getTextContent().length,n=n?u:a,n===0?e.pop():n!==s&&([l]=l.splitText(n),e[r]=l)),e)}modify(e,n,r){var i=this.focus,o=this.anchor,s=e==="move",l=_l(i,n);we(l)&&!l.isIsolated()?(e=n?l.getPreviousSibling():l.getNextSibling(),M(e)?(l=e.__key,n=n?e.getTextContent().length:0,i.set(l,n,"text"),s&&o.set(l,n,"text")):(r=l.getParentOrThrow(),w(e)?(r=e.__key,l=n?e.getChildrenSize():0):(l=l.getIndexWithinParent(),r=r.__key,n||l++),i.set(r,l,"element"),s&&o.set(r,l,"element"))):(i=window.getSelection())&&(i.modify(e,n?"backward":"forward",r),0<i.rangeCount&&(n=i.getRangeAt(0),this.applyDOMRange(n),this.dirty=!0,s||i.anchorNode===n.startContainer&&i.anchorOffset===n.startOffset||(s=this.focus,n=this.anchor,i=n.key,o=n.offset,l=n.type,at(n,s.key,s.offset,s.type),at(s,i,o,l),this._cachedNodes=null)))}deleteCharacter(e){if(this.isCollapsed()){var n=this.anchor,r=this.focus,i=n.getNode();if(!e&&(n.type==="element"&&w(i)&&n.offset===i.getChildrenSize()||n.type==="text"&&n.offset===i.getTextContentSize())&&(i=i.getNextSibling()||i.getParentOrThrow().getNextSibling(),w(i)&&!i.canExtractContents()))return;if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&n.offset===0&&(n.type==="element"?n.getNode():n.getNode().getParentOrThrow()).collapseAtStart(this))return}else{var o=r.type==="text"?r.getNode():null;if(i=n.type==="text"?n.getNode():null,o!==null&&o.isSegmented()){if(n=r.offset,r=o.getTextContentSize(),o.is(i)||e&&n!==r||!e&&n!==0){Fo(o,e,n);return}}else if(i!==null&&i.isSegmented()&&(n=n.offset,r=i.getTextContentSize(),i.is(o)||e&&n!==0||!e&&n!==r)){Fo(i,e,n);return}if(i=this.anchor,o=this.focus,n=i.getNode(),r=o.getNode(),n===r&&i.type==="text"&&o.type==="text"){var s=i.offset,l=o.offset;let a=s<l;r=a?s:l,l=a?l:s,s=l-1,r!==s&&(n=n.getTextContent().slice(r,l),/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(n)||(e?o.offset=s:i.offset=s))}}}this.removeText()}deleteLine(e){this.isCollapsed()&&this.modify("extend",e,"lineboundary"),this.removeText()}deleteWord(e){this.isCollapsed()&&this.modify("extend",e,"word"),this.removeText()}}function Gt(t){return t instanceof Pr}function Lo(t){let e=t.offset;return t.type==="text"?e:(t=t.getNode(),e===t.getChildrenSize()?t.getTextContent().length:0)}function or(t){let e=t.anchor;return t=t.focus,e.type==="element"&&t.type==="element"&&e.key===t.key&&e.offset===t.offset?[0,0]:[Lo(e),Lo(t)]}function Fo(t,e,n){let r=t.getTextContent().split(/(?=\s)/g),i=r.length,o=0,s=0;for(let l=0;l<i;l++){let a=r[l],u=l===i-1;if(s=o,o+=a.length,e&&o===n||o>n||u){r.splice(l,1),u&&(s=void 0);break}}e=r.join("").trim(),e===""?t.remove():(t.setTextContent(e),t.select(s,s))}function Bo(t,e,n){var r=e;if(t.nodeType===1){let s=!1;var i=t.childNodes,o=i.length;if(r===o&&(s=!0,r=o-1),i=Mt(i[r]),M(i))r=s?i.getTextContentSize():0;else{if(o=Mt(t),o===null)return null;if(w(o)?(t=o.getChildAtIndex(r),(e=w(t))&&(e=t.getParent(),e=n===null||e===null||!e.canBeEmpty()||e!==n.getNode()),e&&(n=s?t.getLastDescendant():t.getFirstDescendant(),n===null?(o=t,r=0):(t=n,o=t.getParentOrThrow())),M(t)?(i=t,o=null,r=s?t.getTextContentSize():0):t!==o&&s&&r++):(r=o.getIndexWithinParent(),r=e===0&&we(o)&&Mt(t)===o?r:r+1,o=o.getParentOrThrow()),w(o))return new et(o.__key,r,"element")}}else i=Mt(t);return M(i)?new et(i.__key,r,"text"):null}function zo(t,e,n){var r=t.offset,i=t.getNode();r===0?(r=i.getPreviousSibling(),i=i.getParent(),e?(n||!e)&&r===null&&w(i)&&i.isInline()&&(e=i.getPreviousSibling(),M(e)&&(t.key=e.__key,t.offset=e.getTextContent().length)):w(r)&&!n&&r.isInline()?(t.key=r.__key,t.offset=r.getChildrenSize(),t.type="element"):M(r)&&!r.isInert()&&(t.key=r.__key,t.offset=r.getTextContent().length)):r===i.getTextContent().length&&(r=i.getNextSibling(),i=i.getParent(),e&&w(r)&&r.isInline()?(t.key=r.__key,t.offset=0,t.type="element"):(n||e)&&r===null&&w(i)&&i.isInline()&&!i.canInsertTextAfter()&&(e=i.getNextSibling(),M(e)&&(t.key=e.__key,t.offset=0)))}function Al(t,e,n){if(t.type==="text"&&e.type==="text"){var r=t.isBefore(e);let i=t.is(e);zo(t,r,i),zo(e,!r,i),i&&(e.key=t.key,e.offset=t.offset,e.type=t.type),r=te(),r.isComposing()&&r._compositionKey!==t.key&&W(n)&&(r=n.anchor,n=n.focus,at(t,r.key,r.offset,r.type),at(e,n.key,n.offset,n.type))}}function Ml(t,e,n,r,i,o){return t===null||n===null||!Mr(i,t,n)||(e=Bo(t,e,W(o)?o.anchor:null),e===null)||(r=Bo(n,r,W(o)?o.focus:null),r===null||e.type==="element"&&r.type==="element"&&(t=Mt(t),n=Mt(n),we(t)&&we(n)))?null:(Al(e,r,o),[e,r])}function jo(t){return w(t)&&!t.isInline()}function Dl(t,e,n,r,i,o){let s=tt();return t=new Jt(new et(t,e,i),new et(n,r,o),0),t.dirty=!0,s._selection=t}function Qu(t){let e=t.getEditorState()._selection,n=window.getSelection();return Gt(e)||Vi(e)?e.clone():Il(e,n,t)}function Il(t,e,n){var r=window.event,i=r?r.type:void 0;let o=i==="selectionchange";r=!pi&&(o||i==="beforeinput"||i==="compositionstart"||i==="compositionend"||i==="click"&&r&&r.detail===3||i===void 0);let s;if(!W(t)||r){if(e===null)return null;if(r=e.anchorNode,i=e.focusNode,s=e.anchorOffset,e=e.focusOffset,o&&W(t)&&!Mr(n,r,i))return t.clone()}else return t.clone();if(n=Ml(r,s,i,e,n,t),n===null)return null;let[l,a]=n;return new Jt(l,a,W(t)?t.format:0)}function oe(){return tt()._selection}function Lr(){return te()._editorState._selection}function dr(t,e,n,r=1){var i=t.anchor,o=t.focus,s=i.getNode(),l=o.getNode();if(e.is(s)||e.is(l))if(s=e.__key,t.isCollapsed())e=i.offset,n<=e&&(n=Math.max(0,e+r),i.set(s,n,"element"),o.set(s,n,"element"),Ko(t));else{var a=t.isBackward();l=a?o:i;var u=l.getNode();i=a?i:o,o=i.getNode(),e.is(u)&&(u=l.offset,n<=u&&l.set(s,Math.max(0,u+r),"element")),e.is(o)&&(e=i.offset,n<=e&&i.set(s,Math.max(0,e+r),"element")),Ko(t)}}function Ko(t){var e=t.anchor,n=e.offset;let r=t.focus;var i=r.offset,o=e.getNode(),s=r.getNode();if(t.isCollapsed())w(o)&&(s=o.getChildrenSize(),s=(i=n>=s)?o.getChildAtIndex(s-1):o.getChildAtIndex(n),M(s)&&(n=0,i&&(n=s.getTextContentSize()),e.set(s.__key,n,"text"),r.set(s.__key,n,"text")));else{if(w(o)){let l=o.getChildrenSize();n=(t=n>=l)?o.getChildAtIndex(l-1):o.getChildAtIndex(n),M(n)&&(o=0,t&&(o=n.getTextContentSize()),e.set(n.__key,o,"text"))}w(s)&&(n=s.getChildrenSize(),i=(e=i>=n)?s.getChildAtIndex(n-1):s.getChildAtIndex(i),M(i)&&(s=0,e&&(s=i.getTextContentSize()),r.set(i.__key,s,"text")))}}function ec(t,e){if(e=e.getEditorState()._selection,t=t._selection,W(t)){var n=t.anchor;let r=t.focus,i;n.type==="text"&&(i=n.getNode(),i.selectionTransform(e,t)),r.type==="text"&&(n=r.getNode(),i!==n&&n.selectionTransform(e,t))}}function fr(t,e,n,r,i){let o=null,s=0,l=null;r!==null?(o=r.__key,M(r)?(s=r.getTextContentSize(),l="text"):w(r)&&(s=r.getChildrenSize(),l="element")):i!==null&&(o=i.__key,M(i)?l="text":w(i)&&(l="element")),o!==null&&l!==null?t.set(o,s,l):(s=e.getIndexWithinParent(),s===-1&&(s=n.getChildrenSize()),t.set(n.__key,s,"element"))}function Wo(t,e,n,r,i){t.type==="text"?(t.key=n,e||(t.offset+=i)):t.offset>r.getIndexWithinParent()&&--t.offset}let Me=null,_e=null,ye=!1,qr=!1,wn=0;function Z(){ye&&D(13)}function tt(){return Me===null&&D(15),Me}function te(){return _e===null&&D(16),_e}function Ho(t,e,n){var r=e.__type;let i=t._nodes.get(r);for(i===void 0&&D(30),t=n.get(r),t===void 0&&(t=Array.from(i.transforms),n.set(r,t)),n=t.length,r=0;r<n&&(t[r](e),e.isAttached());r++);}function tc(t,e){e=e._dirtyLeaves,t=t._nodeMap;for(let n of e)e=t.get(n),M(e)&&e.isAttached()&&e.isSimpleText()&&!e.isUnmergeable()&&xl(e)}function nc(t,e){let n=e._dirtyLeaves,r=e._dirtyElements;t=t._nodeMap;let i=te()._compositionKey,o=new Map;var s=n;let l=s.size;for(var a=r,u=a.size;0<l||0<u;){if(0<l){e._dirtyLeaves=new Set;for(let c of s)s=t.get(c),M(s)&&s.isAttached()&&s.isSimpleText()&&!s.isUnmergeable()&&xl(s),s!==void 0&&s!==void 0&&s.__key!==i&&s.isAttached()&&Ho(e,s,o),n.add(c);if(s=e._dirtyLeaves,l=s.size,0<l){wn++;continue}}e._dirtyLeaves=new Set,e._dirtyElements=new Map;for(let c of a)a=c[0],u=c[1],(a==="root"||u)&&(s=t.get(a),s!==void 0&&s!==void 0&&s.__key!==i&&s.isAttached()&&Ho(e,s,o),r.set(a,u));s=e._dirtyLeaves,l=s.size,a=e._dirtyElements,u=a.size,wn++}e._dirtyLeaves=n,e._dirtyElements=r}function qi(t,e){var n=e.get(t.type);if(n===void 0&&D(17),n=n.klass,t.type!==n.getType()&&D(18),n=n.importJSON(t),t=t.children,w(n)&&Array.isArray(t))for(let r=0;r<t.length;r++){let i=qi(t[r],e);n.append(i)}return n}function Uo(t,e){let n=Me,r=ye,i=_e;Me=t,ye=!0,_e=null;try{return e()}finally{Me=n,ye=r,_e=i}}function mt(t){var e=t._pendingEditorState,n=t._rootElement,r=t._headless;if((n!==null||r)&&e!==null){var i=t._editorState,o=i._selection,s=e._selection,l=t._dirtyType!==0,a=Me,u=ye,c=_e,d=t._updating,h=t._observer,g=null;if(t._pendingEditorState=null,t._editorState=e,!r&&l&&h!==null){_e=t,Me=e,ye=!1,t._updating=!0;try{var f=t._dirtyType,y=t._dirtyElements,x=t._dirtyLeaves;h.disconnect(),Le=Qe=he="",Cl=f===2,nr=null,Fe=t,vt=t._config,Sn=t._nodes,Ir=Fe._listeners.mutation,yi=y,vi=x,Tn=i._nodeMap,Wt=e._nodeMap,Gi=e._readOnly,xi=new Map(t._keyToDOMMap);var k=new Map;En=k,cn("root",null),En=xi=vt=Wt=Tn=vi=yi=Sn=Fe=void 0,g=k}catch(pe){if(pe instanceof Error&&t._onError(pe),qr)throw pe;Fl(t,null,n,e),al(t),t._dirtyType=2,qr=!0,mt(t),qr=!1;return}finally{h.observe(n,{characterData:!0,childList:!0,subtree:!0}),t._updating=d,Me=a,ye=u,_e=c}}e._readOnly=!0,d=t._dirtyLeaves,h=t._dirtyElements,k=t._normalizedNodes,f=t._updateTags,x=t._pendingDecorators,u=t._deferred,l&&(t._dirtyType=0,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements=new Map,t._normalizedNodes=new Set,t._updateTags=new Set),y=t._decorators;var T=t._pendingDecorators||y,I=e._nodeMap;for(fe in T)I.has(fe)||(T===y&&(T=hl(t)),delete T[fe]);if(r=r?null:window.getSelection(),!t._readOnly&&r!==null&&(l||s===null||s.dirty)){_e=t,Me=e;try{e:{let pe=r.anchorNode,de=r.focusNode,Se=r.anchorOffset,Ve=r.focusOffset,Te=document.activeElement;if(!f.has("collaboration")||Te===n)if(W(s)){var L=s.anchor,J=s.focus,ee=L.key,Ce=J.key,ae=cr(t,ee),Ie=cr(t,Ce),Pe=L.offset,Ge=J.offset,ce=s.format,Ne=s.isCollapsed();l=ae,Ce=Ie;var fe=!1;if(L.type==="text"&&(l=ur(ae),fe=L.getNode().getFormat()!==ce),J.type==="text"&&(Ce=ur(Ie)),l!==null&&Ce!==null){if(Ne&&(o===null||fe||W(o)&&o.format!==ce)){var ge=performance.now();Ol=[ce,Pe,ee,ge]}if(Se===Pe&&Ve===Ge&&pe===l&&de===Ce&&(r.type!=="Range"||!Ne)&&(n===null||Te!==null&&n.contains(Te)||n.focus({preventScroll:!0}),!Rr&&!$r||L.type!=="element"))break e;try{if(r.setBaseAndExtent(l,Pe,Ce,Ge),s.isCollapsed()&&n!==null&&n===Te){let ze=L.getNode();if(w(ze)){let C=ze.getDescendantByIndex(L.offset);C!==null&&(ze=C)}let v=t.getElementByKey(ze.__key);if(v!==null){let C=v.getBoundingClientRect();if(C.bottom>window.innerHeight)v.scrollIntoView(!1);else if(0>C.top)v.scrollIntoView();else{let S=n.getBoundingClientRect();Math.floor(C.bottom)>Math.floor(S.bottom)?v.scrollIntoView(!1):Math.floor(C.top)<Math.floor(S.top)&&v.scrollIntoView()}f.add("scroll-into-view")}}Ei=!0}catch{}}}else o!==null&&Mr(t,pe,de)&&r.removeAllRanges()}}finally{_e=c,Me=a}}if(g!==null)for(n=g,o=Array.from(t._listeners.mutation),s=o.length,a=0;a<s;a++){let[pe,de]=o[a];c=n.get(de),c!==void 0&&pe(c)}if(x!==null&&(t._decorators=x,t._pendingDecorators=null,mn("decorator",t,!0,x)),n=Oo(i),o=Oo(e),n!==o&&mn("textcontent",t,!0,o),mn("update",t,!0,{dirtyElements:h,dirtyLeaves:d,editorState:e,normalizedNodes:k,prevEditorState:i,tags:f}),t._deferred=[],u.length!==0){e=t._updating,t._updating=!0;try{for(i=0;i<u.length;i++)u[i]()}finally{t._updating=e}}if(e=t._updates,e.length!==0&&(e=e.shift())){let[pe,de]=e;Pl(t,pe,de)}}}function mn(t,e,n,...r){let i=e._updating;e._updating=n;try{let o=Array.from(e._listeners[t]);for(t=0;t<o.length;t++)o[t].apply(null,r)}finally{e._updating=i}}function R(t,e,n){if(t._updating===!1||_e!==t){let o=!1;return t.update(()=>{o=R(t,e,n)}),o}let r=Ui(t);for(let o=4;0<=o;o--)for(let s=0;s<r.length;s++){var i=r[s]._commands.get(e);if(i!==void 0&&(i=i[o],i!==void 0)){i=Array.from(i);let l=i.length;for(let a=0;a<l;a++)if(i[a](n,t)===!0)return!0}}return!1}function Yo(t,e){let n=t._updates;for(e=e||!1;n.length!==0;){var r=n.shift();if(r){let[i,o]=r,s;o!==void 0&&(r=o.onUpdate,s=o.tag,o.skipTransforms&&(e=!0),r&&t._deferred.push(r),s&&t._updateTags.add(s)),i()}}return e}function Pl(t,e,n){let r=t._updateTags;var i=!1;if(n!==void 0){var o=n.onUpdate;i=n.tag,i!=null&&r.add(i),i=n.skipTransforms||!1}o&&t._deferred.push(o),n=t._editorState,o=t._pendingEditorState;let s=!1;o===null&&(o=t._pendingEditorState=new Br(new Map(n._nodeMap)),s=!0);let l=Me,a=ye,u=_e,c=t._updating;Me=o,ye=!1,t._updating=!0,_e=t;try{s&&!t._headless&&(o._selection=Qu(t));let d=t._compositionKey;e(),i=Yo(t,i),ec(o,t),t._dirtyType!==0&&(i?tc(o,t):nc(o,t),Yo(t),Wu(n,o,t._dirtyLeaves,t._dirtyElements)),d!==t._compositionKey&&(o._flushSync=!0);let h=o._selection;if(W(h)){let g=o._nodeMap,f=h.focus.key;g.get(h.anchor.key)!==void 0&&g.get(f)!==void 0||D(19)}else Gt(h)&&h._nodes.size===0&&(o._selection=null)}catch(d){d instanceof Error&&t._onError(d),t._pendingEditorState=n,t._dirtyType=2,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements.clear(),mt(t);return}finally{Me=l,ye=a,_e=u,t._updating=c,wn=0}t._dirtyType!==0||rc(o,t)?o._flushSync?(o._flushSync=!1,mt(t)):s&&ju(()=>{mt(t)}):(o._flushSync=!1,s&&(r.clear(),t._deferred=[],t._pendingEditorState=null))}function Ze(t,e,n){t._updating?t._updates.push([e,n]):Pl(t,e,n)}function wi(t,e,n){Z();var r=t.__key;let i=t.getParent();if(i!==null){var o=oe(),s=!1;if(W(o)&&e){var l=o.anchor;let a=o.focus;l.key===r&&(fr(l,t,i,t.getPreviousSibling(),t.getNextSibling()),s=!0),a.key===r&&(fr(a,t,i,t.getPreviousSibling(),t.getNextSibling()),s=!0)}l=i.getWritable().__children,r=l.indexOf(r),r===-1&&D(31),Pt(t),l.splice(r,1),t.getWritable().__parent=null,W(o)&&e&&!s&&dr(o,i,r,-1),n||i===null||De(i)||i.canBeEmpty()||!i.isEmpty()||wi(i,e),i!==null&&De(i)&&i.isEmpty()&&i.selectEnd()}}function Jo(t){return t=ie(t),t===null&&D(63),t}class Fr{static getType(){D(64)}static clone(){D(65)}constructor(e){if(this.__type=this.constructor.getType(),this.__parent=null,e!=null)this.__key=e;else{Z(),99<wn&&D(14),e=te();var n=tt(),r=""+zu++;n._nodeMap.set(r,this),w(this)?e._dirtyElements.set(r,!0):e._dirtyLeaves.add(r),e._cloneNotNeeded.add(r),e._dirtyType=1,this.__key=r}}getType(){return this.__type}isAttached(){for(var e=this.__key;e!==null;){if(e==="root")return!0;if(e=ie(e),e===null)break;e=e.__parent}return!1}isSelected(){let e=oe();if(e==null)return!1;let n=e.getNodes().some(r=>r.__key===this.__key);return M(this)?n:W(e)&&e.anchor.type==="element"&&e.focus.type==="element"&&e.anchor.key===e.focus.key&&e.anchor.offset===e.focus.offset?!1:n}getKey(){return this.__key}getIndexWithinParent(){let e=this.getParent();return e===null?-1:e.__children.indexOf(this.__key)}getParent(){let e=this.getLatest().__parent;return e===null?null:ie(e)}getParentOrThrow(){let e=this.getParent();return e===null&&D(66),e}getTopLevelElement(){let e=this;for(;e!==null;){let n=e.getParent();if(De(n)&&w(e))return e;e=n}return null}getTopLevelElementOrThrow(){let e=this.getTopLevelElement();return e===null&&D(67),e}getParents(){let e=[],n=this.getParent();for(;n!==null;)e.push(n),n=n.getParent();return e}getParentKeys(){let e=[],n=this.getParent();for(;n!==null;)e.push(n.__key),n=n.getParent();return e}getPreviousSibling(){var e=this.getParent();if(e===null)return null;e=e.__children;let n=e.indexOf(this.__key);return 0>=n?null:ie(e[n-1])}getPreviousSiblings(){var e=this.getParent();if(e===null)return[];e=e.__children;let n=e.indexOf(this.__key);return e.slice(0,n).map(r=>Jo(r))}getNextSibling(){var e=this.getParent();if(e===null)return null;e=e.__children;let n=e.length,r=e.indexOf(this.__key);return r>=n-1?null:ie(e[r+1])}getNextSiblings(){var e=this.getParent();if(e===null)return[];e=e.__children;let n=e.indexOf(this.__key);return e.slice(n+1).map(r=>Jo(r))}getCommonAncestor(e){let n=this.getParents();var r=e.getParents();w(this)&&n.unshift(this),w(e)&&r.unshift(e),e=n.length;var i=r.length;if(e===0||i===0||n[e-1]!==r[i-1])return null;for(r=new Set(r),i=0;i<e;i++){let o=n[i];if(r.has(o))return o}return null}is(e){return e==null?!1:this.__key===e.__key}isBefore(e){if(e.isParentOf(this))return!0;if(this.isParentOf(e))return!1;var n=this.getCommonAncestor(e);let r=this;for(;;){var i=r.getParentOrThrow();if(i===n){i=i.__children.indexOf(r.__key);break}r=i}for(r=e;;){if(e=r.getParentOrThrow(),e===n){n=e.__children.indexOf(r.__key);break}r=e}return i<n}isParentOf(e){let n=this.__key;if(n===e.__key)return!1;for(;e!==null;){if(e.__key===n)return!0;e=e.getParent()}return!1}getNodesBetween(e){let n=this.isBefore(e),r=[],i=new Set;for(var o=this;;){var s=o.__key;if(i.has(s)||(i.add(s),r.push(o)),o===e)break;if(s=w(o)?n?o.getFirstChild():o.getLastChild():null,s!==null)o=s;else if(s=n?o.getNextSibling():o.getPreviousSibling(),s!==null)o=s;else{if(o=o.getParentOrThrow(),i.has(o.__key)||r.push(o),o===e)break;s=o;do s===null&&D(68),o=n?s.getNextSibling():s.getPreviousSibling(),s=s.getParent(),s!==null&&(o!==null||i.has(s.__key)||r.push(s));while(o===null)}}return n||r.reverse(),r}isDirty(){let e=te()._dirtyLeaves;return e!==null&&e.has(this.__key)}getLatest(){let e=ie(this.__key);return e===null&&D(69),e}getWritable(){Z();var e=tt(),n=te();e=e._nodeMap;let r=this.__key,i=this.getLatest(),o=i.__parent;n=n._cloneNotNeeded;var s=oe();return s!==null&&(s._cachedNodes=null),n.has(r)?(Kt(i),i):(s=i.constructor.clone(i),s.__parent=o,w(i)&&w(s)?(s.__children=Array.from(i.__children),s.__indent=i.__indent,s.__format=i.__format,s.__dir=i.__dir):M(i)&&M(s)&&(s.__format=i.__format,s.__style=i.__style,s.__mode=i.__mode,s.__detail=i.__detail),n.add(r),s.__key=r,Kt(s),e.set(r,s),s)}getTextContent(){return""}getTextContentSize(e,n){return this.getTextContent(e,n).length}createDOM(){D(70)}updateDOM(){D(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){D(72)}static importJSON(){D(18)}remove(e){Z(),wi(this,!0,e)}replace(e){Z();let n=this.__key;e=e.getWritable(),er(e);var r=this.getParentOrThrow(),i=r.getWritable().__children;let o=i.indexOf(this.__key),s=e.__key;return o===-1&&D(31),i.splice(o,0,s),e.__parent=r.__key,wi(this,!1),Pt(e),i=oe(),W(i)&&(r=i.anchor,i=i.focus,r.key===n&&Po(r,e),i.key===n&&Po(i,e)),te()._compositionKey===n&&Ae(s),e}insertAfter(e){Z();var n=this.getWritable(),r=e.getWritable(),i=r.getParent();let o=oe();var s=e.getIndexWithinParent(),l=!1,a=!1;i!==null&&(er(r),W(o)&&(a=i.__key,l=o.anchor,i=o.focus,l=l.type==="element"&&l.key===a&&l.offset===s+1,a=i.type==="element"&&i.key===a&&i.offset===s+1)),s=this.getParentOrThrow().getWritable(),i=r.__key,r.__parent=n.__parent;let u=s.__children;return n=u.indexOf(n.__key),n===-1&&D(31),u.splice(n+1,0,i),Pt(r),W(o)&&(dr(o,s,n+1),r=s.__key,l&&o.anchor.set(r,n+2,"element"),a&&o.focus.set(r,n+2,"element")),e}insertBefore(e){Z();var n=this.getWritable(),r=e.getWritable();er(r);let i=this.getParentOrThrow().getWritable(),o=r.__key;r.__parent=n.__parent;let s=i.__children;return n=s.indexOf(n.__key),n===-1&&D(31),s.splice(n,0,o),Pt(r),r=oe(),W(r)&&dr(r,i,n),e}selectPrevious(e,n){Z();let r=this.getPreviousSibling(),i=this.getParentOrThrow();return r===null?i.select(0,0):w(r)?r.select():M(r)?r.select(e,n):(e=r.getIndexWithinParent()+1,i.select(e,e))}selectNext(e,n){Z();let r=this.getNextSibling(),i=this.getParentOrThrow();return r===null?i.select():w(r)?r.select(0,0):M(r)?r.select(e,n):(e=r.getIndexWithinParent(),i.select(e,e))}markDirty(){this.getWritable()}}class bl extends Fr{constructor(e){super(e)}decorate(){D(47)}isIsolated(){return!1}isTopLevel(){return!1}}function we(t){return t instanceof bl}class Et extends Fr{constructor(e){super(e),this.__children=[],this.__indent=this.__format=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){let e=this.getFormat();return Pu[e]||""}getIndent(){return this.getLatest().__indent}getChildren(){let e=this.getLatest().__children,n=[];for(let r=0;r<e.length;r++){let i=ie(e[r]);i!==null&&n.push(i)}return n}getChildrenKeys(){return this.getLatest().__children}getChildrenSize(){return this.getLatest().__children.length}isEmpty(){return this.getChildrenSize()===0}isDirty(){let e=te()._dirtyElements;return e!==null&&e.has(this.__key)}isLastChild(){let e=this.getLatest();return e.getParentOrThrow().getLastChild()===e}getAllTextNodes(e){let n=[],r=this.getLatest().__children;for(let o=0;o<r.length;o++){var i=ie(r[o]);!M(i)||!e&&i.isInert()?w(i)&&(i=i.getAllTextNodes(e),n.push(...i)):n.push(i)}return n}getFirstDescendant(){let e=this.getFirstChild();for(;e!==null;){if(w(e)){let n=e.getFirstChild();if(n!==null){e=n;continue}}break}return e}getLastDescendant(){let e=this.getLastChild();for(;e!==null;){if(w(e)){let n=e.getLastChild();if(n!==null){e=n;continue}}break}return e}getDescendantByIndex(e){let n=this.getChildren(),r=n.length;return e>=r?(e=n[r-1],w(e)&&e.getLastDescendant()||e||null):(e=n[e],w(e)&&e.getFirstDescendant()||e||null)}getFirstChild(){let e=this.getLatest().__children;return e.length===0?null:ie(e[0])}getFirstChildOrThrow(){let e=this.getFirstChild();return e===null&&D(45),e}getLastChild(){let e=this.getLatest().__children,n=e.length;return n===0?null:ie(e[n-1])}getChildAtIndex(e){return e=this.getLatest().__children[e],e===void 0?null:ie(e)}getTextContent(e,n){let r="",i=this.getChildren(),o=i.length;for(let s=0;s<o;s++){let l=i[s];r+=l.getTextContent(e,n),w(l)&&s!==o-1&&!l.isInline()&&(r+=`

`)}return r}getDirection(){return this.getLatest().__dir}hasFormat(e){return e!==""?(e=wo[e],(this.getFormat()&e)!==0):!1}select(e,n){Z();let r=oe();var i=this.getChildrenSize();if(e===void 0&&(e=i),n===void 0&&(n=i),i=this.__key,W(r))r.anchor.set(i,e,"element"),r.focus.set(i,n,"element"),r.dirty=!0;else return Dl(i,e,i,n,"element","element");return r}selectStart(){let e=this.getFirstDescendant();return w(e)||M(e)?e.select(0,0):e!==null?e.selectPrevious():this.select(0,0)}selectEnd(){let e=this.getLastDescendant();return w(e)||M(e)?e.select():e!==null?e.selectNext():this.select()}clear(){Z();let e=this.getWritable();return this.getChildren().forEach(n=>n.remove()),e}append(...e){return Z(),this.splice(this.getChildrenSize(),0,e)}setDirection(e){Z();let n=this.getWritable();return n.__dir=e,n}setFormat(e){return Z(),this.getWritable().__format=e!==""?wo[e]:0,this}setIndent(e){return Z(),this.getWritable().__indent=e,this}splice(e,n,r){Z();let i=this.getWritable();var o=i.__key;let s=i.__children,l=r.length;var a=[];for(let u=0;u<l;u++){let c=r[u],d=c.getWritable();c.__key===o&&D(46),er(d),d.__parent=o,a.push(d.__key)}if((r=this.getChildAtIndex(e-1))&&Kt(r),(o=this.getChildAtIndex(e+n))&&Kt(o),e===s.length?(s.push(...a),e=[]):e=s.splice(e,n,...a),e.length&&(n=oe(),W(n))){let u=new Set(e),c=new Set(a);a=g=>{for(g=g.getNode();g;){const f=g.__key;if(u.has(f)&&!c.has(f))return!0;g=g.getParent()}return!1};let{anchor:d,focus:h}=n;for(a(d)&&fr(d,d.getNode(),this,r,o),a(h)&&fr(h,h.getNode(),this,r,o),a=e.length,n=0;n<a;n++)r=ie(e[n]),r!=null&&(r.getWritable().__parent=null);s.length!==0||this.canBeEmpty()||De(this)||this.remove()}return i}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(){return null}canInsertTab(){return!1}canIndent(){return!0}collapseAtStart(){return!1}excludeFromCopy(){return!1}canExtractContents(){return!0}canReplaceWith(){return!0}canInsertAfter(){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}canMergeWith(){return!1}extractWithChild(){return!1}}function w(t){return t instanceof Et}class Vt extends Et{static getType(){return"root"}static clone(){return new Vt}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){D(51)}getTextContent(e,n){let r=this.__cachedText;return!ye&&te()._dirtyType!==0||r===null||e&&n===!1?super.getTextContent(e,n):r}remove(){D(52)}replace(){D(53)}insertBefore(){D(54)}insertAfter(){D(55)}updateDOM(){return!1}append(...e){for(let n=0;n<e.length;n++){let r=e[n];w(r)||we(r)||D(56)}return super.append(...e)}static importJSON(e){let n=Tt();return n.setFormat(e.format),n.setIndent(e.indent),n.setDirection(e.direction),n}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}}function De(t){return t instanceof Vt}function rc(t,e){if(e=e.getEditorState()._selection,t=t._selection,t!==null){if(t.dirty||!t.is(e))return!0}else if(e!==null)return!0;return!1}function Xi(){return new Br(new Map([["root",new Vt]]))}function Ll(t){let e=t.exportJSON();e.type!==t.constructor.getType()&&D(58);let n=e.children;if(w(t)){Array.isArray(n)||D(59),t=t.getChildren();for(let r=0;r<t.length;r++){let i=Ll(t[r]);n.push(i)}}return e}class Br{constructor(e,n){this._nodeMap=e,this._selection=n||null,this._readOnly=this._flushSync=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(e){return Uo(this,e)}clone(e){return e=new Br(this._nodeMap,e===void 0?this._selection:e),e._readOnly=!0,e}toJSON(){return Uo(this,()=>({root:Ll(Tt())}))}}class qt extends Fr{static getType(){return"linebreak"}static clone(e){return new qt(e.__key)}constructor(e){super(e)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:e=>{let n=e.parentElement;return n!=null&&n.firstChild===e&&n.lastChild===e?null:{conversion:ic,priority:0}}}}static importJSON(){return On()}exportJSON(){return{type:"linebreak",version:1}}}function ic(){return{node:On()}}function On(){return new qt}function $n(t){return t instanceof qt}function Xr(t,e){return e&16?"code":e&32?"sub":e&64?"sup":null}function Zr(t,e){return e&1?"strong":e&2?"em":"span"}function Qr(t,e,n,r,i){t=r.classList,r=tr(i,"base"),r!==void 0&&t.add(...r),r=tr(i,"underlineStrikethrough");let o=!1,s=e&8&&e&4;var l=n&8&&n&4;r!==void 0&&(l?(o=!0,s||t.add(...r)):s&&t.remove(...r));for(let a in pt)l=pt[a],r=tr(i,a),r!==void 0&&(n&l?!o||a!=="underline"&&a!=="strikethrough"?((e&l)===0||s&&a==="underline"||a==="strikethrough")&&t.add(...r):e&l&&t.remove(...r):e&l&&t.remove(...r))}function ei(t,e,n){let r=e.firstChild;if(n=n.isComposing(),t+=n?Ar:"",r==null)e.textContent=t;else if(e=r.nodeValue,e!==t)if(n||yt){n=e.length;let i=t.length,o=0,s=0;for(;o<n&&o<i&&e[o]===t[o];)o++;for(;s+o<n&&s+o<i&&e[n-s-1]===t[i-s-1];)s++;t=[o,n-o-s,t.slice(o,i-s)];let[l,a,u]=t;a!==0&&r.deleteData(l,a),r.insertData(l,u)}else r.nodeValue=t}class Xt extends Fr{static getType(){return"text"}static clone(e){return new Xt(e.__text,e.__key)}constructor(e,n){super(n),this.__text=e,this.__format=0,this.__style="",this.__detail=this.__mode=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){let e=this.getLatest();return Lu[e.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===te()._compositionKey}isSegmented(){return this.getLatest().__mode===2}isInert(){return this.getLatest().__mode===3}isDirectionless(){return(this.getLatest().__detail&1)!==0}isUnmergeable(){return(this.getLatest().__detail&2)!==0}hasFormat(e){return e=pt[e],(this.getFormat()&e)!==0}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(e,n){return!e&&this.isInert()||n===!1&&this.isDirectionless()?"":this.getLatest().__text}getFormatFlags(e,n){let r=this.getLatest().__format;return cl(r,e,n)}createDOM(e){var n=this.__format,r=Xr(this,n);let i=Zr(this,n),o=document.createElement(r===null?i:r),s=o;return r!==null&&(s=document.createElement(i),o.appendChild(s)),r=s,ei(this.__text,r,this),e=e.theme.text,e!==void 0&&Qr(i,0,n,r,e),n=this.__style,n!==""&&(o.style.cssText=n),o}updateDOM(e,n,r){let i=this.__text;var o=e.__format,s=this.__format,l=Xr(this,o);let a=Xr(this,s);var u=Zr(this,o);let c=Zr(this,s);return(l===null?u:l)!==(a===null?c:a)?!0:l===a&&u!==c?(o=n.firstChild,o==null&&D(48),e=l=document.createElement(c),ei(i,e,this),r=r.theme.text,r!==void 0&&Qr(c,0,s,e,r),n.replaceChild(l,o),!1):(u=n,a!==null&&l!==null&&(u=n.firstChild,u==null&&D(49)),ei(i,u,this),r=r.theme.text,r!==void 0&&o!==s&&Qr(c,o,s,u,r),s=this.__style,e.__style!==s&&(n.style.cssText=s),!1)}static importDOM(){return{"#text":()=>({conversion:lc,priority:0}),b:()=>({conversion:sc,priority:0}),code:()=>({conversion:on,priority:0}),em:()=>({conversion:on,priority:0}),i:()=>({conversion:on,priority:0}),span:()=>({conversion:oc,priority:0}),strong:()=>({conversion:on,priority:0}),u:()=>({conversion:on,priority:0})}}static importJSON(e){let n=be(e.text);return n.setFormat(e.format),n.setDetail(e.detail),n.setMode(e.mode),n.setStyle(e.style),n}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(){}setFormat(e){Z();let n=this.getWritable();return n.__format=typeof e=="string"?pt[e]:e,n}setDetail(e){Z();let n=this.getWritable();return n.__detail=typeof e=="string"?Iu[e]:e,n}setStyle(e){Z();let n=this.getWritable();return n.__style=e,n}toggleFormat(e){return e=pt[e],this.setFormat(this.getFormat()^e)}toggleDirectionless(){Z();let e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){Z();let e=this.getWritable();return e.__detail^=2,e}setMode(e){Z(),e=bu[e];let n=this.getWritable();return n.__mode=e,n}setTextContent(e){Z();let n=this.getWritable();return n.__text=e,n}select(e,n){Z();let r=oe();var i=this.getTextContent();let o=this.__key;if(typeof i=="string"?(i=i.length,e===void 0&&(e=i),n===void 0&&(n=i)):n=e=0,W(r))i=te()._compositionKey,i!==r.anchor.key&&i!==r.focus.key||Ae(o),r.setTextNodeRange(this,e,this,n);else return Dl(o,e,o,n,"text","text");return r}spliceText(e,n,r,i){Z();let o=this.getWritable(),s=o.__text,l=r.length,a=e;0>a&&(a=l+a,0>a&&(a=0));let u=oe();return i&&W(u)&&(e+=l,u.setTextNodeRange(o,e,o,e)),n=s.slice(0,a)+r+s.slice(a+n),o.__text=n,o}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){Z();var n=this.getLatest(),r=n.getTextContent(),i=n.__key,o=te()._compositionKey,s=new Set(e);e=[];for(var l=r.length,a="",u=0;u<l;u++)a!==""&&s.has(u)&&(e.push(a),a=""),a+=r[u];if(a!==""&&e.push(a),s=e.length,s===0)return[];if(e[0]===r)return[n];var c=e[0];r=n.getParentOrThrow(),u=r.__key;let d=n.getFormat(),h=n.getStyle(),g=n.__detail;l=!1,n.isSegmented()?(a=be(c),a.__parent=u,a.__format=d,a.__style=h,a.__detail=g,l=!0):(a=n.getWritable(),a.__text=c),n=oe(),a=[a],c=c.length;for(let x=1;x<s;x++){var f=e[x],y=f.length;f=be(f).getWritable(),f.__format=d,f.__style=h,f.__detail=g;let k=f.__key;if(y=c+y,W(n)){let T=n.anchor,I=n.focus;T.key===i&&T.type==="text"&&T.offset>c&&T.offset<=y&&(T.key=k,T.offset-=c,n.dirty=!0),I.key===i&&I.type==="text"&&I.offset>c&&I.offset<=y&&(I.key=k,I.offset-=c,n.dirty=!0)}o===i&&Ae(k),c=y,f.__parent=u,a.push(f)}return Pt(this),o=r.getWritable().__children,i=o.indexOf(i),e=a.map(x=>x.__key),l?(o.splice(i,0,...e),this.remove()):o.splice(i,1,...e),W(n)&&dr(n,r,i,s-1),a}mergeWithSibling(e){var n=e===this.getPreviousSibling();n||e===this.getNextSibling()||D(50);var r=this.__key;let i=e.__key,o=this.__text,s=o.length;te()._compositionKey===i&&Ae(r);let l=oe();if(W(l)){let a=l.anchor,u=l.focus;a!==null&&a.key===i&&(Wo(a,n,r,e,s),l.dirty=!0),u!==null&&u.key===i&&(Wo(u,n,r,e,s),l.dirty=!0)}return r=e.__text,this.setTextContent(n?r+o:o+r),n=this.getWritable(),e.remove(),n}isTextEntity(){return!1}}function oc(t){let e=t.style.fontWeight==="700",n=t.style.textDecoration==="line-through",r=t.style.fontStyle==="italic",i=t.style.textDecoration==="underline",o=t.style.verticalAlign;return{forChild:s=>(M(s)&&(e&&s.toggleFormat("bold"),n&&s.toggleFormat("strikethrough"),r&&s.toggleFormat("italic"),i&&s.toggleFormat("underline"),o==="sub"&&s.toggleFormat("subscript"),o==="super"&&s.toggleFormat("superscript")),s),node:null}}function sc(t){let e=t.style.fontWeight==="normal";return{forChild:n=>(M(n)&&!e&&n.toggleFormat("bold"),n),node:null}}function lc(t){let{parentElement:e}=t;t=t.textContent||"";let n=t.trim();return e!=null&&e.tagName.toLowerCase()==="pre"||n.length!==0||!t.includes(`
`)?{node:be(t)}:{node:null}}let ac={code:"code",em:"italic",i:"italic",strong:"bold",u:"underline"};function on(t){let e=ac[t.nodeName.toLowerCase()];return e===void 0?{node:null}:{forChild:n=>(M(n)&&n.toggleFormat(e),n),node:null}}function be(t=""){return new Xt(t)}function M(t){return t instanceof Xt}class Zt extends Et{static getType(){return"paragraph"}static clone(e){return new Zt(e.__key)}createDOM(e){let n=document.createElement("p");return e=tr(e.theme,"paragraph"),e!==void 0&&n.classList.add(...e),n}updateDOM(){return!1}static importDOM(){return{p:()=>({conversion:uc,priority:0})}}exportDOM(e){return{element:e}=super.exportDOM(e),e&&this.isEmpty()&&e.append(document.createElement("br")),{element:e}}static importJSON(e){let n=Ht();return n.setFormat(e.format),n.setIndent(e.indent),n.setDirection(e.direction),n}exportJSON(){return{...super.exportJSON(),type:"paragraph",version:1}}insertNewAfter(){let e=Ht(),n=this.getDirection();return e.setDirection(n),this.insertAfter(e),e}collapseAtStart(){let e=this.getChildren();if(e.length===0||M(e[0])&&e[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function uc(){return{node:Ht()}}function Ht(){return new Zt}function Fl(t,e,n,r){let i=t._keyToDOMMap;i.clear(),t._editorState=Xi(),t._pendingEditorState=r,t._compositionKey=null,t._dirtyType=0,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set,t._dirtyElements.clear(),t._normalizedNodes=new Set,t._updateTags=new Set,t._updates=[],r=t._observer,r!==null&&(r.disconnect(),t._observer=null),e!==null&&(e.textContent=""),n!==null&&(n.textContent="",i.set("root",n))}function cc(t){let e=new Map,n=new Set;return t.forEach(r=>{if(r=r.klass.importDOM!=null?r.klass.importDOM.bind(r.klass):null,r!=null&&!n.has(r)){n.add(r);var i=r();i!==null&&Object.keys(i).forEach(o=>{let s=e.get(o);s===void 0&&(s=[],e.set(o,s)),s.push(i[o])})}}),e}class dc{constructor(e,n,r,i,o,s){this._parentEditor=n,this._rootElement=null,this._editorState=e,this._compositionKey=this._pendingEditorState=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,mutation:new Map,readonly:new Set,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=i,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=gl(),this._onError=o,this._htmlConversions=s,this._headless=this._readOnly=!1}isComposing(){return this._compositionKey!=null}registerUpdateListener(e){let n=this._listeners.update;return n.add(e),()=>{n.delete(e)}}registerReadOnlyListener(e){let n=this._listeners.readonly;return n.add(e),()=>{n.delete(e)}}registerDecoratorListener(e){let n=this._listeners.decorator;return n.add(e),()=>{n.delete(e)}}registerTextContentListener(e){let n=this._listeners.textcontent;return n.add(e),()=>{n.delete(e)}}registerRootListener(e){let n=this._listeners.root;return e(this._rootElement,null),n.add(e),()=>{e(null,this._rootElement),n.delete(e)}}registerCommand(e,n,r){r===void 0&&D(35);let i=this._commands;i.has(e)||i.set(e,[new Set,new Set,new Set,new Set,new Set]);let o=i.get(e);o===void 0&&D(36);let s=o[r];return s.add(n),()=>{s.delete(n),o.every(l=>l.size===0)&&i.delete(e)}}registerMutationListener(e,n){this._nodes.get(e.getType())===void 0&&D(37);let r=this._listeners.mutation;return r.set(n,e),()=>{r.delete(n)}}registerNodeTransform(e,n){e=e.getType();let r=this._nodes.get(e);r===void 0&&D(37);let i=r.transforms;return i.add(n),Ku(this,e),()=>{i.delete(n)}}hasNodes(e){for(let n=0;n<e.length;n++){let r=e[n].getType();if(!this._nodes.has(r))return!1}return!0}dispatchCommand(e,n){return R(this,e,n)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){let n=this._rootElement;if(e!==n){var r=this._pendingEditorState||this._editorState;if(this._rootElement=e,Fl(this,n,e,r),n!==null&&!this._config.disableEvents){if(gn!==0&&(gn--,gn===0&&n.ownerDocument.removeEventListener("selectionchange",Rl)),r=n.__lexicalEditor,r!=null){if(r._parentEditor!==null){var i=Ui(r);i=i[i.length-1]._key,bt.get(i)===r&&bt.delete(i)}else bt.delete(r._key);n.__lexicalEditor=null}for(r=$l(n),i=0;i<r.length;i++)r[i]();n.__lexicalEventHandles=[]}e!==null&&(r=e.style,r.userSelect="text",r.whiteSpace="pre-wrap",r.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._dirtyType=2,al(this),this._updateTags.add("history-merge"),mt(this),this._config.disableEvents||Zu(e,this)),mn("root",this,!1,e,n)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,n){e.isEmpty()&&D(38),ll(this);let r=this._pendingEditorState,i=this._updateTags;n=n!==void 0?n.tag:null,r===null||r.isEmpty()||(n!=null&&i.add(n),mt(this)),this._pendingEditorState=e,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,n!=null&&i.add(n),mt(this)}parseEditorState(e,n){e=typeof e=="string"?JSON.parse(e):e;let r=Xi(),i=Me,o=ye,s=_e,l=this._dirtyElements,a=this._dirtyLeaves,u=this._cloneNotNeeded,c=this._dirtyType;this._dirtyElements=new Map,this._dirtyLeaves=new Set,this._cloneNotNeeded=new Set,this._dirtyType=0,Me=r,ye=!1,_e=this;try{qi(e.root,this._nodes),n&&n(),r._readOnly=!0}finally{this._dirtyElements=l,this._dirtyLeaves=a,this._cloneNotNeeded=u,this._dirtyType=c,Me=i,ye=o,_e=s}return r}update(e,n){Ze(this,e,n)}focus(e,n={}){let r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),Ze(this,()=>{let i=oe(),o=Tt();i!==null?i.dirty=!0:o.getChildrenSize()!==0&&(n.defaultSelection==="rootStart"?o.selectStart():o.selectEnd())},{onUpdate:()=>{r.removeAttribute("autocapitalize"),e&&e()}}))}blur(){var e=this._rootElement;e!==null&&e.blur(),e=window.getSelection(),e!==null&&e.removeAllRanges()}isReadOnly(){return this._readOnly}setReadOnly(e){this._readOnly!==e&&(this._readOnly=e,mn("readonly",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}class Bl extends Et{constructor(e,n){super(n),this.__colSpan=e}exportJSON(){return{...super.exportJSON(),colSpan:this.__colSpan}}}function zl(t){return t instanceof Bl}class jl extends Et{}function Kl(t){return t instanceof jl}class Wl extends Et{}function Hl(t){return t instanceof Wl}E.$createGridSelection=function(){let t=new et("root",0,"element"),e=new et("root",0,"element");return new br("root",t,e)};E.$createLineBreakNode=On;E.$createNodeSelection=function(){return new Pr(new Set)};E.$createParagraphNode=Ht;E.$createRangeSelection=function(){let t=new et("root",0,"element"),e=new et("root",0,"element");return new Jt(t,e,0)};E.$createTextNode=be;E.$getDecoratorNode=_l;E.$getNearestNodeFromDOMNode=Dr;E.$getNodeByKey=ie;E.$getPreviousSelection=Lr;E.$getRoot=Tt;E.$getSelection=oe;E.$isDecoratorNode=we;E.$isElementNode=w;E.$isGridCellNode=zl;E.$isGridNode=Kl;E.$isGridRowNode=Hl;E.$isGridSelection=Vi;E.$isLeafNode=dl;E.$isLineBreakNode=$n;E.$isNodeSelection=Gt;E.$isParagraphNode=function(t){return t instanceof Zt};E.$isRangeSelection=W;E.$isRootNode=De;E.$isTextNode=M;E.$nodesOfType=function(t){var e=tt();let n=e._readOnly,r=t.getType();e=e._nodeMap;let i=[];for(let[,o]of e)o instanceof t&&o.__type===r&&(n||o.isAttached())&&i.push(o);return i};E.$parseSerializedNode=function(t){return qi(t,te()._nodes)};E.$setCompositionKey=Ae;E.$setSelection=Dn;E.BLUR_COMMAND=il;E.CAN_REDO_COMMAND={};E.CAN_UNDO_COMMAND={};E.CLEAR_EDITOR_COMMAND={};E.CLEAR_HISTORY_COMMAND={};E.CLICK_COMMAND=js;E.COMMAND_PRIORITY_CRITICAL=4;E.COMMAND_PRIORITY_EDITOR=0;E.COMMAND_PRIORITY_HIGH=3;E.COMMAND_PRIORITY_LOW=1;E.COMMAND_PRIORITY_NORMAL=2;E.CONTROLLED_TEXT_INSERTION_COMMAND=It;E.COPY_COMMAND=Ki;E.CUT_COMMAND=Wi;E.DELETE_CHARACTER_COMMAND=xn;E.DELETE_LINE_COMMAND=Nn;E.DELETE_WORD_COMMAND=Cn;E.DRAGEND_COMMAND=nl;E.DRAGOVER_COMMAND=tl;E.DRAGSTART_COMMAND=el;E.DROP_COMMAND=Qs;E.DecoratorNode=bl;E.ElementNode=Et;E.FOCUS_COMMAND=rl;E.FORMAT_ELEMENT_COMMAND={};E.FORMAT_TEXT_COMMAND=ut;E.GridCellNode=Bl;E.GridNode=jl;E.GridRowNode=Wl;E.INDENT_CONTENT_COMMAND={};E.INSERT_LINE_BREAK_COMMAND=hn;E.INSERT_PARAGRAPH_COMMAND=hi;E.KEY_ARROW_DOWN_COMMAND=Js;E.KEY_ARROW_LEFT_COMMAND=Hs;E.KEY_ARROW_RIGHT_COMMAND=Ks;E.KEY_ARROW_UP_COMMAND=Ys;E.KEY_BACKSPACE_COMMAND=Vs;E.KEY_DELETE_COMMAND=Xs;E.KEY_ENTER_COMMAND=ar;E.KEY_ESCAPE_COMMAND=qs;E.KEY_MODIFIER_COMMAND=ol;E.KEY_SPACE_COMMAND=Gs;E.KEY_TAB_COMMAND=Zs;E.LineBreakNode=qt;E.MOVE_TO_END=Ws;E.MOVE_TO_START=Us;E.OUTDENT_CONTENT_COMMAND={};E.PASTE_COMMAND=Bi;E.ParagraphNode=Zt;E.REDO_COMMAND=ji;E.REMOVE_TEXT_COMMAND=gi;E.RootNode=Vt;E.SELECTION_CHANGE_COMMAND=zs;E.TextNode=Xt;E.UNDO_COMMAND=zi;E.VERSION="0.3.8";E.createCommand=function(){return{}};E.createEditor=function(t){var e=t||{},n=_e,r=e.theme||{};let i=t===void 0?n:e.parentEditor||null,o=e.disableEvents||!1,s=Xi(),l=e.namespace||(i!==null?i._config.namespace:gl()),a=e.editorState,u=[Vt,Xt,qt,Zt,...e.nodes||[]],c=e.onError;if(e=e.readOnly||!1,t===void 0&&n!==null)t=n._nodes;else for(t=new Map,n=0;n<u.length;n++){let d=u[n],h=d.getType();t.set(h,{klass:d,transforms:new Set})}return r=new dc(s,i,t,{disableEvents:o,namespace:l,theme:r},c||console.error,cc(t),e),a!==void 0&&(r._pendingEditorState=a,r._dirtyType=2),r};const fc=E;var O=fc,Go=nt,Ul=O,hr=ht,hc=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?hr.useLayoutEffect:hr.useEffect;let ti={tag:"history-merge"};function gc(t,e){if(e!=null&&e!==null)switch(typeof e){case"string":let n=t.parseEditorState(e);t.setEditorState(n,ti);break;case"object":t.setEditorState(e,ti);break;case"function":t.update(()=>{Ul.$getRoot().isEmpty()&&e(t)},ti)}}Ls.LexicalComposer=function({initialConfig:t,children:e}){let n=hr.useMemo(()=>{const{theme:r,namespace:i,editor__DEPRECATED:o,nodes:s,onError:l,editorState:a}=t,u=Go.createLexicalComposerContext(null,r);let c=o||null;if(c===null){const d=Ul.createEditor({namespace:i,nodes:s,onError:h=>l(h,d),readOnly:!0,theme:r});gc(d,a),c=d}return[c,u]},[]);return hc(()=>{let r=t.readOnly,[i]=n;i.setReadOnly(r||!1)},[]),hr.createElement(Go.LexicalComposerContext.Provider,{value:n},e)};const pc=Ls;var mc=pc,Yl={},rt={},$e=O;function Zi(t,e=!0){return t?!1:(t=Jl(),e&&(t=t.trim()),t==="")}function Jl(){return $e.$getRoot().getTextContent()}function Gl(t,e=!1){if(e||!Zi(t,!1)||(t=$e.$getRoot().getChildren(),e=t.length,1<e))return!1;for(let r=0;r<e;r++){var n=t[r];if($e.$isElementNode(n)){if(n.__type!=="paragraph"||n.__indent!==0)return!1;n=n.getChildren();let i=n.length;for(let o=0;o<i;o++)if(!$e.$isTextNode(n[r]))return!1}}return!0}rt.$canShowPlaceholder=Gl;rt.$canShowPlaceholderCurry=function(t,e=!1){return()=>Gl(t,e)};rt.$findNodeWithOffsetFromJoinedText=function(t,e,n,r){r=r.getChildren();let i=r.length,o=0,s=!1;for(let a=0;a<i&&!(o>e);++a){let u=r[a],c=$e.$isTextNode(u);var l=c?u.getTextContent().length:n;if(l=o+l,(s===!1&&o===t||o===0&&o===t||o<t&&t<=l)&&$e.$isTextNode(u))return{node:u,offset:t-o};o=l,s=c}return null};rt.$findTextIntersectionFromCharacters=function(t,e){var n=t.getFirstChild();t=0;e:for(;n!==null;){if($e.$isElementNode(n)){var r=n.getFirstChild();if(r!==null){n=r;continue}}else if($e.$isTextNode(n)){if(r=n.getTextContentSize(),t+r>e)return{node:n,offset:e-t};t+=r}if(r=n.getNextSibling(),r!==null)n=r;else{for(n=n.getParent();n!==null;){if(r=n.getNextSibling(),r!==null){n=r;continue e}n=n.getParent()}break}}return null};rt.$isRootTextContentEmpty=Zi;rt.$isRootTextContentEmptyCurry=function(t,e){return()=>Zi(t,e)};rt.$joinTextNodesInElementNode=function(t,e,n){let r="";t=t.getChildren();let i=t.length;for(let o=0;o<i;++o){let s=t[o];if($e.$isTextNode(s)){let l=s.getTextContent();if(s.is(n.node)){if(n.offset>l.length)throw Error("Minified Lexical error #2; visit https://lexical.dev/docs/error?code=2 for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");r+=s.getTextContent().substr(0,n.offset);break}else r+=l}else r+=e}return r};rt.$rootTextContent=Jl;rt.registerLexicalTextEntity=function(t,e,n,r){let i=s=>{const l=$e.$createTextNode(s.getTextContent());l.setFormat(s.getFormat()),s.replace(l)},o=t.registerNodeTransform($e.TextNode,s=>{if(s.isSimpleText()){var l=s.getPreviousSibling(),a=s.getTextContent(),u=s;if($e.$isTextNode(l)){var c=l.getTextContent(),d=e(c+a);if(l instanceof n){if(d===null||l.getLatest().__mode!==0){i(l);return}if(d=d.end-c.length,0<d){u=a.slice(0,d),u=c+u,l.select(),l.setTextContent(u),d===a.length?s.remove():(l=a.slice(d),s.setTextContent(l));return}}else if(d===null||d.start<c.length)return}for(;;){if(s=e(a),a=d=s===null?"":a.slice(s.end),d===""){if(c=u.getNextSibling(),$e.$isTextNode(c)){if(d=u.getTextContent()+c.getTextContent(),d=e(d),d===null){c instanceof n?i(c):c.markDirty();break}else if(d.start!==0)break}}else if(c=e(d),c!==null&&c.start===0)break;if(s===null)break;if(s.start===0&&$e.$isTextNode(l)&&l.isTextEntity())continue;let h;if(s.start===0?[h,u]=u.splitText(s.end):[,h,u]=u.splitText(s.start,s.end),s=r(h),h.replace(s),u==null)break}}});return t=t.registerNodeTransform(n,s=>{var l=s.getTextContent();const a=e(l);a===null||a.start!==0?i(s):l.length>a.end?s.splitText(a.end):(l=s.getPreviousSibling(),$e.$isTextNode(l)&&l.isTextEntity()&&(i(l),i(s)),l=s.getNextSibling(),$e.$isTextNode(l)&&l.isTextEntity()&&(i(l),s instanceof n&&i(s)))}),[o,t]};const _c=rt;var yc=_c,Je={},Re=O;function Vl(t){throw Error(`Minified Lexical error #${t}; visit https://lexical.dev/docs/error?code=${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function ql(t,e){for(;t!==Re.$getRoot()&&t!=null;){if(e(t))return t;t=t.getParent()}return null}function Xl(t,e,n,r,i){var o=n._nodes.get(t.__type);o===void 0&&Vl(5);for(var s in t){var l=t[s];if(l!=null&&typeof l=="object"&&(l=l.editorState,l!=null)){var a=Re.createEditor({namespace:l.namespace});a._nodes=n._nodes,a._parentEditor=n._parentEditor,a._pendingEditorState=Zl(a,l),t[s]=a}}if(o=o.klass,s=t.__key,t.__key=void 0,o=o.clone(t),t.__key=s,s=o.__key,i._nodeMap.set(s,o),o.__parent=r,Re.$isElementNode(o)){for(r=t.__children,l=0;l<r.length;l++)a=e.get(r[l]),a!==void 0&&(a=Xl(a,e,n,s,i).__key,o.__children.push(a));o.__indent=t.__indent,o.__format=t.__format,o.__dir=t.__dir}else Re.$isTextNode(o)&&(o.__format=t.__format,o.__style=t.__style,o.__mode=t.__mode,o.__detail=t.__detail);return o}function vc(t,e){let n=e._editorState.constructor,r=new Map,i=new n(r),o=new Map(t._nodeMap),s=o.get("root");t=e._updating;try{e._updating=!1,e.update(()=>{let l=e._dirtyElements,a=e._dirtyLeaves,u=e._dirtyType;e._dirtyElements=new Map,e._dirtyLeaves=new Set,e._dirtyType=0;try{Xl(s,o,e,null,i)}finally{e._dirtyElements=l,e._dirtyLeaves=a,e._dirtyType=u}})}finally{e._updating=t}return i._readOnly=!0,i}function Zl(t,e){return e=typeof e=="string"?JSON.parse(e):e,vc(e,t)}Je.$dfs=function(t,e){let n=[];t=(t||Re.$getRoot()).getLatest(),e=e||(Re.$isElementNode(t)?t.getLastDescendant():t);for(var r=t,i=0;(r=r.getParent())!==null;)i++;for(r=i;t!==null&&!t.is(e);)if(n.push({depth:r,node:t}),Re.$isElementNode(t)&&0<t.getChildrenSize())t=t.getFirstChild(),r++;else for(i=null;i===null&&t!==null;)i=t.getNextSibling(),i===null?(t=t.getParent(),r--):t=i;return t!==null&&t.is(e)&&n.push({depth:r,node:t}),n};Je.$findMatchingParent=ql;Je.$getNearestBlockElementAncestorOrThrow=function(t){return t=ql(t,e=>Re.$isElementNode(e)&&!e.isInline()),Re.$isElementNode(t)||Vl(4),t};Je.$getNearestNodeOfType=function(t,e){for(;t!=null;){if(t instanceof e)return t;t=t.getParent()}return null};Je.$insertBlockNode=function(t){var e=Re.$getSelection();return Re.$isRangeSelection(e)?e.focus.getNode().getTopLevelElementOrThrow().insertAfter(t):Re.$isNodeSelection(e)||Re.$isGridSelection(e)?(e=e.getNodes(),e[e.length-1].getTopLevelElementOrThrow().insertAfter(t)):Re.$getRoot().append(t),e=Re.$createParagraphNode(),t.insertAfter(e),e.select(),t.getLatest()};Je.$restoreEditorState=function(t,e){let n=new Map(e._nodeMap),r=t._pendingEditorState;r&&(r._nodeMap=n),t._dirtyType=2,t=e._selection,Re.$setSelection(t===null?null:t.clone())};Je.addClassNamesToElement=function(t,...e){e.forEach(n=>{typeof n=="string"&&t.classList.add(...n.split(" "))})};Je.mergeRegister=function(...t){return()=>{t.forEach(e=>e())}};Je.registerNestedElementResolver=function(t,e,n,r){return t.registerNodeTransform(e,i=>{e:{for(var o=i.getChildren(),s=0;s<o.length;s++)if(o[s]instanceof e){o=null;break e}for(o=i;o!==null;)if(s=o,o=o.getParent(),o instanceof e){o={child:s,parent:o};break e}o=null}if(o!==null){const{child:l,parent:a}=o;if(l.is(i)){if(r(a,i),i=l.getNextSiblings(),o=i.length,a.insertAfter(l),o!==0){s=n(a),l.insertAfter(s);for(let u=0;u<o;u++)s.append(i[u])}a.canBeEmpty()||a.getChildrenSize()!==0||a.remove()}}})};Je.removeClassNamesFromElement=function(t,...e){e.forEach(n=>{typeof n=="string"&&t.classList.remove(...n.split(" "))})};Je.unstable_convertLegacyJSONEditorState=Zl;const xc=Je;var Ue=xc,Ql={},Un=O;Ql.registerDragonSupport=function(t){let e=n=>{var r=t.getRootElement();if(document.activeElement===r&&(r=n.data,typeof r=="string")){try{var i=JSON.parse(r)}catch{return}if(i&&i.protocol==="nuanria_messaging"&&i.type==="request"&&(i=i.payload)&&i.functionId==="makeChanges"&&(i=i.args)){const[o,s,l,a,u]=i;t.update(()=>{const c=Un.$getSelection();if(Un.$isRangeSelection(c)){var d=c.anchor;let h=d.getNode(),g=0,f=0;Un.$isTextNode(h)&&0<=o&&0<=s&&(g=o,f=o+s,c.setTextNodeRange(h,g,h,f)),(g!==f||l!=="")&&(c.insertRawText(l),h=d.getNode()),Un.$isTextNode(h)&&(g=a,f=a+u,d=h.getTextContentSize(),g=g>d?d:g,f=f>d?d:f,c.setTextNodeRange(h,g,h,f)),n.stopImmediatePropagation()}})}}};return window.addEventListener("message",e,!0),()=>{window.removeEventListener("message",e,!0)}};const Cc=Ql;var Nc=Cc,gt={},In={},Qi={},xe={},P=O;let eo=new Map;function gr(t){t=t.getLatest();let e=t.constructor.clone(t);return e.__parent=t.__parent,P.$isElementNode(t)&&P.$isElementNode(e)?(e.__children=Array.from(t.__children),e.__format=t.__format,e.__indent=t.__indent,e.__dir=t.__dir):P.$isTextNode(t)&&P.$isTextNode(e)&&(e.__format=t.__format,e.__style=t.__style,e.__mode=t.__mode,e.__detail=t.__detail),e}function Vo(t,e,n,r,i,o){for(var s=e;t!==null;){for(e=t.getParent();e!==null&&e.excludeFromCopy("clone");)e=e.getParent();if(e===null)break;if(!P.$isElementNode(t)||!t.excludeFromCopy("clone")){let l=t.getKey(),a=o.get(l),u=a===void 0;if(u&&(a=gr(t),o.set(l,a)),!P.$isTextNode(a)||a.isSegmented()||a.isToken()?P.$isElementNode(a)&&(a.__children=a.__children.slice(r?s:0,r?void 0:(s||0)+1)):a.__text=a.__text.slice(r?s:0,r?n:s),P.$isRootNode(e)){u&&i.push(l);break}}s=o.get(e.getKey()),s=P.$isElementNode(s)?s.__children.indexOf(t.getKey()):t.getIndexWithinParent(),t=e}}function Sc(t){if(P.$isRangeSelection(t)){var e=t.anchor,n=t.focus;let[a,u]=t.getCharacterOffsets();if(t=t.getNodes(),t.length===0)return{nodeMap:[],range:[]};let c=t.length;var r=t[0],i=r.getParent();if(i!==null&&(!i.canBeEmpty()||P.$isRootNode(i))){var o=i.__children;if(o.length===c){for(var s=!0,l=0;l<o.length;l++)if(o[l]!==t[l].__key){s=!1;break}s&&(c++,t.push(i))}}for(i=t[c-1],e=e.isBefore(n),n=new Map,o=[],s=P.$isTextNode(r)&&c===1,Vo(r,e?a:u,s?e?u:a:void 0,!0,o,n),r=0;r<c;r++){l=t[r];let d=l.getKey();if(!(n.has(d)||P.$isElementNode(l)&&l.excludeFromCopy("clone"))){let h=gr(l);P.$isRootNode(l.getParent())&&o.push(l.getKey()),d!=="root"&&n.set(d,h)}}return Vo(i,s?void 0:e?u:a,void 0,!1,o,n),{nodeMap:Array.from(n.entries()),range:o}}if(P.$isGridSelection(t))return{nodeMap:t.getNodes().map(a=>{const u=a.getKey();return a=gr(a),[u,a]}),range:[t.gridKey]};throw Error("Minified Lexical error #1; visit https://lexical.dev/docs/error?code=1 for the full message or use the non-minified dev environment for full errors and additional helpful warnings.")}function to(t){return eo.get(t)||null}function sn(t,e){var n=to(t.getStyle());e=n?{...n,...e}:e,n="";for(r in e)r&&(n+=`${r}: ${e[r]};`);var r=n;t.setStyle(r),eo.set(r,e)}function ea(t,e,n,r){t.modify(e?"extend":"move",n,r)}function ta(t){return t=t.anchor.getNode(),(P.$isRootNode(t)?t:t.getParentOrThrow()).getDirection()==="rtl"}function Tc(t){for(;t!==null&&!P.$isRootNode(t);){let e=t.getLatest(),n=t.getParent();e.__children.length===0&&t.remove(!0),t=n}}function qo(t){for(;t!=null;){if(t.nodeType===Node.TEXT_NODE)return t;t=t.firstChild}return null}function Xo(t){let e=t.parentNode;if(e==null)throw Error("Should never happen");return[e,Array.from(e.childNodes).indexOf(t)]}xe.$addNodeStyle=function(t){t=t.getStyle();let e={};var n=t.split(";");for(let r of n)r!==""&&(n=r.split(":"),e[n[0].trim()]=n[1].trim());eo.set(t,e)};xe.$cloneContents=function(t){return Sc(t)};xe.$cloneWithProperties=gr;xe.$getSelectionStyleValueForProperty=function(t,e,n=""){let r=null,i=t.getNodes();var o=t.anchor,s=t.focus,l=t.isBackward();for(t=l?s.offset:o.offset,o=l?s.getNode():o.getNode(),s=0;s<i.length;s++){var a=i[s];if((s===0||t!==0||!a.is(o))&&P.$isTextNode(a)){l=e;var u=n;if(a=a.getStyle(),a=to(a),l=a!==null&&a[l]||u,r===null)r=l;else if(r!==l){r="";break}}}return r===null?n:r};xe.$isAtNodeEnd=function(t){return t.type==="text"?t.offset===t.getNode().getTextContentSize():t.offset===t.getNode().getChildrenSize()};xe.$isParentElementRTL=ta;xe.$moveCaretSelection=ea;xe.$moveCharacter=function(t,e,n){let r=ta(t);ea(t,e,n?!r:r,"character")};xe.$patchStyleText=function(t,e){var n=t.getNodes();let r=n.length-1,i=n[0],o=n[r];if(!t.isCollapsed()){var s=t.anchor,l=t.focus;t=i.getTextContent().length;var a=l.offset,u=s.offset;if(s=(l=s.isBefore(l))?u:a,l=l?a:u,s===i.getTextContentSize()){let c=i.getNextSibling();P.$isTextNode(c)&&(s=u=0,i=c)}if(i.is(o))P.$isTextNode(i)&&(s=u>a?a:u,l=u>a?u:a,s!==l&&(s===0&&l===t?(sn(i,e),i.select(s,l)):(n=i.splitText(s,l),n=s===0?n[0]:n[1],sn(n,e),n.select(0,l-s))));else for(P.$isTextNode(i)&&(s!==0&&(i=i.splitText(s)[1]),sn(i,e)),P.$isTextNode(o)&&(t=o.getTextContent().length,l!==t&&([o]=o.splitText(l)),l!==0&&sn(o,e)),t=1;t<r;t++)a=n[t],u=a.getKey(),P.$isTextNode(a)&&u!==i.getKey()&&u!==o.getKey()&&!a.isToken()&&sn(a,e)}};xe.$selectAll=function(t){let e=t.anchor;t=t.focus;var n=e.getNode().getTopLevelElementOrThrow().getParentOrThrow();let r=n.getFirstDescendant();n=n.getLastDescendant();let i="element",o="element",s=0;P.$isTextNode(r)?i="text":P.$isElementNode(r)||r===null||(r=r.getParentOrThrow()),P.$isTextNode(n)?(o="text",s=n.getTextContentSize()):P.$isElementNode(n)||n===null||(n=n.getParentOrThrow()),r&&n&&(e.set(r.getKey(),0,i),t.set(n.getKey(),s,o))};xe.$shouldOverrideDefaultCharacterSelection=function(t,e){return t=P.$getDecoratorNode(t.focus,e),P.$isDecoratorNode(t)&&!t.isIsolated()};xe.$sliceSelectedTextNodeContent=function(t,e){if(e.isSelected()&&!e.isSegmented()&&!e.isToken()&&(P.$isRangeSelection(t)||P.$isGridSelection(t))){var n=t.anchor.getNode(),r=t.focus.getNode(),i=e.is(n),o=e.is(r);if(i||o){i=t.isBackward();let[s,l]=t.getCharacterOffsets();t=n.is(r),o=e.is(i?r:n),r=e.is(i?n:r),n=0;let a;t?(n=s>l?l:s,a=s>l?s:l):o?(n=i?l:s,a=void 0):r&&(i=i?s:l,n=0,a=i),e.__text=e.__text.slice(n,a)}}return e};xe.$wrapLeafNodesInElements=function(t,e,n){let r=t.getNodes(),i=r.length;var o=t.anchor;if(i===0||i===1&&o.type==="element"&&o.getNode().getChildrenSize()===0){t=o.type==="text"?o.getNode().getParentOrThrow():o.getNode(),o=t.getChildren();let g=e();o.forEach(f=>g.append(f)),n&&(g=n.append(g)),t.replace(g)}else{var s=r[0],l=new Map;for(o=[],s=P.$isElementNode(s)?s:s.getParentOrThrow(),s.isInline()&&(s=s.getParentOrThrow());s!==null;){var a=s.getPreviousSibling();if(a!==null){s=a;break}if(s=s.getParentOrThrow(),P.$isRootNode(s))break}a=new Set;for(var u=0;u<i;u++){var c=r[u];P.$isElementNode(c)&&c.getChildrenSize()===0&&a.add(c.getKey())}var d=new Set;for(u=0;u<i;u++){var h=r[u];if(c=h.getParent(),c!==null&&c.isInline()&&(c=c.getParent()),c!==null&&P.$isLeafNode(h)&&!d.has(h.getKey())){if(h=c.getKey(),l.get(h)===void 0){let g=e();o.push(g),l.set(h,g),c.getChildren().forEach(f=>{g.append(f),d.add(f.getKey())}),Tc(c)}}else a.has(h.getKey())&&(o.push(e()),h.remove())}if(n)for(e=0;e<o.length;e++)n.append(o[e]);if(P.$isRootNode(s))if(e=s.getFirstChild(),P.$isElementNode(e)&&(s=e),e===null)if(n)s.append(n);else for(n=0;n<o.length;n++)s.append(o[n]);else if(n)e.insertBefore(n);else for(n=0;n<o.length;n++)e.insertBefore(o[n]);else if(n)s.insertAfter(n);else for(n=o.length-1;0<=n;n--)s.insertAfter(o[n]);n=P.$getPreviousSelection(),P.$isRangeSelection(n)&&n.anchor.getNode().isAttached()&&n.focus.getNode().isAttached()?P.$setSelection(n.clone()):t.dirty=!0}};xe.createDOMRange=function(t,e,n,r,i){let o=e.getKey(),s=r.getKey(),l=document.createRange(),a=t.getElementByKey(o);if(t=t.getElementByKey(s),P.$isTextNode(e)&&(a=qo(a)),P.$isTextNode(r)&&(t=qo(t)),e===void 0||r===void 0||a===null||t===null)return null;a.nodeName==="BR"&&([a,n]=Xo(a)),t.nodeName==="BR"&&([t,i]=Xo(t)),e=a.firstChild,a===t&&e!=null&&e.nodeName==="BR"&&n===0&&i===0&&(i=1);try{l.setStart(a,n),l.setEnd(t,i)}catch{return null}return!l.collapsed||n===i&&o===s||(l.setStart(t,i),l.setEnd(a,n)),l};xe.createRectsFromDOMRange=function(t,e){var n=t.getRootElement();if(n===null)return[];t=n.getBoundingClientRect(),n=getComputedStyle(n),n=parseFloat(n.paddingLeft)+parseFloat(n.paddingRight),e=Array.from(e.getClientRects());let r=e.length,i;for(let o=0;o<r;o++){let s=e[o],l=s.width+n===t.width;i&&i.top===s.top&&i.left===s.left&&i.width===s.width&&i.height===s.height||l?(e.splice(o--,1),r--):i=s}return e};xe.getStyleObjectFromCSS=to;xe.trimTextContentFromAnchor=function(t,e,n){let r=e.getNode();if(P.$isElementNode(r)){var i=r.getDescendantByIndex(e.offset);i!==null&&(r=i)}for(;0<n&&r!==null;){var o=r.getPreviousSibling(),s=0;if(o===null){i=r.getParentOrThrow();for(var l=i.getPreviousSibling();l===null;){if(i=i.getParent(),i===null){o=null;break}l=i.getPreviousSibling()}i!==null&&(s=i.isInline()?0:2,o=P.$isElementNode(l)?l.getLastDescendant():l)}let a=r.getTextContent();a===""&&P.$isElementNode(r)&&!r.isInline()&&(a=`

`),i=a.length,l=i-n;let u=a.slice(0,l);if(!P.$isTextNode(r)||n>=i)l=r.getParent(),r.remove(),l!=null&&l.getChildrenSize()===0&&l.remove(),n-=i+s,r=o;else{let c=r.getKey();o=t.getEditorState().read(()=>{const d=P.$getNodeByKey(c);return P.$isTextNode(d)&&d.isSimpleText()?d.getTextContent():null}),o!==null&&o!==a?(n=P.$getPreviousSelection(),i=r,r.isSimpleText()?r.setTextContent(o):(i=P.$createTextNode(o),r.replace(i)),P.$isRangeSelection(n)&&n.isCollapsed()&&(n=n.anchor.offset,i.select(n,n))):r.isSimpleText()?(o=e.key===c,s=e.offset,s<n&&(s=i),n=o?s-n:0,i=o?s:l,o&&n===0?([n]=r.splitText(n,i),n.remove()):([,n]=r.splitText(n,i),n.remove())):(n=P.$createTextNode(u),r.replace(n)),n=0}}};const Ec=xe;var xt=Ec,Zo=xt,Dt=O;function na(t,e,n,r){let i=e!=null?n.isSelected():!0,o=Dt.$isElementNode(n)&&n.excludeFromCopy("html"),s=Zo.$cloneWithProperties(n);s=Dt.$isTextNode(s)&&e!=null?Zo.$sliceSelectedTextNodeContent(e,s):s;let l=Dt.$isElementNode(s)?s.getChildren():[],{element:a,after:u}=s.exportDOM(t);if(!a)return!1;let c=new DocumentFragment;for(let d=0;d<l.length;d++){let h=l[d],g=na(t,e,h,c);!i&&Dt.$isElementNode(n)&&g&&n.extractWithChild(h,e,"html")&&(i=!0)}return i&&!o?(a.append(c),r.append(a),u&&(t=u.call(s,a))&&a.replaceWith(t)):r.append(c),i}let ra=new Set(["STYLE"]);function ia(t,e,n=new Map,r){let i=[];if(ra.has(t.nodeName))return i;let o=null;var s,{nodeName:l}=t,a=e._htmlConversions.get(l.toLowerCase());if(l=null,a!==void 0)for(s of a)a=s(t),a!==null&&(l===null||l.priority<a.priority)&&(l=a);if(l=(s=l!==null?l.conversion:null)?s(t):null,s=null,l!==null){if(s=l.after,o=l.node,o!==null){for(var[,u]of n)if(o=u(o,r),!o)break;o&&i.push(o)}l.forChild!=null&&n.set(t.nodeName,l.forChild)}for(t=t.childNodes,r=[],u=0;u<t.length;u++)r.push(...ia(t[u],e,new Map(n),o));return s!=null&&(r=s(r)),o==null?i=i.concat(r):Dt.$isElementNode(o)&&o.append(...r),i}Qi.$generateHtmlFromNodes=function(t,e){if(document==null||window==null)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let n=document.createElement("div"),r=Dt.$getRoot().getChildren();for(let i=0;i<r.length;i++){let o=r[i];e!==void 0&&na(t,e,o,n)}return n.innerHTML};Qi.$generateNodesFromDOM=function(t,e){let n=[];e=e.body?Array.from(e.body.childNodes):[];let r=e.length;for(let o=0;o<r;o++){var i=e[o];ra.has(i.nodeName)||(i=ia(i,t),i!==null&&(n=n.concat(i)))}return n};const kc=Qi;var wc=kc,Oe={},Q=O,Rn=Ue;function Pn(t){throw Error(`Minified Lexical error #${t}; visit https://lexical.dev/docs/error?code=${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function oa(t){let e=1;for(t=t.getParent();t!=null;){if(re(t)){if(t=t.getParent(),Y(t)){e++,t=t.getParent();continue}Pn(40)}break}return e}function Oi(t){t=t.getParent(),Y(t)||Pn(40);let e=t;for(;e!==null;)e=e.getParent(),Y(e)&&(t=e);return t}function sa(t){let e=[];t=t.getChildren().filter(re);for(let n=0;n<t.length;n++){let r=t[n],i=r.getFirstChild();Y(i)?e=e.concat(sa(i)):e.push(r)}return e}function $t(t){return re(t)&&Y(t.getFirstChild())}function Oc(t){for(;t.getNextSibling()==null&&t.getPreviousSibling()==null;){let e=t.getParent();if(e==null||!re(t)&&!Y(t))break;t=e}t.remove()}function Qo(t){return Ye().append(t)}function la(t,e){return re(t)&&(e.length===0||e.length===1&&t.is(e[0])&&t.getChildrenSize()===0)}function Ct(t,e){t.splice(t.getChildrenSize(),0,e)}function es(t,e){if(Y(t))return t;let n=t.getPreviousSibling(),r=t.getNextSibling(),i=Ye();return Ct(i,t.getChildren()),Y(n)&&e===n.getListType()?(n.append(i),t.remove(),Y(r)&&e===r.getListType()&&(Ct(n,r.getChildren()),r.remove()),n):Y(r)&&e===r.getListType()?(r.getFirstChildOrThrow().insertBefore(i),t.remove(),r):(e=Ke(e),e.append(i),t.replace(e),je(e),e)}function je(t,e){(e||t.getChildren()).forEach(n=>{let r=n.getValue();var i=n.getParent(),o=1;i!=null&&(Y(i)?o=i.getStart():Pn(44)),i=n.getPreviousSiblings();for(let s=0;s<i.length;s++){let l=i[s];re(l)&&!Y(l.getFirstChild())&&o++}r!==o&&n.setValue(o)})}function aa(t){let e=new Set;t.forEach(n=>{if(!$t(n)&&!e.has(n.getKey())){var r=n.getParent(),i=n.getNextSibling(),o=n.getPreviousSibling();if($t(i)&&$t(o))o=o.getFirstChild(),Y(o)&&(o.append(n),n=i.getFirstChild(),Y(n)&&(n=n.getChildren(),Ct(o,n),i.remove(),e.add(i.getKey())),je(o));else if($t(i))i=i.getFirstChild(),Y(i)&&(o=i.getFirstChild(),o!==null&&o.insertBefore(n),je(i));else if($t(o))i=o.getFirstChild(),Y(i)&&(i.append(n),je(i));else if(Y(r)){let s=Ye(),l=Ke(r.getListType());s.append(l),l.append(n),o?o.insertAfter(s):i?i.insertBefore(s):r.append(s)}Y(r)&&je(r)}})}function ua(t){t.forEach(e=>{if(!$t(e)){var n=e.getParent(),r=n?n.getParent():void 0,i=r?r.getParent():void 0;if(Y(i)&&re(r)&&Y(n)){var o=n?n.getFirstChild():void 0,s=n?n.getLastChild():void 0;if(e.is(o))r.insertBefore(e),n.isEmpty()&&r.remove();else if(e.is(s))r.insertAfter(e),n.isEmpty()&&r.remove();else{var l=n.getListType();o=Ye();let a=Ke(l);o.append(a),e.getPreviousSiblings().forEach(u=>a.append(u)),s=Ye(),l=Ke(l),s.append(l),Ct(l,e.getNextSiblings()),r.insertBefore(o),r.insertAfter(s),r.replace(e)}je(n),je(i)}}})}function ca(t){var e=Q.$getSelection();if(Q.$isRangeSelection(e)){var n=e.getNodes(),r=[];if(n.length===0&&n.push(e.anchor.getNode()),n.length===1){e:{for(n=n[0];n!==null;){if(re(n))break e;n=n.getParent()}n=null}n!==null&&(r=[n])}else{for(r=new Set,e=0;e<n.length;e++){let i=n[e];re(i)&&r.add(i)}r=Array.from(r)}0<r.length&&(t==="indent"?aa(r):ua(r))}}class Nt extends Q.ElementNode{static getType(){return"listitem"}static clone(e){return new Nt(e.__value,e.__checked,e.__key)}constructor(e,n,r){super(r),this.__value=e===void 0?1:e,this.__checked=n}createDOM(e){let n=document.createElement("li"),r=this.getParent();return Y(r)&&(je(r),ns(n,this,null,r)),n.value=this.__value,ts(n,e.theme,this),n}updateDOM(e,n,r){let i=this.getParent();return Y(i)&&(je(i),ns(n,this,e,i)),n.value=this.__value,ts(n,r.theme,this),!1}static importDOM(){return{li:()=>({conversion:$c,priority:0})}}static importJSON(e){let n=new Nt(e.value,e.checked);return n.setFormat(e.format),n.setIndent(e.indent),n.setDirection(e.direction),n}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),type:"listitem",value:this.getValue(),version:1}}append(...e){for(let n=0;n<e.length;n++){let r=e[n];if(Q.$isElementNode(r)&&this.canMergeWith(r)){let i=r.getChildren();this.append(...i),r.remove()}else super.append(r)}return this}replace(e){if(re(e))return super.replace(e);let n=this.getParentOrThrow();if(Y(n)){var r=n.__children;let o=r.length;var i=r.indexOf(this.__key);if(i===0)n.insertBefore(e);else if(i===o-1)n.insertAfter(e);else{r=Ke(n.getListType());let s=n.getChildren();for(i+=1;i<o;i++)r.append(s[i]);n.insertAfter(e),e.insertAfter(r)}this.remove(),o===1&&n.remove()}return e}insertAfter(e){var n=this.getParentOrThrow();Y(n)||Pn(39);var r=this.getNextSiblings();if(re(e))return n=super.insertAfter(e),e=e.getParentOrThrow(),Y(e)&&je(e),n;if(Y(e)&&e.getListType()===n.getListType()){for(n=e,e=e.getChildren(),r=e.length-1;0<=r;r--)n=e[r],this.insertAfter(n);return n}if(n.insertAfter(e),r.length!==0){let i=Ke(n.getListType());r.forEach(o=>i.append(o)),e.insertAfter(i)}return e}remove(e){let n=this.getNextSibling();super.remove(e),n!==null&&(e=n.getParent(),Y(e)&&je(e))}insertNewAfter(){let e=Ye(this.__checked==null?void 0:!1);return this.insertAfter(e),e}collapseAtStart(e){let n=Q.$createParagraphNode();this.getChildren().forEach(s=>n.append(s));var r=this.getParentOrThrow(),i=r.getParentOrThrow();let o=re(i);return r.getChildrenSize()===1?o?(r.remove(),i.select()):(r.replace(n),r=e.anchor,e=e.focus,i=n.getKey(),r.type==="element"&&r.getNode().is(this)&&r.set(i,r.offset,"element"),e.type==="element"&&e.getNode().is(this)&&e.set(i,e.offset,"element")):(r.insertBefore(n),this.remove()),!0}getValue(){return this.getLatest().__value}setValue(e){this.getWritable().__value=e}getChecked(){return this.getLatest().__checked}setChecked(e){this.getWritable().__checked=e}toggleChecked(){this.setChecked(!this.__checked)}getIndent(){var e=this.getParent();if(e===null)return this.getLatest().__indent;e=e.getParentOrThrow();let n=0;for(;re(e);)e=e.getParentOrThrow().getParentOrThrow(),n++;return n}setIndent(e){let n=this.getIndent();for(;n!==e;)n<e?(aa([this]),n++):(ua([this]),n--);return this}canIndent(){return!1}insertBefore(e){if(re(e)){let n=this.getParentOrThrow();if(Y(n)){let r=this.getNextSiblings();je(n,r)}}return super.insertBefore(e)}canInsertAfter(e){return re(e)}canReplaceWith(e){return re(e)}canMergeWith(e){return Q.$isParagraphNode(e)||re(e)}extractWithChild(e,n){if(!Q.$isRangeSelection(n))return!1;e=n.anchor.getNode();let r=n.focus.getNode();return this.isParentOf(e)&&this.isParentOf(r)&&this.getTextContent().length===n.getTextContent().length}}function ts(t,e,n){let r=[],i=[];var o=(e=e.list)?e.listitem:void 0;if(e&&e.nested)var s=e.nested.listitem;if(o!==void 0&&(o=o.split(" "),r.push(...o)),e){o=n.getParent(),o=Y(o)&&o.getListType()==="check";let l=n.getChecked();o&&!l||i.push(e.listitemUnchecked),o&&l||i.push(e.listitemChecked),o&&r.push(l?e.listitemChecked:e.listitemUnchecked)}s!==void 0&&(s=s.split(" "),n.getChildren().some(l=>Y(l))?r.push(...s):i.push(...s)),0<i.length&&Rn.removeClassNamesFromElement(t,...i),0<r.length&&Rn.addClassNamesToElement(t,...r)}function ns(t,e,n,r){r.getListType()==="check"?Y(e.getFirstChild())?(t.removeAttribute("role"),t.removeAttribute("tabIndex"),t.removeAttribute("aria-checked")):(t.setAttribute("role","checkbox"),t.setAttribute("tabIndex","-1"),n&&e.__checked===n.__checked||t.setAttribute("aria-checked",e.getChecked()?"true":"false")):e.getChecked()!=null&&e.setChecked(void 0)}function $c(){return{node:Ye()}}function Ye(t){return new Nt(void 0,t)}function re(t){return t instanceof Nt}class bn extends Q.ElementNode{static getType(){return"list"}static clone(e){return new bn(e.__listType||os[e.__tag],e.__start,e.__key)}constructor(e,n,r){super(r),this.__listType=e=os[e]||e,this.__tag=e==="number"?"ol":"ul",this.__start=n}getTag(){return this.__tag}getListType(){return this.__listType}getStart(){return this.__start}createDOM(e){let n=document.createElement(this.__tag);return this.__start!==1&&n.setAttribute("start",String(this.__start)),n.__lexicalListType=this.__listType,rs(n,e.theme,this),n}updateDOM(e,n,r){return e.__tag!==this.__tag?!0:(rs(n,r.theme,this),!1)}static importDOM(){return{ol:()=>({conversion:is,priority:0}),ul:()=>({conversion:is,priority:0})}}static importJSON(e){let n=Ke(e.listType,e.start);return n.setFormat(e.format),n.setIndent(e.indent),n.setDirection(e.direction),n}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag(),type:"list",version:1}}canBeEmpty(){return!1}canIndent(){return!1}append(...e){for(let r=0;r<e.length;r++){var n=e[r];if(re(n))super.append(n);else{let i=Ye();Y(n)||(n=Q.$createTextNode(n.getTextContent())),i.append(n),super.append(i)}}return this}extractWithChild(e){return re(e)}}function rs(t,e,n){let r=[],i=[];var o=e.list;if(o!==void 0){let l=o[`${n.__tag}Depth`]||[];e=oa(n)-1;let a=e%l.length;var s=l[a];let u=o[n.__tag],c;if(o=o.nested,o!==void 0&&o.list&&(c=o.list),u!==void 0&&r.push(u),s!==void 0)for(s=s.split(" "),r.push(...s),s=0;s<l.length;s++)s!==a&&i.push(n.__tag+s);c!==void 0&&(n=c.split(" "),1<e?r.push(...n):i.push(...n))}0<i.length&&Rn.removeClassNamesFromElement(t,...i),0<r.length&&Rn.addClassNamesToElement(t,...r)}function Rc(t){let e=[];for(let n=0;n<t.length;n++){let r=t[n];re(r)?(e.push(r),r.getChildren().forEach(i=>{Y(i)&&e.push(Qo(i))})):e.push(Qo(r))}return e}function is(t){t=t.nodeName.toLowerCase();let e=null;return t==="ol"?e=Ke("number"):t==="ul"&&(e=Ke("bullet")),{after:Rc,node:e}}let os={ol:"number",ul:"bullet"};function Ke(t,e=1){return new bn(t,e)}function Y(t){return t instanceof bn}let Ac=Q.createCommand(),Mc=Q.createCommand(),Dc=Q.createCommand(),Ic=Q.createCommand();Oe.$createListItemNode=Ye;Oe.$createListNode=Ke;Oe.$getListDepth=oa;Oe.$handleListInsertParagraph=function(){var t=Q.$getSelection();if(!Q.$isRangeSelection(t)||!t.isCollapsed()||(t=t.anchor.getNode(),!re(t)||t.getTextContent()!==""))return!1;var e=Oi(t),n=t.getParent();Y(n)||Pn(40);let r=n.getParent(),i;if(Q.$isRootNode(r))i=Q.$createParagraphNode(),e.insertAfter(i);else if(re(r))i=Ye(),r.insertAfter(i);else return!1;if(i.select(),e=t.getNextSiblings(),0<e.length){let o=Ke(n.getListType());Q.$isParagraphNode(i)?i.insertAfter(o):(n=Ye(),n.append(o),i.insertAfter(n)),e.forEach(s=>{s.remove(),o.append(s)})}return Oc(t),!0};Oe.$isListItemNode=re;Oe.$isListNode=Y;Oe.INSERT_CHECK_LIST_COMMAND=Dc;Oe.INSERT_ORDERED_LIST_COMMAND=Mc;Oe.INSERT_UNORDERED_LIST_COMMAND=Ac;Oe.ListItemNode=Nt;Oe.ListNode=bn;Oe.REMOVE_LIST_COMMAND=Ic;Oe.indentList=function(){ca("indent")};Oe.insertList=function(t,e){t.update(()=>{var n=Q.$getSelection();if(Q.$isRangeSelection(n)){var r=n.getNodes();n=n.anchor.getNode();var i=n.getParent();if(la(n,r))r=Ke(e),Q.$isRootNode(i)?(n.replace(r),n=Ye(),r.append(n)):re(n)&&(n=n.getParentOrThrow(),Ct(r,n.getChildren()),n.replace(r));else for(n=new Set,i=0;i<r.length;i++){var o=r[i];if(Q.$isElementNode(o)&&o.isEmpty()&&!n.has(o.getKey()))es(o,e);else if(Q.$isLeafNode(o))for(o=o.getParent();o!=null;){let l=o.getKey();if(Y(o)){if(!n.has(l)){var s=Ke(e);Ct(s,o.getChildren()),o.replace(s),je(s),n.add(l)}break}else{if(s=o.getParent(),Q.$isRootNode(s)&&!n.has(l)){n.add(l),es(o,e);break}o=s}}}}})};Oe.outdentList=function(){ca("outdent")};Oe.removeList=function(t){t.update(()=>{var e=Q.$getSelection();if(Q.$isRangeSelection(e)){let r=new Set,i=e.getNodes();if(e=e.anchor.getNode(),la(e,i))r.add(Oi(e));else for(e=0;e<i.length;e++){var n=i[e];Q.$isLeafNode(n)&&(n=Rn.$getNearestNodeOfType(n,Nt),n!=null&&r.add(Oi(n)))}r.forEach(o=>{let s=o;sa(o).forEach(l=>{if(l!=null){let a=Q.$createParagraphNode();Ct(a,l.getChildren()),s.insertAfter(a),s=a,l.remove()}}),o.remove()})}})};const Pc=Oe;var bc=Pc,da=wc,ss=bc,$i=xt,_n=Ue,j=O;function ot(t){throw Error(`Minified Lexical error #${t}; visit https://lexical.dev/docs/error?code=${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function ls(t,e,n){(j.$isGridSelection(n)||_n.$findMatchingParent(n.anchor.getNode(),r=>j.$isGridCellNode(r))!==null&&_n.$findMatchingParent(n.focus.getNode(),r=>j.$isGridCellNode(r))!==null)&&e.length===1&&j.$isGridNode(e[0])?Fc(e,n,!1,t):Lc(e,n)}function Lc(t,e){let n=[],r=null,i=null;for(let o=0;o<t.length;o++){let s=t[o];ss.$isListItemNode(s)?(i==null&&(i=ss.$createListNode("bullet"),n.push(i)),i.append(s)):(i!=null&&(i=null),j.$isDecoratorNode(s)&&!s.isTopLevel()||j.$isElementNode(s)&&s.isInline()||j.$isTextNode(s)||j.$isLineBreakNode(s)?(r===null&&(r=j.$createParagraphNode(),n.push(r)),r!==null&&r.append(s)):(n.push(s),r=null))}j.$isRangeSelection(e)?e.insertNodes(n):j.$isGridSelection(e)&&(t=e.anchor.getNode(),j.$isGridCellNode(t)||ot(41),t.append(...n))}function Fc(t,e,n,r){t.length===1&&j.$isGridNode(t[0])||ot(42);var i=t[0];t=i.getChildren(),n=i.getFirstChildOrThrow().getChildrenSize();var o=i.getChildrenSize(),s=_n.$findMatchingParent(e.anchor.getNode(),g=>j.$isGridCellNode(g));e=(i=s&&_n.$findMatchingParent(s,g=>j.$isGridRowNode(g)))&&_n.$findMatchingParent(i,g=>j.$isGridNode(g)),j.$isGridCellNode(s)&&j.$isGridRowNode(i)&&j.$isGridNode(e)||ot(43);var l=i.getIndexWithinParent(),a=Math.min(e.getChildrenSize()-1,l+o-1);o=s.getIndexWithinParent(),s=Math.min(i.getChildrenSize()-1,o+n-1),n=Math.min(o,s),i=Math.min(l,a),o=Math.max(o,s),l=Math.max(l,a),a=e.getChildren(),s=0;let u,c;for(let g=i;g<=l;g++){var d=a[g];j.$isGridRowNode(d)||ot(24);var h=t[s];j.$isGridRowNode(h)||ot(24),d=d.getChildren(),h=h.getChildren();let f=0;for(let y=n;y<=o;y++){let x=d[y];j.$isGridCellNode(x)||ot(25);let k=h[f];j.$isGridCellNode(k)||ot(25),g===i&&y===n?u=x.getKey():g===l&&y===o&&(c=x.getKey());let T=x.getChildren();k.getChildren().forEach(I=>{j.$isTextNode(I)&&j.$createParagraphNode().append(I),x.append(I)}),T.forEach(I=>I.remove()),f++}s++}u&&c&&(t=j.$createGridSelection(),t.set(e.getKey(),u,c),j.$setSelection(t),r.dispatchCommand(j.SELECTION_CHANGE_COMMAND,void 0))}function fa(t,e,n,r=[]){let i=e!=null?n.isSelected():!0,o=j.$isElementNode(n)&&n.excludeFromCopy("html");var s=$i.$cloneWithProperties(n);s=j.$isTextNode(s)&&e!=null?$i.$sliceSelectedTextNodeContent(e,s):s;let l=j.$isElementNode(s)?s.getChildren():[];var a=s;let u=a.exportJSON();u.type!==a.constructor.getType()&&ot(58);var c=u.children;for(j.$isElementNode(a)&&(Array.isArray(c)||ot(59)),j.$isTextNode(s)&&(u.text=s.__text),s=0;s<l.length;s++)a=l[s],c=fa(t,e,a,u.children),!i&&j.$isElementNode(n)&&c&&n.extractWithChild(a,e,"clone")&&(i=!0);if(i&&!o)r.push(u);else if(Array.isArray(u.children))for(t=0;t<u.children.length;t++)r.push(u.children[t]);return i}In.$getHtmlContent=function(t){let e=j.$getSelection();if(e==null)throw Error("Expected valid LexicalSelection");return j.$isRangeSelection(e)&&e.isCollapsed()||e.getNodes().length===0?null:da.$generateHtmlFromNodes(t,e)};In.$getLexicalContent=function(t){let e=j.$getSelection();if(e==null)throw Error("Expected valid LexicalSelection");if(j.$isRangeSelection(e)&&e.isCollapsed()||e.getNodes().length===0)return null;var n=JSON,r=n.stringify;let i=[],o=j.$getRoot().getChildren();for(let s=0;s<o.length;s++)fa(t,e,o[s],i);return r.call(n,{namespace:t._config.namespace,nodes:i})};In.$insertDataTransferForPlainText=function(t,e){t=t.getData("text/plain"),t!=null&&e.insertRawText(t)};In.$insertDataTransferForRichText=function(t,e,n){var r=t.getData("application/x-lexical-editor");if(r)try{var i=JSON.parse(r);if(i.namespace===n._config.namespace&&Array.isArray(i.nodes)){var o=i.nodes;for(r=[],i=0;i<o.length;i++){let l=j.$parseSerializedNode(o[i]);j.$isTextNode(l)&&$i.$addNodeStyle(l),r.push(l)}return ls(n,r,e)}}catch{}if(o=t.getData("text/html"))try{var s=new DOMParser().parseFromString(o,"text/html");return ls(n,da.$generateNodesFromDOM(n,s),e)}catch{}if(t=t.getData("text/plain"),t!=null)if(j.$isRangeSelection(e))for(t=t.split(/\r?\n/),n=t.length,s=0;s<n;s++)e.insertText(t[s]),s<n-1&&e.insertParagraph();else e.insertRawText(t)};const Bc=In;var zc=Bc,pr=zc,Yn=xt,Lt=Ue,_=O;let Qt=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",jc=Qt&&"documentMode"in document?document.documentMode:null;Qt&&/Mac|iPod|iPhone|iPad/.test(navigator.platform);Qt&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);let Kc=Qt&&"InputEvent"in window&&!jc?"getTargetRanges"in new window.InputEvent("input"):!1,Wc=Qt&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),Hc=Qt&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Jn={tag:"history-merge"};class Ln extends _.ElementNode{static getType(){return"quote"}static clone(e){return new Ln(e.__key)}constructor(e){super(e)}createDOM(e){let n=document.createElement("blockquote");return Lt.addClassNamesToElement(n,e.theme.quote),n}updateDOM(){return!1}static importDOM(){return{blockquote:()=>({conversion:Uc,priority:0})}}static importJSON(e){let n=no();return n.setFormat(e.format),n.setIndent(e.indent),n.setDirection(e.direction),n}exportJSON(){return{...super.exportJSON(),type:"quote"}}insertNewAfter(){let e=_.$createParagraphNode(),n=this.getDirection();return e.setDirection(n),this.insertAfter(e),e}collapseAtStart(){let e=_.$createParagraphNode();return this.getChildren().forEach(n=>e.append(n)),this.replace(e),!0}}function no(){return new Ln}class Fn extends _.ElementNode{static getType(){return"heading"}static clone(e){return new Fn(e.__tag,e.__key)}constructor(e,n){super(n),this.__tag=e}getTag(){return this.__tag}createDOM(e){let n=this.__tag,r=document.createElement(n);return e=e.theme.heading,e!==void 0&&Lt.addClassNamesToElement(r,e[n]),r}updateDOM(){return!1}static importDOM(){return{h1:()=>({conversion:wt,priority:0}),h2:()=>({conversion:wt,priority:0}),h3:()=>({conversion:wt,priority:0}),h4:()=>({conversion:wt,priority:0}),h5:()=>({conversion:wt,priority:0}),h6:()=>({conversion:wt,priority:0})}}static importJSON(e){let n=ro(e.tag);return n.setFormat(e.format),n.setIndent(e.indent),n.setDirection(e.direction),n}exportJSON(){return{...super.exportJSON(),tag:this.getTag(),type:"heading",version:1}}insertNewAfter(){let e=_.$createParagraphNode(),n=this.getDirection();return e.setDirection(n),this.insertAfter(e),e}collapseAtStart(){let e=_.$createParagraphNode();return this.getChildren().forEach(n=>e.append(n)),this.replace(e),!0}extractWithChild(){return!0}}function wt(t){t=t.nodeName.toLowerCase();let e=null;return(t==="h1"||t==="h2"||t==="h3"||t==="h4"||t==="h5"||t==="h6")&&(e=ro(t)),{node:e}}function Uc(){return{node:no()}}function ro(t){return new Fn(t)}function Yc(t,e){if(e!==null){if(e===void 0)t.update(()=>{var n=_.$getRoot();if(n.isEmpty()){let r=_.$createParagraphNode();n.append(r),n=document.activeElement,(_.$getSelection()!==null||n!==null&&n===t.getRootElement())&&r.select()}},Jn);else if(e!==null)switch(typeof e){case"string":let n=t.parseEditorState(e);t.setEditorState(n,Jn);break;case"object":t.setEditorState(e,Jn);break;case"function":t.update(()=>{_.$getRoot().isEmpty()&&e(t)},Jn)}}}function Jc(t,e){t.preventDefault(),e.update(()=>{let n=_.$getSelection(),r=t instanceof InputEvent?null:t.clipboardData;r!=null&&(_.$isRangeSelection(n)||_.$isGridSelection(n))&&pr.$insertDataTransferForRichText(r,n,e)})}function ha(t,e){t.preventDefault();var n=_.$getSelection();if(n!==null){t=t instanceof KeyboardEvent?null:t.clipboardData;let r=pr.$getHtmlContent(e);e=pr.$getLexicalContent(e),t!=null?(r!==null&&t.setData("text/html",r),e!==null&&t.setData("application/x-lexical-editor",e),n=n.getTextContent(),t.setData("text/plain",n)):(n=navigator.clipboard,n!=null&&(t=[new ClipboardItem({"text/html":new Blob([r],{type:"text/html"})})],n.write(t)))}}function Gc(t,e){ha(t,e),t=_.$getSelection(),_.$isRangeSelection(t)?t.removeText():_.$isNodeSelection(t)&&t.getNodes().forEach(n=>n.remove())}function as(t,e){var n=_.$getSelection();if(_.$isRangeSelection(n)){var r=new Set;n=n.getNodes();for(let o=0;o<n.length;o++){let s=n[o];var i=s.getKey();r.has(i)||(r.add(i),i=Lt.$getNearestBlockElementAncestorOrThrow(s),i.canInsertTab()?t(s):i.canIndent()&&e(i))}}}function us(t){return t=_.$getNearestNodeFromDOMNode(t),_.$isDecoratorNode(t)}gt.$createHeadingNode=ro;gt.$createQuoteNode=no;gt.$isHeadingNode=function(t){return t instanceof Fn};gt.$isQuoteNode=function(t){return t instanceof Ln};gt.HeadingNode=Fn;gt.QuoteNode=Ln;gt.registerRichText=function(t,e){let n=Lt.mergeRegister(t.registerCommand(_.CLICK_COMMAND,()=>{const r=_.$getSelection();return _.$isNodeSelection(r)?(r.clear(),!0):!1},0),t.registerCommand(_.DELETE_CHARACTER_COMMAND,r=>{const i=_.$getSelection();return _.$isRangeSelection(i)?(i.deleteCharacter(r),!0):!1},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.DELETE_WORD_COMMAND,r=>{const i=_.$getSelection();return _.$isRangeSelection(i)?(i.deleteWord(r),!0):!1},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.DELETE_LINE_COMMAND,r=>{const i=_.$getSelection();return _.$isRangeSelection(i)?(i.deleteLine(r),!0):!1},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.CONTROLLED_TEXT_INSERTION_COMMAND,r=>{const i=_.$getSelection();if(typeof r=="string")_.$isRangeSelection(i)?i.insertText(r):_.$isGridSelection(i);else{if(!_.$isRangeSelection(i)&&!_.$isGridSelection(i))return!1;const o=r.dataTransfer;o!=null?pr.$insertDataTransferForRichText(o,i,t):_.$isRangeSelection(i)&&(r=r.data)&&i.insertText(r)}return!0},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.REMOVE_TEXT_COMMAND,()=>{const r=_.$getSelection();return _.$isRangeSelection(r)?(r.removeText(),!0):!1},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.FORMAT_TEXT_COMMAND,r=>{const i=_.$getSelection();return _.$isRangeSelection(i)?(i.formatText(r),!0):!1},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.FORMAT_ELEMENT_COMMAND,r=>{var i=_.$getSelection();if(!_.$isRangeSelection(i)&&!_.$isNodeSelection(i))return!1;i=i.getNodes();for(const o of i)Lt.$getNearestBlockElementAncestorOrThrow(o).setFormat(r);return!0},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.INSERT_LINE_BREAK_COMMAND,r=>{const i=_.$getSelection();return _.$isRangeSelection(i)?(i.insertLineBreak(r),!0):!1},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.INSERT_PARAGRAPH_COMMAND,()=>{const r=_.$getSelection();return _.$isRangeSelection(r)?(r.insertParagraph(),!0):!1},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.INDENT_CONTENT_COMMAND,()=>(as(()=>{t.dispatchCommand(_.CONTROLLED_TEXT_INSERTION_COMMAND,"	")},r=>{const i=r.getIndent();i!==10&&r.setIndent(i+1)}),!0),_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.OUTDENT_CONTENT_COMMAND,()=>(as(r=>{_.$isTextNode(r)&&(r=r.getTextContent(),r[r.length-1]==="	"&&t.dispatchCommand(_.DELETE_CHARACTER_COMMAND,!0))},r=>{const i=r.getIndent();i!==0&&r.setIndent(i-1)}),!0),_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.KEY_ARROW_LEFT_COMMAND,r=>{const i=_.$getSelection();if(!_.$isRangeSelection(i))return!1;const o=r.shiftKey;return Yn.$shouldOverrideDefaultCharacterSelection(i,!0)?(r.preventDefault(),Yn.$moveCharacter(i,o,!0),!0):!1},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.KEY_ARROW_RIGHT_COMMAND,r=>{const i=_.$getSelection();if(!_.$isRangeSelection(i))return!1;const o=r.shiftKey;return Yn.$shouldOverrideDefaultCharacterSelection(i,!1)?(r.preventDefault(),Yn.$moveCharacter(i,o,!1),!0):!1},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.KEY_BACKSPACE_COMMAND,r=>{if(us(r.target))return!1;const i=_.$getSelection();return _.$isRangeSelection(i)?(r.preventDefault(),{anchor:r}=i,i.isCollapsed()&&r.offset===0&&0<Lt.$getNearestBlockElementAncestorOrThrow(r.getNode()).getIndent()?t.dispatchCommand(_.OUTDENT_CONTENT_COMMAND,void 0):t.dispatchCommand(_.DELETE_CHARACTER_COMMAND,!0)):!1},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.KEY_DELETE_COMMAND,r=>{if(us(r.target))return!1;const i=_.$getSelection();return _.$isRangeSelection(i)?(r.preventDefault(),t.dispatchCommand(_.DELETE_CHARACTER_COMMAND,!1)):!1},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.KEY_ENTER_COMMAND,r=>{const i=_.$getSelection();if(!_.$isRangeSelection(i))return!1;if(r!==null){if((Hc||Wc)&&Kc)return!1;if(r.preventDefault(),r.shiftKey)return t.dispatchCommand(_.INSERT_LINE_BREAK_COMMAND,!1)}return t.dispatchCommand(_.INSERT_PARAGRAPH_COMMAND,void 0)},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.KEY_TAB_COMMAND,r=>{const i=_.$getSelection();return _.$isRangeSelection(i)?(r.preventDefault(),t.dispatchCommand(r.shiftKey?_.OUTDENT_CONTENT_COMMAND:_.INDENT_CONTENT_COMMAND,void 0)):!1},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.KEY_ESCAPE_COMMAND,()=>{const r=_.$getSelection();return _.$isRangeSelection(r)?(t.blur(),!0):!1},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.DROP_COMMAND,r=>{const i=_.$getSelection();return _.$isRangeSelection(i)?(r.preventDefault(),!0):!1},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.DRAGSTART_COMMAND,r=>{const i=_.$getSelection();return _.$isRangeSelection(i)?(r.preventDefault(),!0):!1},_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.COPY_COMMAND,r=>(ha(r,t),!0),_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.CUT_COMMAND,r=>(Gc(r,t),!0),_.COMMAND_PRIORITY_EDITOR),t.registerCommand(_.PASTE_COMMAND,r=>{const i=_.$getSelection();return _.$isRangeSelection(i)||_.$isGridSelection(i)?(Jc(r,t),!0):!1},_.COMMAND_PRIORITY_EDITOR));return Yc(t,e),n};const Vc=gt;var qc=Vc,Xc=nt,ft=ht,Zc=yc,ga=Ue,cs=Es,Qc=Nc,ed=qc,io=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?ft.useLayoutEffect:ft.useEffect;function ds(t){return t.getEditorState().read(Zc.$canShowPlaceholderCurry(t.isComposing(),t.isReadOnly()))}function td(t){let[e,n]=ft.useState(()=>ds(t));return io(()=>{function r(){let i=ds(t);n(i)}return r(),ga.mergeRegister(t.registerUpdateListener(()=>{r()}),t.registerReadOnlyListener(()=>{r()}))},[t]),e}function nd(t){let[e,n]=ft.useState(()=>t.getDecorators());return io(()=>t.registerDecoratorListener(r=>{cs.flushSync(()=>{n(r)})}),[t]),ft.useEffect(()=>{n(t.getDecorators())},[t]),ft.useMemo(()=>{let r=[],i=Object.keys(e);for(let s=0;s<i.length;s++){var o=i[s];let l=e[o];o=t.getElementByKey(o),o!==null&&r.push(cs.createPortal(l,o))}return r},[e,t])}function rd(t,e){io(()=>ga.mergeRegister(ed.registerRichText(t,e),Qc.registerDragonSupport(t)),[t])}Yl.RichTextPlugin=function({contentEditable:t,placeholder:e,initialEditorState:n}){let[r]=Xc.useLexicalComposerContext(),i=td(r),o=nd(r);return rd(r,n),ft.createElement(ft.Fragment,null,t,i&&e,o)};const id=Yl;var od=id,pa={},sd=nt,yn=ht,ld=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?yn.useLayoutEffect:yn.useEffect;pa.ContentEditable=function({ariaActiveDescendantID:t,ariaAutoComplete:e,ariaControls:n,ariaDescribedBy:r,ariaExpanded:i,ariaLabel:o,ariaLabelledBy:s,ariaMultiline:l,ariaOwneeID:a,ariaRequired:u,autoCapitalize:c,autoComplete:d,autoCorrect:h,className:g,id:f,role:y="textbox",spellCheck:x=!0,style:k,tabIndex:T,testid:I}){let[L]=sd.useLexicalComposerContext(),[J,ee]=yn.useState(!0),Ce=yn.useCallback(ae=>{L.setRootElement(ae)},[L]);return ld(()=>(ee(L.isReadOnly()),L.registerReadOnlyListener(ae=>{ee(ae)})),[L]),yn.createElement("div",{"aria-activedescendant":J?null:t,"aria-autocomplete":J?null:e,"aria-controls":J?null:n,"aria-describedby":r,"aria-expanded":J?null:y==="combobox"?!!i:null,"aria-label":o,"aria-labelledby":s,"aria-multiline":l,"aria-owns":J?null:a,"aria-required":u,autoCapitalize:c!==void 0?String(c):void 0,autoComplete:d,autoCorrect:h!==void 0?String(h):void 0,className:g,contentEditable:!J,"data-testid":I,id:f,ref:Ce,role:J?void 0:y,spellCheck:x,style:k,tabIndex:T})};const ad=pa;var ud=ad,oo={},so={},cd=Ue,se=O;function dd(t,e,n,r,i){if(t===null||n.size===0&&r.size===0&&!i)return 0;var o=e._selection,s=t._selection;if(i)return 1;if(!(se.$isRangeSelection(o)&&se.$isRangeSelection(s)&&s.isCollapsed()&&o.isCollapsed()))return 0;i=e._nodeMap;let l=[];for(let a of n)n=i.get(a),n!==void 0&&l.push(n);for(let[a,u]of r)u&&(r=i.get(a),r===void 0||se.$isRootNode(r)||l.push(r));return l.length===0?0:1<l.length?(r=e._nodeMap,e=r.get(o.anchor.key),s=r.get(s.anchor.key),e&&s&&!t._nodeMap.has(e.__key)&&se.$isTextNode(e)&&e.__text.length===1&&o.anchor.offset===1?2:0):(e=l[0],t=t._nodeMap.get(e.__key),!se.$isTextNode(t)||!se.$isTextNode(e)||t.__mode!==e.__mode||(t=t.__text,e=e.__text,t===e)||(o=o.anchor,s=s.anchor,o.key!==s.key||o.type!=="text")?0:(o=o.offset,s=s.offset,t=e.length-t.length,t===1&&s===o-1?2:t===-1&&s===o+1?3:t===-1&&s===o?4:0))}function fd(t,e){let n=Date.now(),r=0;return(i,o,s,l,a,u)=>{let c=Date.now();if(u.has("historic"))return r=0,n=c,2;let d=dd(i,o,l,a,t.isComposing()),h=(()=>{var g=u.has("history-push");if(!g&&u.has("history-merge"))return 0;if(i===null)return 1;var f=o._selection;const y=i._selection;return 0<l.size||0<a.size?(f=s===null||s.editor===t,g===!1&&d!==0&&d===r&&c<n+e&&f||l.size===1&&(f=Array.from(l)[0],g=i._nodeMap.get(f),f=o._nodeMap.get(f),g=se.$isTextNode(g)&&se.$isTextNode(f)?g.__type===f.__type&&g.__text===f.__text&&g.__mode===f.__mode&&g.__detail===f.__detail&&g.__style===f.__style&&g.__format===f.__format:!1,g)?0:1):y===null&&f!==null?0:2})();return n=c,r=d,h}}so.createEmptyHistoryState=function(){return{current:null,redoStack:[],undoStack:[]}};so.registerHistory=function(t,e,n){let r=fd(t,n);n=({editorState:s,prevEditorState:l,dirtyLeaves:a,dirtyElements:u,tags:c})=>{const d=e.current,h=e.redoStack,g=e.undoStack,f=d===null?null:d.editorState;if(d===null||s!==f){if(a=r(l,s,d,a,u,c),a===1)h.length!==0&&(e.redoStack=[]),d!==null&&(g.push({...d,undoSelection:l.read(se.$getSelection)}),t.dispatchCommand(se.CAN_UNDO_COMMAND,!0));else if(a===2)return;e.current={editor:t,editorState:s}}};let i=cd.mergeRegister(t.registerCommand(se.UNDO_COMMAND,()=>{let s=e.redoStack,l=e.undoStack;if(l.length!==0){let a=e.current,u=l.pop();a!==null&&(s.push(a),t.dispatchCommand(se.CAN_REDO_COMMAND,!0)),l.length===0&&t.dispatchCommand(se.CAN_UNDO_COMMAND,!1),e.current=u||null,u&&u.editor.setEditorState(u.editorState.clone(u.undoSelection),{tag:"historic"})}return!0},se.COMMAND_PRIORITY_EDITOR),t.registerCommand(se.REDO_COMMAND,()=>{let s=e.redoStack;var l=e.undoStack;if(s.length!==0){let a=e.current;a!==null&&(l.push(a),t.dispatchCommand(se.CAN_UNDO_COMMAND,!0)),l=s.pop(),s.length===0&&t.dispatchCommand(se.CAN_REDO_COMMAND,!1),e.current=l||null,l&&l.editor.setEditorState(l.editorState,{tag:"historic"})}return!0},se.COMMAND_PRIORITY_EDITOR),t.registerCommand(se.CLEAR_EDITOR_COMMAND,()=>(e.undoStack=[],e.redoStack=[],e.current=null,!1),se.COMMAND_PRIORITY_EDITOR),t.registerCommand(se.CLEAR_HISTORY_COMMAND,()=>(e.undoStack=[],e.redoStack=[],e.current=null,!0),se.COMMAND_PRIORITY_EDITOR),t.registerUpdateListener(n)),o=t.registerUpdateListener(n);return()=>{i(),o()}};const hd=so;var gd=hd,pd=nt,Ri=gd,fs=ht;function md(t,e,n=1e3){let r=fs.useMemo(()=>e||Ri.createEmptyHistoryState(),[e]);fs.useEffect(()=>Ri.registerHistory(t,r,n),[n,t,r])}oo.createEmptyHistoryState=Ri.createEmptyHistoryState;oo.HistoryPlugin=function({externalHistoryState:t}){let[e]=pd.useLexicalComposerContext();return md(e,t),null};const _d=oo;var yd=_d,ma={},vd=nt,hs=ht,xd=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?hs.useLayoutEffect:hs.useEffect;ma.OnChangePlugin=function({ignoreInitialChange:t=!0,ignoreSelectionChange:e=!1,onChange:n}){let[r]=vd.useLexicalComposerContext();return xd(()=>{if(n)return r.registerUpdateListener(({editorState:i,dirtyElements:o,dirtyLeaves:s,prevEditorState:l})=>{e&&o.size===0&&s.size===0||t&&l.isEmpty()||n(i,r)})},[r,t,e,n]),null};const Cd=ma;var Nd=Cd;const zr=[{name:"\u9ED1\u8272",id:"black",sc:"#000000",fc:"#000000",bc:"#000000"},{name:"\u6DF1\u84DD\u8272",id:"dark_blue",sc:"#0000b2",fc:"#0000aa",bc:"#00002a"},{name:"\u6DF1\u7EFF\u8272",id:"dark_green",sc:"#14ab00",fc:"#00aa00",bc:"#002a00"},{name:"\u6E56\u84DD\u8272",id:"dark_aqua",sc:"#13aaab",fc:"#00aaaa",bc:"#002a2a"},{name:"\u6DF1\u7EA2\u8272",id:"dark_red",sc:"#a90400",fc:"#aa0000",bc:"#2a0000"},{name:"\u7D2B\u8272",id:"dark_purple",sc:"#a900b2",fc:"#aa00aa",bc:"#2a002a"},{name:"\u91D1\u8272",id:"gold",sc:"#feac00",fc:"#ffaa00",bc:"#2a2a00"},{name:"\u7070\u8272",id:"gray",sc:"#aaaaaa",fc:"#aaaaaa",bc:"#2a2a2a"},{name:"\u6DF1\u7070\u8272",id:"dark_gray",sc:"#555555",fc:"#555555",bc:"#151515"},{name:"\u84DD\u8272",id:"blue",sc:"#544cff",fc:"#5555ff",bc:"#15153f"},{name:"\u7EFF\u8272",id:"green",sc:"#5cff00",fc:"#55ff55",bc:"#153f15"},{name:"\u5929\u84DD\u8272",id:"aqua",sc:"#5bffff",fc:"#55ffff",bc:"#153f3f"},{name:"\u7EA2\u8272",id:"red",sc:"#fd5650",fc:"#ff5555",bc:"#3f1515"},{name:"\u7C89\u7EA2\u8272",id:"light_purple",sc:"#fd4dff",fc:"#ff55ff",bc:"#3f153f"},{name:"\u9EC4\u8272",id:"yellow",sc:"#ffff00",fc:"#ffff55",bc:"#3f3f15"},{name:"\u767D\u8272",id:"white",sc:"#ffffff",fc:"#ffffff",bc:"#3f3f3f"}];var jr={exports:{}},Kr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sd=ht,Td=Symbol.for("react.element"),Ed=Symbol.for("react.fragment"),kd=Object.prototype.hasOwnProperty,wd=Sd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Od={key:!0,ref:!0,__self:!0,__source:!0};function _a(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)kd.call(e,r)&&!Od.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Td,type:t,key:o,ref:s,props:i,_owner:wd.current}}Kr.Fragment=Ed;Kr.jsx=_a;Kr.jsxs=_a;jr.exports=Kr;const m=jr.exports.jsx,le=jr.exports.jsxs,lo=jr.exports.Fragment,$d=zr.map(t=>t.fc),ln=214,gs=150;function ps(t){const[e,n]=React.useState(Ot("hex",t.color)),[r,i]=React.useState(t.color),o=React.useRef(null),[s,l]=React.useState(!1),a=React.useMemo(()=>({x:e.hsv.s/100*ln,y:(100-e.hsv.v)/100*gs}),[e.hsv.s,e.hsv.v]),u=React.useMemo(()=>({x:e.hsv.h/360*ln}),[e.hsv]),c=f=>{var x;const y=f.target.value;if(i(y),/^#[0-9A-Fa-f]{6}$/i.test(y)){const k=Ot("hex",y);n(k),(x=t.onChange)==null||x.call(t,k.hex)}},d=({x:f,y})=>{var T;const x={...e.hsv,s:f/ln*100,v:100-y/gs*100},k=Ot("hsv",x);n(k),i(k.hex),(T=t.onChange)==null||T.call(t,k.hex)},h=({x:f})=>{var k;const y={...e.hsv,h:f/ln*360},x=Ot("hsv",y);n(x),i(x.hex),(k=t.onChange)==null||k.call(t,x.hex)};React.useEffect(()=>{if(t.color===void 0)return;const f=Ot("hex",t.color);n(f),i(f.hex)},[t.color]);const g=f=>{l(f)};return m(antd.Dropdown,{className:"dropdown",onVisibleChange:g,visible:s,overlay:le("div",{className:"color-picker-wrapper",style:{width:ln},onClick:f=>{f.preventDefault()},ref:o,children:[m(antd.Input,{prefix:"Hex",onChange:c,value:r}),m("div",{className:"color-picker-basic-color",children:$d.map((f,y)=>m("button",{title:zr[y].id,className:f===e.hex?" active":"",style:{backgroundColor:f},onClick:()=>{var k;i(f);const x=Ot("hex",f);n(x),(k=t.onChange)==null||k.call(t,x.hex)}},f))}),m(ms,{className:"color-picker-saturation",style:{backgroundColor:`hsl(${e.hsv.h}, 100%, 50%)`},onChange:d,children:m("div",{className:"color-picker-saturation_cursor",style:{backgroundColor:e.hex,left:a.x,top:a.y}})}),m(ms,{className:"color-picker-hue",onChange:h,children:m("div",{className:"color-picker-hue_cursor",style:{backgroundColor:`hsl(${e.hsv.h}, 100%, 50%)`,left:u.x}})}),m("div",{className:"color-picker-color",style:{backgroundColor:e.hex}})]}),children:t.children})}function ms({className:t,style:e,onChange:n,children:r}){const i=React.useRef(null),o=l=>{if(i.current){const{current:a}=i,{width:u,height:c,left:d,top:h}=a.getBoundingClientRect(),g=_s(l.clientX-d,u,0),f=_s(l.clientY-h,c,0);n({x:g,y:f})}};return m("div",{ref:i,className:t,style:e,onMouseDown:l=>{if(l.button!==0)return;o(l);const a=c=>{o(c)},u=c=>{document.removeEventListener("mousemove",a,!1),document.removeEventListener("mouseup",u,!1),o(c)};document.addEventListener("mousemove",a,!1),document.addEventListener("mouseup",u,!1)},children:r})}function _s(t,e,n){return t>e?e:t<n?n:t}function ys(t){if(t.startsWith("#")){if(t.length===4||t.length===5)return t=t.split("").map((e,n)=>n?e+e:"#").join(""),t;if(t.length===7||t.length===9)return t}else{const e=document.createElement("canvas").getContext("2d");if(!e)throw new Error("2d context not supported or canvas already initialized");return e.fillStyle=t,e.fillStyle}return"#000000"}function vs(t){const e=(t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(n,r,i,o)=>"#"+r+r+i+i+o+o).substring(1).match(/.{2}/g)||[]).map(n=>parseInt(n,16));return{b:e[2],g:e[1],r:e[0]}}function ni({r:t,g:e,b:n}){t/=255,e/=255,n/=255;const r=Math.max(t,e,n),i=r-Math.min(t,e,n),o=i?(r===t?(e-n)/i+(e<n?6:0):r===e?2+(n-t)/i:4+(t-e)/i)*60:0,s=r?i/r*100:0,l=r*100;return{h:o,s,v:l}}function Rd({h:t,s:e,v:n}){e/=100,n/=100;const r=~~(t/60),i=t/60-r,o=n*(1-e),s=n*(1-e*i),l=n*(1-e*(1-i)),a=r%6,u=Math.round([n,s,o,o,l,n][a]*255),c=Math.round([l,n,n,s,o,o][a]*255);return{b:Math.round([o,o,l,n,n,s][a]*255),g:c,r:u}}function xs({b:t,g:e,r:n}){return"#"+[n,e,t].map(r=>r.toString(16).padStart(2,"0")).join("")}function Ot(t,e){let n=ys("#121212"),r=vs(n),i=ni(r);return t==="hex"?(n=ys(e),r=vs(n),i=ni(r)):t==="rgb"?(r=e,n=xs(r),i=ni(r)):t==="hsv"&&(i=e,r=Rd(i),n=xs(r)),{hex:n,hsv:i,rgb:r}}var kt={},_t=O,Gn=Ue;class Bn extends _t.ElementNode{static getType(){return"mark"}static clone(e){return new Bn(Array.from(e.__ids),e.__key)}static importDOM(){return null}static importJSON(e){let n=mr(e.ids);return n.setFormat(e.format),n.setIndent(e.indent),n.setDirection(e.direction),n}exportJSON(){return{...super.exportJSON(),ids:this.getIDs(),type:"mark",version:1}}constructor(e,n){super(n),this.__ids=e||[]}createDOM(e){let n=document.createElement("mark");return Gn.addClassNamesToElement(n,e.theme.mark),1<this.__ids.length&&Gn.addClassNamesToElement(n,e.theme.markOverlap),n}updateDOM(e,n,r){e=e.__ids.length;let i=this.__ids.length;return r=r.theme.markOverlap,e!==i&&(e===1?i===2&&Gn.addClassNamesToElement(n,r):i===1&&Gn.removeClassNamesFromElement(n,r)),!1}hasID(e){let n=this.getIDs();for(let r=0;r<n.length;r++)if(e===n[r])return!0;return!1}getIDs(){let e=this.getLatest();return Ft(e)?e.__ids:[]}addID(e){var n=this.getWritable();if(Ft(n)){let r=n.__ids;for(n.__ids=r,n=0;n<r.length;n++)if(e===r[n])return;r.push(e)}}deleteID(e){var n=this.getWritable();if(Ft(n)){let r=n.__ids;for(n.__ids=r,n=0;n<r.length;n++)if(e===r[n]){r.splice(n,1);break}}}insertNewAfter(e){if(e=this.getParentOrThrow().insertNewAfter(e),_t.$isElementNode(e)){let n=mr(this.__ids);return e.append(n),n}return null}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,n,r){if(!_t.$isRangeSelection(n)||r==="html")return!1;let i=n.anchor,o=n.focus;return e=i.getNode(),r=o.getNode(),n=n.isBackward()?i.offset-o.offset:o.offset-i.offset,this.isParentOf(e)&&this.isParentOf(r)&&this.getTextContent().length===n}excludeFromCopy(e){return e!=="clone"}}function mr(t){return new Bn(t)}function Ft(t){return t instanceof Bn}kt.$createMarkNode=mr;kt.$getMarkIDs=function(t,e){for(;t!==null;){if(Ft(t))return t.getIDs();if(_t.$isTextNode(t)&&e===t.getTextContentSize()){let n=t.getNextSibling();if(Ft(n))return n.getIDs()}t=t.getParent()}return null};kt.$isMarkNode=Ft;kt.$unwrapMarkNode=function(t){let e=t.getChildren(),n=null;for(let r=0;r<e.length;r++){let i=e[r];n===null?t.insertBefore(i):n.insertAfter(i),n=i}t.remove()};kt.$wrapSelectionInMarkNode=function(t,e,n){let r=t.getNodes();var i=t.anchor.offset,o=t.focus.offset;t=r.length;let s=e?o:i;e=e?i:o;let l,a;for(i=0;i<t;i++){var u=r[i];if(_t.$isElementNode(a)&&a.isParentOf(u))continue;o=i===0;let d=i===t-1;var c=null;if(_t.$isTextNode(u)){c=u.getTextContentSize();let h=o?s:0,g=d?e:c;if(h===0&&g===0)continue;u=u.splitText(h,g),c=1<u.length&&(u.length===3||o&&!d||g===c)?u[1]:u[0]}else _t.$isElementNode(u)&&u.isInline()&&(c=u);c!==null?c&&c.is(l)||(o=c.getParent(),o!=null&&o.is(l)||(a=void 0),l=o,a===void 0&&(a=mr([n]),c.insertBefore(a)),a.append(c)):a=l=void 0}};kt.MarkNode=Bn;const Ad=kt;var ne=Ad;function An(){return Math.random().toString(36).slice(2)}function Md(t){navigator.clipboard.writeText(t)}function Dd(t,e){return{...t,...e}}function Vn(){return dayjs().format("YYYY-MM-DD HH:mm:ss")}function Id(t){return JSON.parse(JSON.stringify(t))}function ya(t){return t&&typeof t=="object"}function Cs(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function ao(t,e){return window.addEventListener(t,e),()=>window.removeEventListener(t,e)}function uo(t,e){if(t===e)return!0;if(t===null||e===null)return!1;let n=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(e);return n.length===r.length?n.every(i=>typeof t[i]=="object"?uo(t[i],e[i]):t[i]===e[i]):!1}function Ns(t){return!!t&&!Object.keys(t).length}function Ss(t){return t.replace(/(\\.)/g,"\\$1").replace(/(')/g,"\\$1")}function va(t){return t.replace(/(\\\\.)/g,(e,n)=>n.slice(1)).replace(/(\\')/g,(e,n)=>n.slice(1))}function Ts(t=An()){return{id:t,type:"thread"}}const Pd=[{id:"key.jump",name:"",en:"Jump"},{id:"key.sneak",name:"",en:"Sneak"},{id:"key.sprint",name:"",en:"Sprint"},{id:"key.left",name:"",en:"Strafe Left"},{id:"key.right",name:"",en:"Strafe Right"},{id:"key.back",name:"",en:"Walk Backward"},{id:"key.forward",name:"",en:"Walk Forward"},{id:"key.attack",name:"",en:"Attack/Destroy"},{id:"key.pickItem",name:"",en:"Pick Block"},{id:"key.use",name:"",en:"Use Item/Place Block"},{id:"key.drop",name:"",en:"Drop Selected Item"},{id:"key.hotbar.1",name:"",en:"Hotbar Slot 1"},{id:"key.hotbar.2",name:"",en:"Hotbar Slot 2"},{id:"key.hotbar.3",name:"",en:"Hotbar Slot 3"},{id:"key.hotbar.4",name:"",en:"Hotbar Slot 4"},{id:"key.hotbar.5",name:"",en:"Hotbar Slot 5"},{id:"key.hotbar.6",name:"",en:"Hotbar Slot 6"},{id:"key.hotbar.7",name:"",en:"Hotbar Slot 7"},{id:"key.hotbar.8",name:"",en:"Hotbar Slot 8"},{id:"key.hotbar.9",name:"",en:"Hotbar Slot 9"},{id:"key.inventory",name:"",en:"Open/Close Inventory"},{id:"key.swapOffhand",name:"",en:"Swap Items In Hands"},{id:"key.loadToolbarActivator",name:"",en:"Load Toolbar Activator"},{id:"key.saveToolbarActivator",name:"",en:"Save Toolbar Activator"},{id:"key.playerlist",name:"",en:"List Players"},{id:"key.chat",name:"",en:"Open Chat"},{id:"key.command",name:"",en:"Open Command"},{id:"key.socialInteractions",name:"",en:"Social Interactions Screen"},{id:"key.advancements",name:"",en:"Advancements"},{id:"key.spectatorOutlines",name:"",en:"Highlight Players"},{id:"key.screenshot",name:"",en:"Take Screenshot"},{id:"key.smoothCamera",name:"",en:"Toggle Cinematic Camera"},{id:"key.fullscreen",name:"",en:"Toggle Fullscreen"},{id:"key.togglePerspective",name:"",en:"Toggle Perspective"}];function xa(t=An()){return{id:t,type:"text",clickEvent:{action:"run_command",value:""},hoverEvent:{action:"show_text",value:""},score:{objective:"",name:"*"},nbt:{type:"block",value:"",path:"",interpret:!1,separator:""},translate:{translate:"",with:""}}}const Ca={tellraw:"/tellraw @p %s",title:"/title @p title %s",sign:"/give @p oak_sign{BlockEntityTag:{%s}}",book:'/give @p written_book{pages:[%s],title:"",author:"made by JText Editor"}'},co={jsonList:[],jsonIndex:-1,currentJson:null,width:100,bgColor:"#fff",tplMap:Ca,tplType:"tellraw",trigger:""},en=React.createContext([co,()=>{}]);function bd(t,e){const n=r=>{let i=typeof r=="function"?r(t):r;return{...t,...i||{}}};switch(e.type){case"Reset":return co;case"Load":return e.state;case"UpdateCurrentJson":return n({currentJson:e.currentJson});case"AddJson":return n(({jsonList:r})=>({jsonList:[...r,e.json]}));case"UpdateJson":return n(({jsonList:r})=>{const i=[...r];return i[t.jsonIndex]=e.json,{jsonList:i}});case"UpdateJsonIndex":return n({jsonIndex:e.index});case"UpdateTrigger":return n({trigger:An()});case"AddNodeKey":return n(({currentJson:r})=>{if(r)return{currentJson:{...r,nodeKeys:[...r.nodeKeys,e.nodeKey]}}});case"RemoveJsonByIndex":return n(({jsonList:r})=>{const i=[...r];return i.splice(e.index,1),{jsonList:i}});case"MoveJsonItem":return n(({jsonList:r})=>{const i=[...r];return i.splice(e.index+e.offset,0,...i.splice(e.index,1)),{jsonList:i}});case"UpdateWidth":return n({width:e.width});case"UpdateBgColor":return n({bgColor:e.bgColor});case"UpdateTplMap":return n({tplMap:e.tplMap});case"UpdateTplType":return n({tplType:e.tplType});default:return t}}function Ld(){return React.useReducer(bd,co)}function Fd(t){return t.value.type==="nbt"?le("div",{children:[m("div",{style:{marginBottom:10},children:m(antd.Input,{spellCheck:!1,allowClear:!0,placeholder:"\u5FC5\u586B\u9879\uFF0C\u8BF7\u8F93\u5165",value:t.value.nbt.value,onChange:e=>{const n=e.target.value;t.onChange({nbt:{...t.value.nbt,value:n}})},addonBefore:le(antd.Select,{defaultValue:"entity",value:t.value.nbt.type,onChange:e=>{t.onChange({nbt:{...t.value.nbt,type:e}})},style:{width:100},children:[m(antd.Select.Option,{value:"block",children:"block"}),m(antd.Select.Option,{value:"entity",children:"entity"}),m(antd.Select.Option,{value:"storage",children:"storage"})]})})}),m("div",{style:{marginBottom:10},children:m(antd.Input,{allowClear:!0,value:t.value.nbt.path,spellCheck:!1,onChange:e=>{const n=e.target.value;t.onChange({nbt:{...t.value.nbt,path:n}})},addonBefore:m("div",{style:{width:78,textAlign:"center"},children:"nbt"}),placeholder:"\u5FC5\u586B\u9879\uFF0Cnbt path"})}),m("div",{style:{marginBottom:10},children:m(antd.Input,{allowClear:!0,value:t.value.nbt.separator,spellCheck:!1,onChange:e=>{const n=e.target.value;t.onChange({nbt:{...t.value.nbt,separator:n}})},addonBefore:m("div",{style:{width:78,textAlign:"left"},children:"separator"}),placeholder:"\u9009\u586B"})}),m("div",{children:m(antd.Checkbox,{checked:t.value.nbt.interpret,onChange:e=>{const n=e.target.checked;t.onChange({nbt:{...t.value.nbt,interpret:n}})},children:"interpret"})})]}):t.value.type==="score"?le("div",{children:[m("div",{style:{marginBottom:10},children:m(antd.Input,{spellCheck:!1,placeholder:"\u5FC5\u586B\u9879\uFF0C\u8BF7\u8F93\u5165",allowClear:!0,addonBefore:m("div",{style:{width:78,textAlign:"left"},children:"name"}),value:t.value.score.name,onChange:e=>{const n=e.target.value;t.onChange({score:{...t.value.score,name:n}})}})}),m("div",{children:m(antd.Input,{spellCheck:!1,allowClear:!0,placeholder:"\u5FC5\u586B",value:t.value.score.objective,onChange:e=>{const n=e.target.value;t.onChange({score:{...t.value.score,objective:n}})},addonBefore:m("div",{style:{width:78,textAlign:"left"},children:"objective"})},"score")})]}):t.value.type==="selector"?m(antd.Input,{spellCheck:!1,placeholder:"\u5FC5\u586B\u9879\uFF0C\u8BF7\u8F93\u5165",allowClear:!0,addonBefore:m("div",{style:{width:78,textAlign:"left"},children:"selector"}),value:t.value.selector,onChange:e=>{const n=e.target.value;t.onChange({selector:n})}}):t.value.type==="keybind"?m(antd.Select,{placeholder:"\u5FC5\u586B\u9879\uFF0C\u8BF7\u9009\u62E9",allowClear:!0,style:{width:"100%"},showSearch:!0,value:t.value.keybind,onChange:e=>{t.onChange({keybind:e})},children:Pd.map(e=>le(antd.Select.Option,{title:e.name+e.en,value:e.id,children:[e.id," -- ",e.en]},e.id))}):t.value.type==="translate"?le("div",{children:[m(antd.Input,{style:{marginBottom:10},spellCheck:!1,allowClear:!0,placeholder:"\u5FC5\u586B\uFF0C\u4F7F\u7528%s\u6216%n$s\u505A\u5360\u4F4D\u66FF\u6362",value:t.value.translate.translate,onChange:e=>{const n=e.target.value;t.onChange({translate:{...t.value.translate,translate:n}})},addonBefore:m("div",{style:{width:78,textAlign:"left"},children:"translate"})},"score"),m(antd.Input,{spellCheck:!1,allowClear:!0,placeholder:"\u9009\u586B",value:t.value.translate.with,onChange:e=>{t.onChange({translate:{...t.value.translate,with:e.target.value}})},addonBefore:m("div",{style:{width:78,textAlign:"left"},children:"with"})},"score")]}):null}const Bd=St.div`
    z-index: 10;
    display: block;
    position: fixed;
    width: 600px;
    padding: 16px;
    border-radius: 8px;
    background-color: white;
    box-shadow: 0 0 5px #0000001a;
    animation: enter .35s ease-out 1;
    &::before {
        content: "";
        position: absolute;
        width: 0;
        height: 0;
        margin-left: .5em;
        right: -1em;
        top: 0;
        left: calc(50% + .25em);
        box-sizing: border-box;
        border: .5em solid black;
        border-color: transparent transparent #fff #fff;
        transform-origin: 0 0;
        transform: rotate(135deg);
        box-shadow: -3px 3px 3px #0000000d;
    }
    &.top::before {
        bottom: -13px;
        top: initial;
        left: calc(50% - .25em);
        transform: rotate(-45deg);
    }
   
    @keyframes enter {
        0% {
            transform: translateY(20px);
        }
        100% {
            transform: translateY(0);
        }
    }
`;function zd(t){var u;const e=React.useRef(null),[n,r]=React.useContext(en),i=React.useMemo(()=>n.currentJson?n.currentJson.nodeKeys.map(c=>He.get(c)):[],[n.currentJson,n.trigger]),o=React.useMemo(()=>i.filter(Boolean).find(c=>c.id===t.id),[i,t.id]),s=React.useCallback(()=>{t.editor.getEditorState().read(()=>{const c=O.$getSelection();if(O.$isRangeSelection(c)){const d=c.anchor,h=c.focus,g=xt.createDOMRange(t.editor,d.getNode(),d.offset,h.getNode(),h.offset),f=e.current;if(g!==null&&f!==null){const{left:y,bottom:x,width:k}=g.getBoundingClientRect();let I=xt.createRectsFromDOMRange(t.editor,g).length===1?y+k/2-300:y-300;I<10&&(I=10),x+20+f.offsetHeight>innerHeight?(f.classList.add("top"),f.style.top=`${x-30-f.offsetHeight}px`):(f.style.top=`${x+20}px`,f.classList.remove("top")),f.style.left=`${I}px`}}})},[t.id,t.editor]);React.useEffect(()=>ao("resize",s),[t.editor,s]),React.useEffect(()=>{s()},[t.id,t.editor,s]);const l=React.useCallback(c=>{if(o){const d=Dd(o,c);He.set(o.id,d),r({type:"UpdateTrigger"})}},[o]),a=React.useMemo(()=>o?{show_text:"\u9009\u586B\uFF0C\u5408\u6CD5\u7684json\u4F1A\u88AB\u89E3\u6790\u6210\u7EC4\u4EF6",show_item:"\u9009\u586B\uFF0C{ id, count, tag }",show_entity:"\u9009\u586B\uFF0C{ name, tyoe, id }"}[o.hoverEvent.action]:"",[(u=o==null?void 0:o.hoverEvent)==null?void 0:u.action]);return o?le(Bd,{ref:e,children:[le(antd.Row,{style:{marginBottom:10},children:[m(antd.Col,{span:4,style:{textAlign:"right",paddingTop:4},children:"\u7C7B\u578B\uFF1A"}),m(antd.Col,{span:20,children:le(lo,{children:[le(antd.Radio.Group,{defaultValue:"text",value:o.type,onChange:c=>{const d=c.target.value;l({type:d})},style:{marginTop:5,marginBottom:10},children:[m(antd.Radio,{value:"text",children:"text"},"text"),m(antd.Radio,{value:"nbt",children:"nbt"},"nbt"),m(antd.Radio,{value:"selector",children:"selector"},"selector"),m(antd.Radio,{value:"score",children:"score"},"score"),m(antd.Radio,{value:"keybind",children:"keybind"},"keybind"),m(antd.Radio,{value:"translate",children:"translate"},"translate")]}),m(Fd,{onChange:c=>{l(c)},value:o})]})})]}),le(antd.Row,{style:{marginBottom:10},children:[m(antd.Col,{span:4,style:{textAlign:"right",paddingTop:4},children:"\u70B9\u51FBclick\uFF1A"}),m(antd.Col,{span:20,children:m(antd.Input,{addonBefore:le(antd.Select,{onChange:c=>{l({clickEvent:{...o.clickEvent,action:c}})},value:o.clickEvent.action,defaultValue:"run_command",style:{width:100},children:[m(antd.Select.Option,{value:"run_command",children:"\u6267\u884C\u6307\u4EE4"}),m(antd.Select.Option,{value:"open_url",children:"\u6253\u5F00\u7F51\u5740"}),m(antd.Select.Option,{value:"suggest_command",children:"\u8F93\u5165\u6587\u672C"}),m(antd.Select.Option,{value:"copy_to_clipboard",children:"\u590D\u5236\u5185\u5BB9"}),m(antd.Select.Option,{value:"change_page",children:"\u5207\u6362\u9875\u7801"})]}),placeholder:"\u9009\u586B",allowClear:!0,value:o.clickEvent.value,onChange:c=>{const d=c.target.value;l({clickEvent:{...o.clickEvent,value:d}})}})})]}),le(antd.Row,{style:{marginBottom:10},children:[m(antd.Col,{span:4,style:{textAlign:"right",paddingTop:4},children:"\u60AC\u6D6Ehover\uFF1A"}),m(antd.Col,{span:20,children:m(antd.Input,{addonBefore:le(antd.Select,{onChange:c=>{l({hoverEvent:{...o.hoverEvent,action:c}})},value:o.hoverEvent.action,defaultValue:"show_text",style:{width:100},children:[m(antd.Select.Option,{value:"show_text",children:"text"}),m(antd.Select.Option,{value:"show_item",children:"item"}),m(antd.Select.Option,{value:"show_entity",children:"entity"})]}),placeholder:a,allowClear:!0,value:o.hoverEvent.value,onChange:c=>{const d=c.target.value;l({hoverEvent:{...o.hoverEvent,value:d}})}})})]}),le(antd.Row,{style:{marginBottom:10},children:[m(antd.Col,{span:4,style:{textAlign:"right",paddingTop:4},children:"insertion\uFF1A"}),m(antd.Col,{span:20,children:m(antd.Input,{placeholder:"\u9009\u586B\uFF0Cshift\u70B9\u51FB\u6587\u5B57\u586B\u5145\u5230\u804A\u5929\u680F",allowClear:!0,value:o.insertion,onChange:c=>{const d=c.target.value;l({insertion:d})}})})]}),le(antd.Row,{style:{marginBottom:10},children:[m(antd.Col,{span:4,style:{textAlign:"right",paddingTop:4},children:"font\uFF1A"}),m(antd.Col,{span:20,children:m(antd.Input,{placeholder:"\u9009\u586B",allowClear:!0,value:o.font,onChange:c=>{const d=c.target.value;l({font:d})}})})]})]}):null}const Na=O.createCommand(),He=new Map,Xe=new Map;function jd(){const[t]=nt.useLexicalComposerContext(),[e,n]=React.useState(null),[r,i]=React.useState(null),[o,s]=React.useContext(en),[l,a]=React.useState(!0),u=React.useCallback(c=>{t.update(()=>{const d=O.$getSelection();if(O.$isRangeSelection(d)){const h=d.getNodes();for(const k of h)if(ne.$isMarkNode(k)||O.$isTextNode(k)&&ne.$isMarkNode(k.getParent()))return;const g=d.focus,f=d.anchor,y=c.id,x=d.isBackward();ne.$wrapSelectionInMarkNode(d,x,y),x?f.set(g.key,g.offset,g.type):g.set(f.key,f.offset,f.type)}})},[t]);return React.useEffect(()=>{a(!0);const c=[];if(e){const d=Xe.get(e);if(d!==void 0){const h=t.getElementByKey(d);h!==null&&(h.classList.add("selected"),c.push(h))}}return()=>{for(let d=0;d<c.length;d++)c[d].classList.remove("selected")}},[e,t]),React.useEffect(()=>{const c={};return Ue.mergeRegister(Ue.registerNestedElementResolver(t,ne.MarkNode,d=>ne.$createMarkNode(d.getIDs()),(d,h)=>{d.getIDs().forEach(f=>{h.addID(f)})}),t.registerMutationListener(ne.MarkNode,d=>{t.getEditorState().read(()=>{if(d.size===2){let h;for(const[g,f]of d){const y=O.$getNodeByKey(g);if(ne.$isMarkNode(y)){if(f==="updated")h=y.getIDs()[0];else if(f==="created"&&h){const x=Ts(),k=Id(He.get(h));k.id=x.id,He.set(x.id,k),t.update(()=>{Xe.set(x.id,g),y.deleteID(y.getIDs()[0]),y.addID(x.id)})}}}}else for(const[h,g]of d){const f=O.$getNodeByKey(h);let y;if(g==="destroyed"?y=c[h]:ne.$isMarkNode(f)&&(y=f.getIDs()[0]),y){let x=Xe.get(y);c[h]=y,g==="destroyed"?x!==void 0&&Xe.delete(y):Xe.set(y,h)}}})}),t.registerUpdateListener(({editorState:d,tags:h})=>{d.read(()=>{const g=O.$getSelection();let f=!1,y=!1;if(O.$isRangeSelection(g)){const x=g.anchor.getNode();if(O.$isTextNode(x)){const k=ne.$getMarkIDs(x,g.anchor.offset);k!==null&&g.anchor.offset!==0&&(n(k[0]),f=!0),g.isCollapsed()&&(i(x.getKey()),y=!0)}f||n(null),y||i(null)}})}),t.registerCommand(Na,()=>{const d=window.getSelection();d!==null&&d.removeAllRanges();const h=Ts();return u(h),He.set(h.id,xa(h.id)),s({type:"AddNodeKey",nodeKey:h.id}),!0},O.COMMAND_PRIORITY_EDITOR))},[t]),React.useEffect(()=>Ue.mergeRegister(t.registerCommand(O.UNDO_COMMAND,c=>(a(!1),!1),O.COMMAND_PRIORITY_CRITICAL),t.registerCommand(O.REDO_COMMAND,c=>(a(!1),!1),O.COMMAND_PRIORITY_CRITICAL)),[t]),m(lo,{children:l&&!!e&&!!r&&m(zd,{id:e,editor:t})})}const Kd=1,Wd=1<<1,Hd=1<<2,Ud=1<<3,Yd=1<<5;function Jd(t){const e=t.match(/color:\s*(.*);?\b/);if(e){const[,n]=e,r=zr.find(i=>i.fc===n);return r?r.id:n}return""}function Gd(t){const e={};return t.bold&&(e.bold=t.bold),t.italic&&(e.italic=t.italic),t.obfuscated&&(e.obfuscated=t.obfuscated),t.underlined&&(e.underlined=t.underlined),t.strikethrough&&(e.strikethrough=t.strikethrough),t.color&&(e.color=t.color),e}function Vd(t){const e=!!(t.format&Kd),n=!!(t.format&Wd),r=!!(t.format&Hd),i=!!(t.format&Ud),o=!!(t.format&Yd),s=Jd(t.style),l=t.text;return{...Gd({color:s,bold:e,italic:n,obfuscated:o,underlined:i,strikethrough:r}),text:l}}function fo(t){try{return JSON.parse(t)}catch{return t}}function qd(t){const e={};if(t.clickEvent.value&&(e.clickEvent=t.clickEvent),t.hoverEvent.value&&(e.hoverEvent=t.hoverEvent),t.insertion&&(e.insertion=t.insertion),t.font&&(e.font=t.font),t.type==="nbt"){const{type:n,path:r,value:i,interpret:o,separator:s}=t.nbt;i&&(e.nbt=r,e[n]=i,o&&(e.interpret=o),s&&(e.separator=Sa(fo(s))))}else if(t.type==="score"){const{objective:n,name:r}=t.score;r&&(e.score={name:r,objective:n})}else t.type==="selector"?t.selector&&(e.selector=t.selector):t.type==="keybind"?t.keybind&&(e.keybind=t.keybind):t.type==="translate"&&t.translate&&(e.translate=t.translate.translate,e.with=t.translate.with);return e}function Rt(t,e){const n=[];for(const r of t)if(r.type==="mark"){const[i]=r.ids,o=Rt(r.children,e),s=e.find(a=>a.id===i),l=qd(s);o.forEach(a=>{const u={...a,...l};n.push(u)})}else{const i=Vd(r);n.push(i)}return n}function Xd(t){let{action:e,value:n}=t;return e==="run_command"&&!n.startsWith("/")&&(n="/"+n),{clickEvent:{action:e,value:n}}}function Sa(t){const e=n=>{if(ya(n)){const{clickEvent:r,hoverEvent:i,insertion:o,...s}=n;return s}return n};return Array.isArray(t)?t.map(n=>e(n)):e(t)}function Zd(t){const{action:e,value:n}=t;return{hoverEvent:{action:e,value:Sa(fo(n))}}}function Qd(t){return{translate:t.translate,with:fo(t.with)}}function an(t){const e=[];for(const r of t){const{text:i,...o}=r,s=e.at(-1);if(s){const{text:l,...a}=s;if(i.trim()===""&&Object.keys(o).length===0){s.text+=i;continue}if(uo(o,a)){s.text+=i;continue}}e.push(r)}const n=r=>{const{text:i,clickEvent:o,hoverEvent:s,translate:l,with:a,...u}=r,c={...u,text:i,...l&&Qd({translate:l,with:a}),...o&&Xd(o),...s&&Zd(s)};if(c.nbt||c.score||c.selector||c.keybind||c.translate)delete c.text;else if(Object.keys(c).length===1)return JSON.stringify(i);return JSON.stringify(c)};return e.length===1?n(e[0]):'["",'+e.map(r=>n(r)).join(",")+"]"}function ef(t,e){const n=React.useRef(!0),r=()=>n.current=!1;React.useEffect(()=>{if(n.current)return t(r)},e)}function Wr(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function tf(t,e){const n=indexedDB.open(t);n.onupgradeneeded=()=>n.result.createObjectStore(e);const r=Wr(n);return(i,o)=>r.then(s=>o(s.transaction(e,i).objectStore(e)))}let ri;function ho(){return ri||(ri=tf("keyval-store","keyval")),ri}function Ai(t,e=ho()){return e("readonly",n=>Wr(n.get(t)))}function ii(t,e,n=ho()){return n("readwrite",r=>(r.put(e,t),Wr(r.transaction)))}function oi(t,e=ho()){return e("readwrite",n=>(n.delete(t),Wr(n.transaction)))}var zn={},Ta=O,Ea=ht;let nf=Ta.createCommand();function rf(){return Ea.createElement("hr",null)}class jn extends Ta.DecoratorNode{static getType(){return"horizontalrule"}static clone(e){return new jn(e.__key)}static importJSON(){return ka()}exportJSON(){return{type:"horizontalrule",version:1}}createDOM(){let e=document.createElement("div");return e.style.display="contents",e}getTextContent(){return`
`}isTopLevel(){return!0}updateDOM(){return!1}decorate(){return Ea.createElement(rf,null)}}function ka(){return new jn}zn.$createHorizontalRuleNode=ka;zn.$isHorizontalRuleNode=function(t){return t instanceof jn};zn.HorizontalRuleNode=jn;zn.INSERT_HORIZONTAL_RULE_COMMAND=nf;const of=zn;var Ut=of;const z=class{static eat(e){z.text=z.text.substr(e)}static parseObject(){const e={};if(z.testCloseCurly())return e;for(;;){const n=z.parseKey();z.eatColon();const r=z.parseValue();if(e[n]=r,z.testCloseCurly())break;z.eatComma()}return e}static testIndexArray(){const e=z.text.match(/\s*\d+\s*:/);return e&&e?(z.eat(e[0].length),!0):!1}static testTypeArray(){const e=z.text.match(/^\s*[ILB]\s*;/);return e&&e?(z.eat(e[0].length),!0):!1}static parseArray(){const e=[];if(z.testCloseSquare())return e;for(;z.testIndexArray(),z.testTypeArray(),z.testBeginSquare()?e.push(z.parseObject()):e.push(z.parseValue()),!z.testCloseSquare();)z.eatComma();return e}static eatColon(){const e=z.text.match(/^\s*:/);if(e){z.eat(e[0].length);return}throw new Error("lack of colon")}static eatComma(){const e=z.text.match(/^\s*,/);if(e){z.eat(e[0].length);return}throw new Error("lack of comma")}static testBeginCurly(){const e=z.text.match(/^\s*{/);return e?(z.eat(e[0].length),!0):!1}static testCloseCurly(){const e=z.text.match(/^\s*}/);return e?(z.eat(e[0].length),!0):!1}static testBeginSquare(){const e=z.text.match(/^\s*\[/);return e?(z.eat(e[0].length),!0):!1}static testCloseSquare(){const e=z.text.match(/^\s*\]/);return e?(z.eat(e[0].length),!0):!1}static parseKey(){const e=z.text.match(/^\s*([a-z][a-z0-9]*)/i);if(e){const[n,r]=e;return z.eat(n.length),r}throw new Error(`Property name is invalid at "${z.text.slice(0,15)}"`)}static parseValue(){if(z.testBeginCurly())return z.parseObject();if(z.testBeginSquare())return z.parseArray();const e=z.text.match(/^\s*([0-9a-zA-Z_\-\$\.]+)|^\s*("(?:\\\"|\\\\|[^\\\\])*?")|^\s*(\'(?:\\\"|\\\\|[^\\\\])*?')/);if(e){const[n,r,i,o]=e;if(z.eat(n.length),r)return r;if(i)return i.slice(1,-1).replace(/\\\\/g,"\\").replace(/\\\"/g,'"');if(o)return o.slice(1,-1)}throw new Error(`value is invalid at "${z.text.slice(0,15)}"`)}};let Bt=z;go(Bt,"text","");function sf(t){if(Bt.text=t,Bt.testBeginCurly())return Bt.parseObject();throw new Error("expect an object")}function un(t="[]"){const e=JSON.parse(va(t)),n=[];if(Array.isArray(e))return n.push(...e.filter(Boolean).map(s=>typeof s=="string"?{text:s}:s)),n;const{extra:r,...i}=e,o=Object.keys(i);return o.length===0||o.length===1&&o[0]==="text"||n.push(i),r&&n.push(...r),n}function qn(t){if(t.length){const e=t[t.length-1];e.text+="\\n"}else t.push({text:"\\n"})}function si(t){if(typeof t=="string")return{textProps:{text:t},eventProps:{}};const{text:e,color:n,bold:r,italic:i,obfuscated:o,strikethrough:s,underlined:l,...a}=t,u=zr.find(c=>c.id===n);return{textProps:{text:e,bold:r,italic:i,obfuscated:o,strikethrough:s,color:u?u.fc:n},eventProps:a}}function lf(t){return new Promise((e,n)=>{var r,i;try{let o=JSON.parse(t);if(!ya(o)){n();return}Array.isArray(o)||(o=[o]);const s=o.filter(Boolean).map(l=>si(l));e([s])}catch{try{const o=sf(t),s=(o==null?void 0:o.pages)||((i=(r=o==null?void 0:o.Item)==null?void 0:r.tag)==null?void 0:i.pages);if(s){const l=s.map(a=>(a.startsWith("{")?un(a):JSON.parse(va(a))).filter(Boolean).map(c=>si(c)));e(l);return}if("Text1"in o||"Text2"in o||"Text3"in o||"Text4"in o){const l=un(o.Text1);qn(l);const a=un(o.Text2);qn(a);const u=un(o.Text3);qn(u);const c=un(o.Text4);qn(c);const h=[...l,...a,...u,...c].map(g=>si(g));e([h])}}catch(o){n(o)}}})}function af(t){const e=O.$createTextNode(t.text);return t.bold&&e.toggleFormat("bold"),t.italic&&e.toggleFormat("italic"),t.strikethrough&&e.toggleFormat("strikethrough"),t.underlined&&e.toggleFormat("underline"),t.obfuscated&&e.toggleFormat("subscript"),t.color&&e.setStyle(`color:${t.color}`),e}function uf(t){var n,r;const e=xa();if((n=t.clickEvent)!=null&&n.value&&(e.clickEvent=t.clickEvent,e.clickEvent.action=t.clickEvent.action||"run_command"),(r=t.hoverEvent)!=null&&r.value&&(e.hoverEvent=t.hoverEvent,e.hoverEvent.action=t.hoverEvent.action||"show_text"),t.insertion&&(e.insertion=t.insertion),t.font&&(e.font=t.font),t.nbt){const i=e.nbt;t.block?(i.type="block",i.value=t.block):t.entity?(i.type="entity",i.value=t.entity):(i.type="storage",i.value=t.storage||""),t.interpret&&(i.interpret=t.interpret),t.separator&&(i.separator=t.separator)}else t.selector?e.type="selector":t.score?(e.type="score",e.score=t.score):t.translate?(e.type="translate",e.translate={translate:t.translate,with:t.with||""}):t.keybind&&(e.type="keybind",e.keybind=t.keybind);return e}function cf(t){const e=[],n=[],r=new Map;let i=O.$createParagraphNode(),o=null;return t.forEach(s=>{s.forEach(({textProps:l,eventProps:a})=>{let u=null;if(!Ns(o)&&uo(o,a)){const g=e[e.length-1];if(O.$isParagraphNode(g)){const f=g.getLastChild();ne.$isMarkNode(f)&&(u=f)}}else if(!Ns(a)){u=ne.$createMarkNode([]);const g=uf(a);n.push(g),u.addID(g.id),r.set(g.id,u.getKey())}o=a;const c=l.text?l.text.split(`
`):["\u3014\u3015"],[d,...h]=c.map(g=>af({...l,text:g}));u?(u.append(d),i.append(u)):i.append(d),h.forEach(g=>{e.push(i),o=null,i=O.$createParagraphNode(),g.getTextContentSize()&&i.append(g)})}),e.push(i),e.push(Ut.$createHorizontalRuleNode()),i=O.$createParagraphNode()}),e.pop(),{nodes:e,eventList:n,nodeMap:r}}const df=St.div`
    position: sticky;
    top: 0;
    margin-bottom: 8px;
    background: #fff;
    .text-btn {
        display: inline-block;
        font-size: 20px;
        > em {
            &::after {
                content: '|';
                display: inline-block;
                vertical-align: 1px;
                color: #ddd;
            }
        }
       .text-btn-item {
            font-size: 20px;
            padding: 4px;
            margin-right: 2px;
            border-radius: 4px;
            outline: none;
            &.disabled {
                color: #aaa;
                cursor: not-allowed;
            }
            &.active {
                background-color: #efefef;
            }
            &:hover {
                background-color: #eee;
            }
        }
    }
`,Xn="no-window-show",Zn="no-command-show";function ff(t){const[e]=nt.useLexicalComposerContext(),[n,r]=React.useState(e),[i,o]=React.useState(!1),[s,l]=React.useState(!1),[a,u]=React.useState(!1),[c,d]=React.useState(!1),[h,g]=React.useState(!1),[f,y]=React.useState(!1),[x,k]=React.useState(!1),[T,I]=React.useContext(en),[L,J]=React.useState("#000"),[ee,Ce]=React.useState(""),[ae,Ie]=React.useState(!1),[Pe,Ge]=React.useState(!1),ce=React.useRef(null),Ne=React.useCallback(()=>{const v=O.$getSelection();O.$isRangeSelection(v)&&(o(v.hasFormat("bold")),l(v.hasFormat("italic")),u(v.hasFormat("underline")),d(v.hasFormat("strikethrough")),g(v.hasFormat("subscript")),J(xt.$getSelectionStyleValueForProperty(v,"color","#000")))},[n]);React.useEffect(()=>ao("keydown",v=>{v.ctrlKey&&v.key==="p"&&!t.visible&&(v.preventDefault(),t.setVisible(!0))})),React.useEffect(()=>Ue.mergeRegister(n.registerCommand(O.CAN_UNDO_COMMAND,v=>(y(v),!1),O.COMMAND_PRIORITY_CRITICAL),n.registerCommand(O.CAN_REDO_COMMAND,v=>(k(v),!1),O.COMMAND_PRIORITY_CRITICAL),e.registerCommand(O.SELECTION_CHANGE_COMMAND,(v,C)=>(Ne(),r(C),!1),O.COMMAND_PRIORITY_CRITICAL),e.registerUpdateListener(()=>{e.getEditorState().read(()=>{const v=O.$getRoot().getTextContent().trim();Ce(v);const C=O.$getSelection();if(O.$isRangeSelection(C)){Ge(!C.isCollapsed());const S=C.getNodes(),$=S.length===1?S[0].getType()==="mark"||ne.$isMarkNode(S[0].getParent()):S.some(p=>ne.$isMarkNode(p)||O.$isParagraphNode(p));Ie($)}})})),[e,Ne]);const fe=React.useCallback(v=>{n.update(()=>{const C=O.$getSelection();O.$isRangeSelection(C)&&xt.$patchStyleText(C,v)})},[n]),ge=React.useCallback(v=>{fe({color:v})},[fe]);ef(v=>{v(),Ai("__jte__").then(C=>{C&&(I({type:"Load",state:C}),e.update(()=>{let S;if(C.currentJson&&(S=C.currentJson.data),S){const $=e.parseEditorState(S);e.setEditorState($)}}))})},[]);const pe=React.useCallback(()=>{n.update(()=>{const v=O.$getSelection();O.$isRangeSelection(v)&&v.getNodes().forEach(C=>{O.$isTextNode(C)&&(C.setFormat(0),C.setStyle(""),Ue.$getNearestBlockElementAncestorOrThrow(C).setFormat(""));const S=C.getParent();if(ne.$isMarkNode(S)){const $=S.getIDs()[0];Xe.delete($),He.delete($),ne.$unwrapMarkNode(S)}if(ne.$isMarkNode(C)){const $=C.getIDs()[0];Xe.delete($),He.delete($),ne.$unwrapMarkNode(C)}})})},[n]);React.useEffect(()=>{const v=e.getEditorState();v.read(()=>{const C=v.toJSON(),S=[];O.$getRoot().getChildren().filter(p=>O.$isParagraphNode(p)).map(p=>p.getChildren()).flat().forEach(p=>{ne.$isMarkNode(p)&&S.push(p.getIDs()[0])}),I({type:"UpdateCurrentJson",currentJson:{id:An(),data:C,text:ee,nodeKeys:S,time:Vn()}})})},[T.jsonIndex,e,ee]);const de=React.useCallback(()=>{const v=e.getEditorState();v.read(()=>{const C=v.toJSON();if(T.jsonIndex!==-1){const S=T.jsonList[T.jsonIndex],$=[];O.$getRoot().getChildren().filter(b=>O.$isParagraphNode(b)).map(b=>b.getChildren()).flat().forEach(b=>{ne.$isMarkNode(b)&&$.push(b.getIDs()[0])}),I({type:"UpdateJson",json:{...S,data:C,text:ee,nodeKeys:$,time:Vn()}})}else Se(!0)})},[e,T.jsonIndex,T.jsonList,ee]),Se=React.useCallback((v=!1)=>{const C=e.getEditorState();C.read(()=>{const S=C.toJSON(),$=[];O.$getRoot().getChildren().filter(N=>O.$isParagraphNode(N)).map(N=>N.getChildren()).flat().forEach(N=>{ne.$isMarkNode(N)&&$.push(N.getIDs()[0])}),new Promise((N,V)=>{ee.length?v?N(!0):antd.Modal.warning({okCancel:!0,closable:!0,content:"\u662F\u5426\u4FDD\u5B58\u5F53\u524D\u5DE5\u7A0B\uFF1F",onOk(){N(!0)},onCancel(...H){H.length===0?N(!1):V()},okText:"\u4FDD\u5B58\u5E76\u65B0\u5EFA",cancelText:"\u76F4\u63A5\u65B0\u5EFA"}):N(!1)}).then(N=>{if(N)if(T.jsonIndex!==-1){const V=T.jsonList[T.jsonIndex];I({type:"UpdateJson",json:{...V,data:S,nodeKeys:$,time:Vn()}})}else I({type:"AddJson",json:{id:An(),data:S,text:ee,nodeKeys:$,time:Vn()}});I({type:"UpdateJsonIndex",index:-1}),e.update(()=>{O.$getRoot().clear()})})})},[e,T.jsonIndex,T.jsonList,ee]),Ve=React.useMemo(()=>T.jsonIndex>-1?T.jsonList[T.jsonIndex]:T.currentJson,[T.currentJson,T.jsonIndex,T.jsonList]),Te=React.useMemo(()=>Ve?Ve.nodeKeys.map(v=>He.get(v)):[],[Ve,T.trigger]),ze=v=>{n.update(()=>{let C=O.$getSelection();if(O.$isRangeSelection(C)){let S=1;if(C.isBackward()){const A=C.focus,F=C.anchor,G=O.$createRangeSelection();G.anchor.set(A.key,A.offset,F.type),G.focus.set(F.key,F.offset,F.type),O.$setSelection(G),C=G}const $=C.extract(),p=[];let b=[],N=!0;const V=$[0];if(O.$isTextNode(V)){const A=V.getParent();ne.$isMarkNode(A)&&$.unshift(A);for(let F=0;F<$.length;F++)if($[F]===A){$.splice(F,1);break}}const H=[];for(let A=0;A<$.length;A++){const F=$[A];if(ne.$isMarkNode(F)){const G=F.getChildrenKeys();H.length===F.getChildrenSize()&&H.every(U=>G.includes(U.getKey()))&&$.unshift(...$.splice(A,1)),H.length=0;break}H.push(F)}for(let A=0;A<$.length;A+=S){const F=$[A];if(O.$isTextNode(F)){b.push(F.exportJSON()),S=1;continue}if(ne.$isMarkNode(F)){const G=F.getChildren(),U=F.exportJSON();U.children=G.map(me=>me.exportJSON()),b.push(U),S=G.length+1;continue}if(O.$isParagraphNode(F)){if(S=1,N){N=!1;continue}if(/tellraw|nbt|title|book/.test(v)){const G=b[b.length-1];G&&(G.type==="text"?G.text+=`
`:G.type==="mark"&&(G.children[G.children.length-1].text+=`
`))}else p.push(b),b=[]}v==="book"&&Ut.$isHorizontalRuleNode(F)&&(p.push(b),b=[])}p.push(b);let K="";if(v==="tellraw"){const A=an(Rt(p[0],Te));K=T.tplMap.tellraw.replace("%s",A)}else if(v==="title"){const A=an(Rt(p[0],Te));K=T.tplMap.title.replace("%s",A)}else if(v==="sign"){if(p.length>4){antd.message.warning("sign \u6700\u591A\u652F\u6301\u56DB\u884C\u6587\u672C\uFF01");return}const A=p.map((F,G)=>`Text${G+1}:'${Ss(an(Rt(F,Te)))}'`).join(",");K=T.tplMap.sign.replace("%s",A)}else if(v==="book"){const A=p.map(F=>{const G=Rt(F,Te);return"'"+Ss(an(G))+"'"}).join(",");K=T.tplMap.book.replace("%s",A)}else K=an(Rt(p[0],Te));K.length>=256&&!localStorage.getItem(Xn)&&antd.notification.warn({key:Xn,duration:null,message:"\u8D85\u8FC7\u804A\u5929\u7A97\u53E3\u5B57\u7B26\u9650\u5236\uFF0C\u8BF7\u4F7F\u7528\u547D\u4EE4\u65B9\u5757\u6216\u6570\u636E\u5305\uFF01",btn:m(antd.Button,{type:"primary",onClick:()=>{localStorage.setItem(Xn,"1"),antd.notification.close(Xn)},children:"\u4E0D\u518D\u63D0\u793A"})}),K.length>=32500&&!localStorage.getItem(Zn)&&antd.notification.warn({key:Zn,duration:null,message:"\u8D85\u8FC7\u547D\u4EE4\u65B9\u5757\u5B57\u7B26\u9650\u5236\uFF0C\u8BF7\u4F7F\u7528\u6570\u636E\u5305\uFF01",btn:m(antd.Button,{type:"primary",onClick:()=>{localStorage.setItem(Zn,"1"),antd.notification.close(Zn)},children:"\u4E0D\u518D\u63D0\u793A"})}),Md(K),antd.message.success("\u5DF2\u590D\u5236\u5230\u526A\u8D34\u7248")}})};return m(df,{children:le("div",{className:"text-btn",children:[m(icons.UndoOutlined,{title:"\u64A4\u9500(ctrl+z)",className:clsx("text-btn-item",{disabled:!f}),onClick:()=>{f&&n.dispatchCommand(O.UNDO_COMMAND,void 0)}}),m(icons.RedoOutlined,{title:"\u53CD\u64A4\u9500(ctrl+y)",className:clsx("text-btn-item",{disabled:!x}),onClick:()=>{x&&n.dispatchCommand(O.REDO_COMMAND,void 0)}}),m("em",{}),m(icons.BoldOutlined,{title:"\u52A0\u7C97(ctrl+b)",className:clsx("text-btn-item",{active:i}),onClick:()=>{n.dispatchCommand(O.FORMAT_TEXT_COMMAND,"bold")}}),m(icons.ItalicOutlined,{title:"\u659C\u4F53(ctrl+i)",className:clsx("text-btn-item",{active:s}),onClick:()=>{n.dispatchCommand(O.FORMAT_TEXT_COMMAND,"italic")}}),m(icons.UnderlineOutlined,{title:"\u4E0B\u5212\u7EBF(ctrl+u)",className:clsx("text-btn-item",{active:a}),onClick:()=>{n.dispatchCommand(O.FORMAT_TEXT_COMMAND,"underline")}}),m(icons.StrikethroughOutlined,{title:"\u5220\u9664\u7EBF",className:clsx("text-btn-item",{active:c}),onClick:()=>{n.dispatchCommand(O.FORMAT_TEXT_COMMAND,"strikethrough")}}),m(icons.QuestionCircleOutlined,{title:"\u6DF7\u6DC6",className:clsx("text-btn-item",{active:h}),onClick:()=>{n.dispatchCommand(O.FORMAT_TEXT_COMMAND,"subscript")}}),m(ps,{color:L,onChange:ge,children:m(icons.BgColorsOutlined,{title:"\u4FEE\u6539\u989C\u8272",className:"text-btn-item"})}),m(icons.ClearOutlined,{title:"\u6E05\u9664\u683C\u5F0F",className:"text-btn-item",onClick:pe}),m(icons.FunctionOutlined,{title:"\u6DFB\u52A0\u529F\u80FD",className:clsx("text-btn-item",{disabled:ae}),onClick:()=>{e.dispatchCommand(Na,void 0)}}),m(icons.LineOutlined,{title:"\u5206\u9694\u7B26",className:"text-btn-item",onClick:()=>{n.dispatchCommand(Ut.INSERT_HORIZONTAL_RULE_COMMAND,void 0)}}),m("em",{}),m(icons.PlusOutlined,{title:"\u65B0\u5EFA",className:clsx("text-btn-item",{disabled:!ee}),onClick:()=>{ee&&Se()}}),m(icons.SaveOutlined,{disabled:!ee,title:"\u6682\u5B58",className:clsx("text-btn-item",{disabled:!ee}),onClick:()=>{ee&&de()}}),m(antd.Dropdown,{disabled:!Pe,overlay:m(antd.Menu,{onClick:v=>{ze(v.key)},items:[{label:"\u4EC5nbt",key:"nbt"},{label:"tellraw",key:"tellraw"},{label:"title",key:"title"},{label:"sign",key:"sign"},{label:"book",key:"book"}]}),children:m(icons.CopyOutlined,{title:"\u5BF9\u9009\u53D6\u5185\u751F\u6210nbt",className:clsx("text-btn-item",{disabled:!Pe})})}),m(ps,{color:T.bgColor,onChange:v=>{I({type:"UpdateBgColor",bgColor:v})},children:m(icons.BgColorsOutlined,{title:"\u4FEE\u6539\u80CC\u666F\u989C\u8272",className:"text-btn-item"})}),m(icons.ReloadOutlined,{title:"\u91CD\u7F6E\u914D\u7F6E",className:"text-btn-item",onClick:()=>{antd.Modal.warning({title:"\u8BE5\u64CD\u4F5C\u4F1A\u91CD\u7F6E\u6240\u6709\u7528\u6237\u4FE1\u606F\uFF0C\u786E\u5B9A\u5417\uFF1F",onOk(){oi("__jte__"),oi("__jte_cacheEventMap__"),oi("__jte_nodeKeyMap__"),Xe.clear(),He.clear(),I({type:"Reset"}),e.update(()=>{O.$getRoot().clear()})},okCancel:!0,okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88"})}}),m(icons.ImportOutlined,{title:"\u5BFC\u5165\u547D\u4EE4",className:"text-btn-item",onClick:()=>{antd.Modal.info({title:"\u5BFC\u5165nbt\u547D\u4EE4",content:m(antd.Input,{ref:ce,placeholder:"\u5FC5\u586B\uFF0C\u4EC5nbt",autoFocus:!0,allowClear:!0}),closable:!0,onOk(){const v=ce.current.input.value.trim();if(!v.length)return antd.message.warning("\u8BF7\u8F93\u5165\u8981\u5BFC\u5165\u7684\u6587\u672C\uFF01"),!0;lf(v).then(C=>{e.update(()=>{const{nodes:S,eventList:$,nodeMap:p}=cf(C),b=O.$getRoot();b.clear(),p.forEach((N,V)=>{Xe.set(V,N)}),S.forEach(N=>{b.append(N)}),$.forEach(N=>{He.set(N.id,N)})})}).catch(()=>(antd.message.warning("\u5BFC\u5165\u6587\u672C\u683C\u5F0F\u6709\u8BEF\uFF01"),!0))},okText:"\u786E\u5B9A"})}}),m(icons.SettingOutlined,{title:"\u7BA1\u7406(ctrl+p)",className:"text-btn-item",onClick:()=>{t.setVisible(!0)}})]})})}const hf={text:{bold:"jtp__bold",italic:"jtp__italic",strikethrough:"jtp__strikethrough",underline:"jtp__underline",underlineStrikethrough:"jtp__underline-strikethrough",subscript:"jtp__subscript",superscript:"jtp__superscript"},mark:"jtp__mark",markOverlap:"jtp__mark-overlap"},gf=St.div`
    a.disabled {
        cursor: not-allowed;
        color: #ccc;
    }
`,pf="tellraw";function mf(t){const[e,n]=React.useContext(en),[r]=nt.useLexicalComposerContext(),i=[{title:"\u5E8F\u53F7",width:50,render:(s,l,a)=>a+1},{key:"id",dataIndex:"id",title:"ID",width:120},{key:"text",dataIndex:"text",title:"\u6458\u8981",ellipsis:!0,render:(s,l,a)=>m("a",{onClick:()=>{r.update(()=>{const u=r.parseEditorState(l.data);r.setEditorState(u)}),n({type:"UpdateJsonIndex",index:a})},children:s})},{key:"time",dataIndex:"time",width:150,title:"\u66F4\u65B0\u65F6\u95F4"},{title:"\u64CD\u4F5C",width:70,render:(s,l,a)=>m("div",{children:m("a",{title:"\u5220\u9664\u5F53\u524D\u9879",onClick:()=>{n({type:"RemoveJsonByIndex",index:a})},children:"\u5220\u9664"})})}],o=React.useMemo(()=>e.tplMap[e.tplType],[e.tplMap,e.tplType]);return m(gf,{children:le(antd.Drawer,{placement:"right",width:600,onClose:()=>{t.setVisible(!1)},visible:t.visible,children:[m("div",{style:{marginBottom:16},children:m(antd.Input,{addonBefore:m(antd.Select,{value:e.tplType,defaultValue:pf,onChange:s=>{n({type:"UpdateTplType",tplType:s})},style:{width:100},children:Object.keys(Ca).map(s=>m(antd.Select.Option,{value:s,children:s},s))}),value:o,onChange:s=>{s.persist();const l=s.target.value,a={...e.tplMap};a[e.tplType]=l,n({type:"UpdateTplMap",tplMap:a})}})}),m(antd.Table,{size:"small",locale:{emptyText:m("div",{style:{height:100,lineHeight:"100px"},children:"\u6682\u65E0\u6570\u636E"})},rowKey:"id",pagination:!1,dataSource:e.jsonList,columns:i})]})})}function _f(t){const[e,n]=[256,591];return(t+e)%(n-e)+e}const yf=St.span`
    overflow: hidden;
    display: block;
    position: absolute;
    pointer-events: none;
    font-family: Minecraft;
    font-size: 16px;
    /* background-color: #fff; */
`;function vf(t){const e=React.useRef(),n=React.useRef(null);React.useEffect(()=>{const o=n.current;return o&&setInterval(()=>{let s="";for(let l=0;l<o.innerText.length;l++){const a=o.innerText[l];s+=String.fromCharCode(_f(a.charCodeAt(0)+17))}o.innerText=s},1e3/30),()=>{clearInterval(e.current)}},[]);const{text:r,...i}=t;return m(yf,{ref:n,style:{...i},children:r})}function xf(){const[t]=nt.useLexicalComposerContext(),[e,n]=React.useState([]),r=()=>{const i=document.querySelectorAll("sub"),o=[];for(const s of i){const l=s.innerText,u=s.style.color==="transparent"?s.dataset.color||s.style.color:s.style.color||"#000";s.dataset.color=u,s.style.color="transparent";const c=s.getClientRects();for(const d of c)o.push({top:d.top-4,left:d.left,width:d.width,height:d.height+2,text:l,color:u})}n(o)};return React.useEffect(()=>Ue.mergeRegister(t.registerUpdateListener(()=>{setTimeout(()=>{r()},0)})),[]),React.useEffect(()=>(window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}),[]),ReactDOM.createPortal(m(lo,{children:e.map((i,o)=>m(vf,{...i},o))}),document.body)}function Cf(){const[t]=nt.useLexicalComposerContext();return React.useEffect(()=>t.registerCommand(Ut.INSERT_HORIZONTAL_RULE_COMMAND,e=>{const n=O.$getSelection();if(!O.$isRangeSelection(n))return!1;if(n.focus.getNode()!==null){const i=Ut.$createHorizontalRuleNode();n.insertParagraph(),n.focus.getNode().getTopLevelElementOrThrow().insertBefore(i)}return!0},O.COMMAND_PRIORITY_EDITOR),[t]),null}const Nf=St.div`
    max-width: 900px;
    margin: 0 auto;
    padding: 24px;
    background-color: #fff;

    p {
        margin: 0;
    }
    .jtp__editor {
        font-family: "Minecraft", "Minecraft-AE";
        font-size: 16px;
    }
`;function Sf(t){t.read(()=>{})}function Tf(){const[t,e]=React.useContext(en),[n,r]=React.useState(!1),i={namespace:"JTextEditor",theme:hf,nodes:[ne.MarkNode,Ut.HorizontalRuleNode],onError:o=>console.error(o)};return m(Nf,{children:le(mc.LexicalComposer,{initialConfig:i,children:[m(ff,{visible:n,setVisible:r}),m(od.RichTextPlugin,{contentEditable:m(ud.ContentEditable,{className:"jtp__editor",style:{width:t.width+"%",outline:"none",minHeight:450,border:"1px solid #eee",backgroundColor:t.bgColor}}),placeholder:""}),m(Nd.OnChangePlugin,{onChange:Sf}),m(jd,{}),m(yd.HistoryPlugin,{}),m(xf,{}),m(Cf,{}),m(antd.Slider,{step:1,min:0,max:100,value:t.width,onChange:o=>{e({type:"UpdateWidth",width:o})}}),m(mf,{visible:n,setVisible:r})]})})}const Ef=St.h1`
    margin-top: 16px;
    text-align: center;
    user-select: none;
    > span {
        font-size: 0;
    }
    > img {
        height: 36px;
    }
`,kf=St.footer`
    display: flex;
    width: 100%;
    align-items: center;
    justify-content: center;
    position: fixed;
    font-size: 12px;
    bottom: 0;
    > a {
        margin-right: 8px;
    }
`;function wf(){const[t,e]=Ld();return React.useEffect(()=>{try{Ai("__jte_nodeKeyMap__").then(n=>{Object.keys(n||{}).forEach(r=>{Xe.set(r,n[r])})}),Ai("__jte_cacheEventMap__").then(n=>{Object.keys(n||{}).forEach(r=>{He.set(r,n[r])})})}catch{}},[]),React.useEffect(()=>ao("beforeunload",n=>{ii("__jte__",t),ii("__jte_nodeKeyMap__",Cs(Xe)),ii("__jte_cacheEventMap__",Cs(He)),n.returnValue="delay"}),[t]),le(en.Provider,{value:[t,e],children:[le(Ef,{children:[m("span",{children:"JText Editor"}),m("img",{src:"./logo.svg",alt:"",style:{marginRight:16}}),m("img",{src:"./logo-text.svg",alt:""})]}),m(Tf,{}),le(kf,{children:[m("a",{target:"_blank",href:"https://github.com/hans000/jtext-editor/issues",children:"\u95EE\u9898\u53CD\u9988"}),m("a",{target:"_blank",title:"916625813",href:"https://jq.qq.com/?_wv=1027&k=onvGmdy5",children:"\u52A0\u5165\u7FA4\u804A"}),m("img",{src:"https://img.shields.io/badge/License-CC%20BY--NC--SA%204.0-lightgrey.svg"}),m("span",{children:"by hans0000"})]})]})}li.createRoot(document.getElementById("root")).render(m(React.StrictMode,{children:m(wf,{})}));
